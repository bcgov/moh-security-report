<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
*********************************************************************************************************************
 Copyright (c) 2017, Ministry of Health, BC.                                                 *
                                                                                                                    *
 All rights reserved.                                                                                               *
   This information contained herein may not be used in whole                                                       *
   or in part without the express written consent of the                                                            *
   Government of British Columbia, Canada.                                                                          *
                                                                                                                    *
 Revision Control Information                                                                                       *
 File:                $Id::                                                                                       $ *
 Date of Last Commit: $Date::                                                                                     $ *
 Revision Number:     $Rev::                                                                                      $ *
 Last Commit by:      $Author::                                                                                   $ *
                                                                                                                    *
*********************************************************************************************************************
-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui">
    <p:sidebar widgetVar="leftSideBar" baseZIndex="10000" 
               blockScroll="true" styleClass="leftSideBar">
        <p:panel id="filterPanel" styleClass="sidebar-panel filter-panel">
            <h3>Environments</h3>
            <p:scrollPanel style="height:150px">
                <p:selectManyCheckbox id="envFilter" layout="grid" 
                                      value="#{Scheduler.scheduleSelectedEnvironmentFilter}"
                                      columns="1">
                    <f:selectItems value="#{Scheduler.environmentList}" var="environment" 
                                   itemLabel="#{environment.environmentName}"/>
                    <p:ajax listener="#{Scheduler.filter}" update="scheduleTabs,topMenu:filtersTopButton" oncomplete="centerThreeMonthsViewAfterTabLoad()"/>
                </p:selectManyCheckbox>    
            </p:scrollPanel>
            <hr/>
            <h3>Categories</h3> 
            <p:scrollPanel style="height:150px">
                <h:panelGrid columns="2">                                 
                    <p:selectManyCheckbox id="rfcFilter" layout="grid" 
                                          value="#{Scheduler.scheduleSelectedCategoryFilter}" 
                                          columns="1">
                        <f:selectItems value="#{Scheduler.categoryList}" var="cat" 
                                       itemLabel="#{cat.categoryName}"/>
                        <p:ajax listener="#{Scheduler.filter}" update="scheduleTabs,topMenu:filtersTopButton" oncomplete="centerThreeMonthsViewAfterTabLoad()"/>
                    </p:selectManyCheckbox>                                
                </h:panelGrid>
            </p:scrollPanel>
            <hr/>
            <h3>Billing Category</h3>
            <h:panelGrid columns="2">                                                          
                <p:selectBooleanCheckbox id="onDemand" value="#{Scheduler.onDemand}">
                    <p:ajax listener="#{Scheduler.filter}" update="scheduleTabs,topMenu:filtersTopButton" oncomplete="centerThreeMonthsViewAfterTabLoad()"/>
                </p:selectBooleanCheckbox>
                <p:outputLabel for="onDemand" value="#{bundle.FilterOnDemandLabel}"/>
            </h:panelGrid>
            <hr/>
            <h3>Assignment</h3>
            <h:panelGrid columns="2">         
                <p:selectBooleanCheckbox id="assignedToMe" value="#{Scheduler.assignedToMe}">
                    <p:ajax listener="#{Scheduler.filter}" update="scheduleTabs,topMenu:filtersTopButton" oncomplete="centerThreeMonthsViewAfterTabLoad()"/>
                </p:selectBooleanCheckbox>
                <p:outputLabel for="assignedToMe" value="#{bundle.FilterAssignMe}"/>
                <p:selectBooleanCheckbox id="assignedToMyTeams" value="#{Scheduler.assignedToMyTeams}">
                    <p:ajax listener="#{Scheduler.filter}" update="scheduleTabs,topMenu:filtersTopButton" oncomplete="centerThreeMonthsViewAfterTabLoad()"/>
                </p:selectBooleanCheckbox>
                <p:outputLabel for="assignedToMyTeams" value="#{bundle.FilterAssignMyTeams}"/>
            </h:panelGrid>
            <hr/>
            <h:panelGrid columns="2">
                <p:selectBooleanCheckbox value="#{Scheduler.approvalFilter}">
                    <p:ajax listener="#{Scheduler.filter}" update="scheduleTabs,topMenu:filtersTopButton" oncomplete="centerThreeMonthsViewAfterTabLoad()"/>
                </p:selectBooleanCheckbox>    
                <h:outputText value="Keep only the approved task (change requests and server patches)" />
            </h:panelGrid>
            <hr/>
            <p:commandButton value="Clear filters" 
                             title="Clear all the filters"
                             actionListener="#{Scheduler.resetFilters()}"
                             update="filterPanel,topMenu:filtersTopButton"
                             oncomplete="centerThreeMonthsViewAfterTabLoad()"
                             style="width:100%"/>
        </p:panel> 
    </p:sidebar> 
</ui:composition>