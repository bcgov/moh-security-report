/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.moh.addrvalidation.audit;

import ca.bc.gov.moh.esb.util.filedrop.FileDropProcessor;

/**
 *
 * @author killian.faussart
 */
public class AddressValidationFileDropAudit {

    private static final String ADDR_REQUEST = "RECEIVE";
    private static final String ADDR_RESPONSE = "RESPOND";
    private static final String ADDR_ERROR = "ERROR";
    private static final String ADDR_PRE_PROCESS = "VALIDATE";
    private static final String ADDR_POST_PROCESS = "RESULT";
    
    private final FileDropProcessor fdp;

    //TODO get the JNDI entry to have the path
    public AddressValidationFileDropAudit(String path, String transactionId) {
        fdp = new FileDropProcessor(path, "AddrVal", transactionId);
    }

    public void dropAddressResponse(String addrXML) {
        fdp.dropFile(addrXML, ADDR_RESPONSE);
    }

    public void dropAddressRequest(String addrXML) {
        fdp.dropFile(addrXML, ADDR_REQUEST);
    }
    
    public void dropAddressError(String addrXML) {
        fdp.dropFile(addrXML, ADDR_ERROR);
    }
    
    public void dropAddressProcess(String addrXML, boolean isBefore) {
        fdp.dropFile(addrXML, isBefore ? ADDR_PRE_PROCESS : ADDR_POST_PROCESS);
    }
}
