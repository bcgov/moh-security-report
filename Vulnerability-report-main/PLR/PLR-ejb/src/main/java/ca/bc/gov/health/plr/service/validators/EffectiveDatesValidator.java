/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.plr.service.validators;

import ca.bc.gov.health.plr.ejb.entity.EntityCommon;
import ca.bc.gov.health.plr.persistence.BusinessRuleKeys;
import ca.bc.gov.health.plr.persistence.BusinessRuleMessageDao;
import ca.bc.gov.health.plr.util.DateUtils;
import java.util.Date;
import javax.ejb.Stateless;

/**
 * A service used for effective dates validation by ensuring 
 * the end date is not before the start date
 *
 * @author adebiyi.kuseju
 */
@Stateless
public class EffectiveDatesValidator {

    /**
     * Validates effective dates by ensuring the end date is not before the
     * start date
     * @param value Entity with dates
     * @throws ca.bc.gov.health.plr.service.validators.EntityValidationException
     */
    public void validate(EntityCommon value) throws EntityValidationException {
        validate(value.getEffectiveStartDate(),value.getEffectiveEndDate());
    }
    
    /**
     * Validate end after start
     * @param start Start date
     * @param end End date
     * @throws EntityValidationException 
     */
    public void validate(Date start, Date end) throws EntityValidationException {
        if (!(end == null || !DateUtils.isBefore(end, start))) {
            throw new EntityValidationException(BusinessRuleMessageDao.getMessageResource(BusinessRuleKeys.EFFECTIVE_END_BEFORE_EFFECTIVE_START));
        }
    }

}
