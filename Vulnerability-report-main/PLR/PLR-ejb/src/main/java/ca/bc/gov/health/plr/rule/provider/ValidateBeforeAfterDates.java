package ca.bc.gov.health.plr.rule.provider;

import ca.bc.gov.health.plr.rule.BusinessRule;
import ca.bc.gov.health.plr.rule.BusinessRuleMessage;
import ca.bc.gov.health.plr.rule.BusinessRuleResult;
import java.util.Arrays;
import java.util.Date;

/**
 * Business Rule to check that one date is after another
 * @author greg.perkins
 */
public class ValidateBeforeAfterDates implements BusinessRule {

    /**
     * Run validation check to ensure date of death is not before date of birth
     * @param startDate
     * @param endDate
     * @param code
     * @param message
     * @return BusinessRuleResult
     */
    public BusinessRuleResult validate(Date startDate, Date endDate, String code, String message) {
        if (startDate!=null && endDate!=null && endDate.before(startDate)){
            BusinessRuleMessage businessRuleMessage = new BusinessRuleMessage(code, message, BusinessRuleMessage.Severity.ERROR);
            return new BusinessRuleResult(false, Arrays.asList(businessRuleMessage));
        } else {
            return new BusinessRuleResult();
            
        }
    }

}
