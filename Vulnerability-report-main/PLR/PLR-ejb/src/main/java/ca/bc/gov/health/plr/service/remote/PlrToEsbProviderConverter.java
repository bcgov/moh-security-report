/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.plr.service.remote;

import ca.bc.gov.health.plr.dto.provider.ProviderDto;
import ca.bc.gov.health.plr.dto.provider.esb.*;
import ca.bc.gov.health.plr.persistence.CodeTableCodes;
import javax.ejb.Stateless;

/**
 *
 * @author sumesh.kariyil
 */
@Stateless
public class PlrToEsbProviderConverter {

    LocalDtoConverter<ProviderDetails, ProviderDto> providerConverter = new LocalDtoConverter<>();
    LocalDtoConverter<JurisdictionNameCodeDto, ca.bc.gov.health.plr.dto.provider.JurisdictionNameCodeDto> jurisdictionConverter = new LocalDtoConverter<>();
    
    public ProviderDetails convert(ProviderDto providerDto) {
        ProviderDetails details = new ProviderDetails();
        ca.bc.gov.health.plr.dto.provider.JurisdictionNameCodeDto jursidiction = providerDto.getJurisdiction();
        ca.bc.gov.health.plr.dto.provider.ProviderType providerType = providerDto.getProviderType();
        providerDto.setJurisdiction(null);
        providerDto.setProviderType(null);

        providerConverter.convert(details, providerDto);        
        details.setProviderType(CodeTableCodes.GrsCtPartyType.IND.getValue());        

        details.setJurisdiction(jurisdictionConverter.convert(new JurisdictionNameCodeDto(), jursidiction));
        return details;
    }    
}
