/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.plr.util;

import java.util.Enumeration;
import java.util.Hashtable;
import javax.naming.*;
import javax.naming.spi.ObjectFactory;
/**
 *
 * @author jonathan.wiebe
 */
public class JndiHashtableFactory
    implements ObjectFactory
{

    public JndiHashtableFactory()
    {
    }

    public Object getObjectInstance(Object o, Name name, Context ctx, Hashtable env)
        throws Exception
    {
        Hashtable h = null;
        if(o instanceof Reference)
        {
            Reference r = (Reference)o;
            Enumeration e = r.getAll();
            h = new Hashtable();
            RefAddr addr;
            for(; e.hasMoreElements(); h.put(addr.getType(), addr.getContent().toString()))
                addr = (RefAddr)e.nextElement();

        }
        return h;
    }
}
