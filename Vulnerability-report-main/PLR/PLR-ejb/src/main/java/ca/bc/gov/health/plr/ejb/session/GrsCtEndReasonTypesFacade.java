package ca.bc.gov.health.plr.ejb.session;

import ca.bc.gov.health.plr.ejb.entity.GrsCtEndReasonTypes;
import ca.bc.gov.health.plr.persistence.CodeTableCodes;
import java.util.Iterator;
import java.util.List;
import javax.ejb.Lock;
import javax.ejb.LockType;
import javax.ejb.Singleton;
import javax.ejb.Startup;

/**
 *
 * @author Adebiyi.Kuseju
 */
@Startup
@Singleton
@Lock(LockType.READ)
public class GrsCtEndReasonTypesFacade extends AbstractCodeFacade<GrsCtEndReasonTypes> {

    public GrsCtEndReasonTypesFacade() {
        super(GrsCtEndReasonTypes.class);
    }
    
    /**
     * Return a list of GrsCtEndReasonTypes which doesn't include CEASE.
     * @return List list of GrsCtEndReasonTypes
     */
    public List<GrsCtEndReasonTypes> findEndReasonCodeListWithoutCease() {
        List<GrsCtEndReasonTypes> endReasonTypeList = super.findAll();
        if(endReasonTypeList!=null) {
            Iterator<GrsCtEndReasonTypes> iterator = endReasonTypeList.iterator();
            while(iterator.hasNext()) {
                GrsCtEndReasonTypes endReasonType = iterator.next();
                if(endReasonType.getCtlNameCode().compareToIgnoreCase(CodeTableCodes.GrsCtEndReasonTypes.CEASE.getValue())==0) {
                    iterator.remove();
                    break;
                }
            }
        }
        return endReasonTypeList;
    }
    
}
