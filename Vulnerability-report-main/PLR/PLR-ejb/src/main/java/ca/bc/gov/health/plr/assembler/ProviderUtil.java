package ca.bc.gov.health.plr.assembler;

import ca.bc.gov.health.plr.ejb.entity.PrsConfidentialityIndicators;
import ca.bc.gov.health.plr.ejb.entity.PrsProviders;
import ca.bc.gov.health.plr.ejb.entity.util.EntityUtils;
import ca.bc.gov.health.plr.persistence.CodeTableCodes;
import java.util.List;

/**
 * A helper that assists with operations on Provider
 *
 * @author Grant.Hodgins
 */
public final class ProviderUtil {

    
    /**
     * Returns true if the Provider is marked Confidential; returns false if the
     * Provider is not marked Confidential or if all of the Confidentiality
     * indicators are inactive.
     *
     * @param provider the Provider to check for active Confidentiality.
     * @return true if the Provider is marked Confidential.
     */
    public static boolean isConfidential(PrsProviders provider) {
        List<PrsConfidentialityIndicators> confidentialities = provider.getPrsConfidentialityIndicatorsList();
        for (PrsConfidentialityIndicators confidentiality : confidentialities) {
            if (confidentiality.getActiveFlag() != null && EntityUtils.booleanValue(confidentiality.getActiveFlag())) {
                if (confidentiality.getConfidentialFlag().equals(CodeTableCodes.GrsCtBooleanTypes.YES.getValue()) && confidentiality.getEndReasonCode() == null) {
                    return true;
                }
            }
        }
        return false;
    }


}
