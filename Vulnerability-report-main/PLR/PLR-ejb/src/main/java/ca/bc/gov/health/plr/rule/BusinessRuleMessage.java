package ca.bc.gov.health.plr.rule;

import ca.bc.gov.health.plr.util.MessageCodeHelper;

/**
 * Encapsulate a business rule message. This message is intended to convey
 * informative validation or informational errors that result from the execution
 * of business logic.
 *
 * @author Grant.Hodgins
 */
public class BusinessRuleMessage {

    public enum Severity {
        INFO, WARNING, ERROR, FATAL
    }

    private final String message;
    private final String code;
    private final Severity severity;

    /**
     * Instantiate a business rule message.
     *
     * @param code a unique system code identifier for the message
     * @param message the text of the message
     * @param severity the severity type of message
     */
    public BusinessRuleMessage(String code, String message, Severity severity) {
        this.message = message;
        this.code = code;
        this.severity = severity;
    }

    /**
     * Instantiate a business rule message.
     *
     * @param message the text of the message, including the code
     * @param severity the severity type of message
     */
    public BusinessRuleMessage(String message, Severity severity) {
        String[] splitMessage = MessageCodeHelper.splitCodeAndMessage(message);
        this.message = splitMessage[1];
        this.code = splitMessage[0];
        this.severity = severity;
    }

    /**
     * @return the message
     */
    public String getMessage() {
        return message;
    }

    /**
     * @return the messageCode
     */
    public String getMessageCode() {
        return code;
    }

    /**
     * @return the messageType
     */
    public Severity getSeverity() {
        return severity;
    }
}
