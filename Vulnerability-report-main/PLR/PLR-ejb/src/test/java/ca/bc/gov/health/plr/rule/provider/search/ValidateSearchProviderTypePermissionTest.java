
package ca.bc.gov.health.plr.rule.provider.search;

import ca.bc.gov.health.plr.ejb.entity.GrsRegistryUsers;
import ca.bc.gov.health.plr.rule.BusinessRuleResult;
import ca.bc.gov.health.plr.service.provider.IntegrationSetup;
import org.junit.Test;
import static org.junit.Assert.*;

/**
 *
 * @author David Sharpe <david.a.sharpe@cgi.com>
 */
public class ValidateSearchProviderTypePermissionTest extends IntegrationSetup {

    @Test
    public void testValidate_valid() {
        // Reg user 1 is RU_TYPE_CODE RA, party 1. Permissions HA.
        GrsRegistryUsers regUser = new GrsRegistryUsers(1l);
        BusinessRuleResult result = validateSearchProviderTypePermission.validate("HA");
        assertTrue(result.isValid());
        assertEquals(0, result.getMessages().size());
    }
    
    @Test
    public void testValidate_invalid() {
        // reg User 1 doesn't have access to PHARM.
        BusinessRuleResult result = validateSearchProviderTypePermission.validate("PHARM");
        assertFalse(result.isValid());
        assertEquals(1, result.getMessages().size());
    }
    
}
