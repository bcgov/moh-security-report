/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.plr.dto.converter;

import ca.bc.gov.health.plr.dto.provider.StatusDto;
import ca.bc.gov.health.plr.ejb.entity.PrsCtStatusClassCodes;
import ca.bc.gov.health.plr.ejb.entity.PrsCtStatusCodes;
import ca.bc.gov.health.plr.ejb.entity.PrsCtStatusReasonCodes;
import ca.bc.gov.health.plr.ejb.entity.PrsProviders;
import ca.bc.gov.health.plr.ejb.entity.PrsStatuses;
import ca.bc.gov.health.plr.persistence.CodeTableCodes;
import ca.bc.gov.health.plr.persistence.CodesDao;
import ca.bc.gov.health.plr.service.provider.IntegrationSetup;
import java.util.Date;
import javax.persistence.EntityManager;
import static org.junit.Assert.assertEquals;
import org.junit.Before;
import org.junit.Test;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

/**
 *
 * @author sumesh.kariyil
 */
public class StatusDtoConverterTest extends IntegrationSetup{
    

   
    @Test
    public void testToEntity_statusClassCodeId() {
        StatusDto dto = getStatusDto();        
        PrsCtStatusClassCodes statusClassCode = codesDao.lookup(PrsCtStatusClassCodes.class, CodeTableCodes.PrsCtStatusClassCodes.ASSIGNED_ENTITY);
        dto.setClassCodeId(statusClassCode.getCtlId());
        PrsStatuses result = statusDtoConverter.toEntity(dto);

        assertEquals(statusClassCode, result.getStatusClassCode());
    }

    @Test
    public void testToEntity_statusCodeId() {
        StatusDto dto = getStatusDto();        
        PrsCtStatusCodes ctStatusCodes = codesDao.lookup(PrsCtStatusCodes.class, CodeTableCodes.PrsCtStatusCodes.ACTIVE);
        dto.setTypeId(ctStatusCodes.getCtlId());
        PrsStatuses result = statusDtoConverter.toEntity(dto);
        
        assertEquals(ctStatusCodes, result.getStatusTypeCode());
    }

    @Test
    public void testToEntity_statusReasonCodeId() {
        StatusDto dto = getStatusDto();        
        PrsCtStatusReasonCodes ctStatusReasonCode = codesDao.lookup(PrsCtStatusReasonCodes.class, "ASSOC");
        dto.setReasonCodeId(ctStatusReasonCode.getCtlId());
        PrsStatuses result = statusDtoConverter.toEntity(dto);
        assertEquals(ctStatusReasonCode, result.getStatusReasonCode());
    }

    @Test
    public void testToEntity_effectiveStartDate_status() {
        StatusDto dto = getStatusDto();
        Date startDate = new Date();
        dto.setEffectiveStartDate(startDate);
        PrsStatuses result = statusDtoConverter.toEntity(dto);

        assertEquals(startDate, result.getEffectiveStartDate());
    }

    @Test
    public void testToEntity_effectiveEndDate_status() {
        StatusDto dto = getStatusDto();
        Date endDate = new Date();
        dto.setEffectiveEndDate(endDate);
        PrsStatuses result = statusDtoConverter.toEntity(dto);

        assertEquals(endDate, result.getEffectiveEndDate());
    }

    private StatusDto getStatusDto() {
        StatusDto dto = new StatusDto();
        return dto;
    }
}
