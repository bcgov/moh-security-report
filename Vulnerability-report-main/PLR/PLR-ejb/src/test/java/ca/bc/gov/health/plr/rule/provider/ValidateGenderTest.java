
package ca.bc.gov.health.plr.rule.provider;

import ca.bc.gov.health.plr.persistence.BusinessRuleKeys;
import ca.bc.gov.health.plr.persistence.BusinessRuleMessageDao;
import ca.bc.gov.health.plr.rule.BusinessRuleMessage;
import ca.bc.gov.health.plr.rule.BusinessRuleResult;
import ca.bc.gov.health.plr.service.provider.IntegrationSetup;
import ca.bc.gov.health.plr.util.MessageCodeHelper;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;
import org.junit.Test;

/**
 *
 * @author David Sharpe <david.a.sharpe@cgi.com>
 */
public class ValidateGenderTest extends IntegrationSetup{

    @Test
    public void testValidate_invalid() {
        BusinessRuleResult brr = validateGender.validateGenderCode("M", true);
        assertTrue(brr.isValid());
        brr = validateGender.validateGenderCode(null, false);
        assertTrue(brr.isValid());
        brr = validateGender.validateGenderCode("", false);
        assertTrue(brr.isValid());
        brr = validateGender.validateGenderCode(" ", false);
        assertTrue(brr.isValid());
        brr = validateGender.validateGenderCode("F", false);
        assertTrue(brr.isValid());
        brr = validateGender.validateGenderCode("U", false);
        assertTrue(brr.isValid());
        brr = validateGender.validateGenderCode("P", false);
        assertTrue(!brr.isValid());
        assertEquals(brr.getMessages().get(0).getMessageCode()+": " + brr.getMessages().get(0).getMessage(),  BusinessRuleMessageDao.getMessageResource(BusinessRuleKeys.ERROR_DEMOGRAPICHGENDERFIELD_INVALID));
        brr = validateGender.validateGenderCode(null, true);
        assertTrue(!brr.isValid());
        
        assertEquals(brr.getMessages().get(0).getMessageCode()+": " + brr.getMessages().get(0).getMessage(), BusinessRuleMessageDao.getMessageResource(BusinessRuleKeys.ERROR_MANDATORY_PART1) + "Gender" +  BusinessRuleMessageDao.getMessageResource(BusinessRuleKeys.ERROR_MANDATORY_PART2));
    
    }
   
}
