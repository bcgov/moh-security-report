package ca.bc.gov.health.plr.service.provider;

import ca.bc.gov.health.plr.ejb.entity.PrsCtStatusClassCodes;
import ca.bc.gov.health.plr.ejb.entity.PrsCtStatusCodes;
import ca.bc.gov.health.plr.ejb.entity.PrsCtStatusReasonCodes;
import java.util.List;

import org.junit.Test;
import static org.junit.Assert.*;

/**
 *
 * @author Grant.Hodgins
 */
public class MaintainProviderServiceTest extends IntegrationSetup {

    public MaintainProviderServiceTest() {
    }


    /**
     * Test of saveProviderIdentifier method, of class MaintainProviderService.
     */
    @Test
    public void testSaveProviderIdentifier() {
        //TODO

    }

    @Test
    public void testGetDefaultStatusCode_isActive() {
        PrsCtStatusCodes defaultStatusCode = providerHelperService.getDefaultStatusCode();
        assertEquals("ACTIVE", defaultStatusCode.getCtlNameCode());
    }

    @Test
    public void testGetDefaultStatusReasonCode_isGoodStanding() {
        // 4268 is ACTIVE on WEBD9D.
        Long statusCodeId = 4268l;
        PrsCtStatusReasonCodes defaultStatusReasonCode = providerHelperService.getDefaultStatusReasonCode(statusCodeId);
        assertEquals("GS", defaultStatusReasonCode.getCtlNameCode());
    }

    @Test
    public void testGetDefaultStatusReasonCode_noDefault() {
        // 4272 is NULLIFIED on WEB9D.
        Long statusCodeId = 4272l;
        PrsCtStatusReasonCodes defaultStatusReasonCode = providerHelperService.getDefaultStatusReasonCode(statusCodeId);
        assertNull(defaultStatusReasonCode);
    }

    @Test
    public void testGetDefaultStatusClassCode_isLIC() {
        PrsCtStatusClassCodes defaultStatusClassCode = providerHelperService.getDefaultStatusClassCode();
        assertEquals("LIC", defaultStatusClassCode.getCtlNameCode());
    }

    @Test
    public void testFilterStatusReasonCodes_defaultStatusCode() {
        List<PrsCtStatusReasonCodes> reasonCodes = providerHelperService.filterStatusReasonCodes(providerHelperService.getDefaultStatusCode().getCtlId());
        assertNotNull(reasonCodes);
    }

    @Test
    public void testFilterStatusReasonCodes_nullStatusCode() {
        List<PrsCtStatusReasonCodes> reasonCodes = providerHelperService.filterStatusReasonCodes(null);
        assertTrue(reasonCodes.isEmpty());
    }

    @Test
    public void testFilterStatusReasonCodes_garbageStatusCode() {
        List<PrsCtStatusReasonCodes> reasonCodes = providerHelperService.filterStatusReasonCodes(99988l);
        assertTrue(reasonCodes.isEmpty());
    }
}
