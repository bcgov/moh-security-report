/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.plr.ejb.entity;

import javax.persistence.EntityListeners;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import ca.bc.gov.health.ejb.entitylistener.AuditListener;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.OrderBy;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

/**
 *
 * @author david.sharpe
 */
@Entity
@EntityListeners({AuditListener.class})

@Table(name = "PRS_PROVIDERS")
@SequenceGenerator(name="PRS_PROVIDERS_SEQ", sequenceName="PRS_PROVIDERS_SEQ", allocationSize=1)
@NamedQueries({
    @NamedQuery(name = "PrsProviders.findAll", query = "SELECT p FROM PrsProviders p"),
    @NamedQuery(name = "PrsProviders.findAllByActive", query = "SELECT p FROM PrsProviders p where p.activeFlag = :active"),
    @NamedQuery(name = "PrsProviders.findMatchingDemographicsCount", query = "SELECT COUNT(p) FROM PrsProviders p WHERE p.pauthId IN ( SELECT DISTINCT p.pauthId FROM PrsProviders p JOIN p.grsPersonNamesList n JOIN p.prsDemographicDetailsList d JOIN p.grsAddressesList a WHERE n.prsnSurnameTxt = :suranme AND n.prsnFirstGivenNameTxt = :firstName AND d.dateOfBirthDate = :dob AND d.genderCode = :genderCode AND upper(a.cityTxt) = upper(:cityTxt) AND a.addressTypeCode.ctlNameCode = :addressTypeCd AND a.cmnctnPrpsTypCd.ctlNameCode = :cmnctnPrpsTypCd AND n.nameTypeCode.ctlNameCode = :nameTypeCd AND a.endReasonCode is null AND a.activeFlag.ctlNameCode='Y' AND n.endReasonCode is null AND n.activeFlag.ctlNameCode='Y')"),
    @NamedQuery(name = "PrsProviders.findMatchingDemographics", query = "SELECT DISTINCT p FROM PrsProviders p JOIN p.grsPersonNamesList n JOIN p.prsDemographicDetailsList d JOIN p.grsAddressesList a WHERE p.hptCode.ctlNameCode != :role and n.prsnSurnameTxt = :suranme AND n.prsnFirstGivenNameTxt = :firstName AND d.dateOfBirthDate = :dob AND d.genderCode = :genderCode AND upper(a.cityTxt) = upper(:cityTxt) AND a.addressTypeCode.ctlNameCode = :addressTypeCd AND a.cmnctnPrpsTypCd.ctlNameCode = :cmnctnPrpsTypCd AND a.endReasonCode is null AND a.activeFlag.ctlNameCode='Y' AND n.nameTypeCode.ctlNameCode = :nameTypeCd AND n.endReasonCode is null AND n.activeFlag.ctlNameCode='Y' order by p.pauthId"),
    @NamedQuery(name = "PrsProviders.findMatchingOrgs", query = "SELECT p FROM PrsProviders p JOIN p.grsOrgNamesList n JOIN p.grsAddressesList a WHERE upper(n.orgnztnNameTxt) = upper(:orgName) AND upper(a.cityTxt) = upper(:cityTxt)"),
    @NamedQuery(name = "PrsProviders.findSurvivor", query = "SELECT distinct p FROM PrsProviders p JOIN p.grsRegistryIdentifiersList r "
            + "WHERE r.providerChid in(select reg.providerChid from GrsRegistryIdentifiers reg where reg.pauthPauthId.pauthId = :pauthId) "
            + "and r.endReasonCode = :ceased and p.hptCode.ctlNameCode = :hpt and p.pauthId != :pauthId"),
    @NamedQuery(name = "PrsProviders.findMatchingIdentifiers", query = "SELECT DISTINCT p FROM PrsProviders p JOIN p.grsIdentifiersList i WHERE i.identifierTypeCode = :identifierTypeCode AND i.providerChid = :providerChid order by p.pauthId"),
    @NamedQuery(name = "PrsProviders.findMatchingIdentifiersWithRole", query = "SELECT DISTINCT p FROM PrsProviders p JOIN p.grsIdentifiersList i WHERE p.hptCode.ctlNameCode = :role and i.identifierTypeCode.ctlNameCode = :identifierTypeCode AND i.providerChid = :providerChid order by p.pauthId")
})
public class PrsProviders implements Serializable {
    
    private static final long serialVersionUID = 1L;

    @JoinColumn(name = "HPT_CODE", referencedColumnName = "CTL_ID")
    @ManyToOne(optional = false)
    private PrsCtProviderRoleTypes hptCode;

    @JoinColumn(name = "JURISDICTION_CODE", referencedColumnName = "CTL_ID")
    @ManyToOne
    private PrsCtJurisdictions jurisdictionCode;

    @JoinColumn(name = "PARTY_TYPE_CODE", referencedColumnName = "CTL_ID")
    @ManyToOne(optional = false)
    private GrsCtPartyType partyTypeCode;

    @JoinColumn(name = "ASSERTION_FLAG", referencedColumnName = "CTL_ID")
    @ManyToOne
    private GrsCtBooleanTypes assertionFlag;

    @JoinColumn(name = "ACTIVE_FLAG", referencedColumnName = "CTL_ID")
    @ManyToOne
    private GrsCtBooleanTypes activeFlag;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "PRS_PROVIDERS_SEQ")
    @Column(name = "PAUTH_ID")
    private Long pauthId;

    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 240)
    @Column(name = "CATEGORY_CODE")
    private String categoryCode;

    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "INTERNAL_INTERNAL_CHID")
    private String internalInternalChid;

    @Size(max = 240)
    @Column(name = "USER_CHID")
    private String userChid;

    @Column(name = "CREATED_DTS")
    @Temporal(TemporalType.TIMESTAMP)
    private Date createdDts;

    @Column(name = "INVALIDATED_DTS")
    @Temporal(TemporalType.TIMESTAMP)
    private Date invalidatedDts;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthId")
    private List<DsrHlthServsDeliveryAreas> dsrHlthServsDeliveryAreasList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsProvRuRelns> prsProvRuRelnsList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsElectronicAddresses> grsElectronicAddressesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "healthAuthorityId")
    private List<DsrWorkLocationsStaging> dsrWorkLocationsStagingList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsRegistryIdentifiers> grsRegistryIdentifiersList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsInformationRoutes> prsInformationRoutesList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPautinRelnWithId")
    @OrderBy("createdDts DESC")
    private List<PrsProviderRelationships> prsProviderRelationshipsList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsProviderRelationships> prsProviderRelationshipsList1;

    @JoinColumn(name = "RU_RU_ID", referencedColumnName = "RU_ID")
    @ManyToOne(optional = false)
    private GrsRegistryUsers ruRuId;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsWorkLocations> prsWorkLocationsList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsNotes> prsNotesList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsOrgNames> grsOrgNamesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsProviderSubRoles> prsProviderSubRolesList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsProviderCredentials> prsProviderCredentialsList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsDisciplinaryActions> prsDisciplinaryActionsList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsProviderExpertises> prsProviderExpertisesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsDemographicDetails> prsDemographicDetailsList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsStatuses> prsStatusesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsConfidentialityIndicators> prsConfidentialityIndicatorsList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsTelephones> grsTelephonesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsAddresses> grsAddressesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<PrsConditions> prsConditionsList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsPersonNames> grsPersonNamesList = new ArrayList<>();

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pauthPauthId")
    @OrderBy("createdDts DESC")
    private List<GrsIdentifiers> grsIdentifiersList = new ArrayList<>();
    
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "prsProviders")
    private List<GrsDistribEvent> grsDistribEventList;

    public PrsProviders() {
    }

    public PrsProviders(Long pauthId) {
        this.pauthId = pauthId;
    }

    public Long getPauthId() {
        return pauthId;
    }

    public void setPauthId(Long pauthId) {
        this.pauthId = pauthId;
    }

    public String getCategoryCode() {
        return categoryCode;
    }

    public void setCategoryCode(String categoryCode) {
        this.categoryCode = categoryCode;
    }

    public String getInternalInternalChid() {
        return internalInternalChid;
    }

    public void setInternalInternalChid(String internalInternalChid) {
        this.internalInternalChid = internalInternalChid;
    }

    public String getUserChid() {
        return userChid;
    }

    public void setUserChid(String userChid) {
        this.userChid = userChid;
    }

    public Date getCreatedDts() {
        return createdDts;
    }

    public void setCreatedDts(Date createdDts) {
        this.createdDts = createdDts;
    }

    public Date getInvalidatedDts() {
        return invalidatedDts;
    }

    public void setInvalidatedDts(Date invalidatedDts) {
        this.invalidatedDts = invalidatedDts;
    }

    public List<DsrHlthServsDeliveryAreas> getDsrHlthServsDeliveryAreasList() {
        return dsrHlthServsDeliveryAreasList;
    }

    public void setDsrHlthServsDeliveryAreasList(List<DsrHlthServsDeliveryAreas> dsrHlthServsDeliveryAreasList) {
        this.dsrHlthServsDeliveryAreasList = dsrHlthServsDeliveryAreasList;
    }

    public List<PrsProvRuRelns> getPrsProvRuRelnsList() {
        return prsProvRuRelnsList;
    }

    public void setPrsProvRuRelnsList(List<PrsProvRuRelns> prsProvRuRelnsList) {
        this.prsProvRuRelnsList = prsProvRuRelnsList;
    }

    public List<GrsElectronicAddresses> getGrsElectronicAddressesList() {
        return grsElectronicAddressesList;
    }

    public void setGrsElectronicAddressesList(List<GrsElectronicAddresses> grsElectronicAddressesList) {
        this.grsElectronicAddressesList = grsElectronicAddressesList;
    }

    public List<DsrWorkLocationsStaging> getDsrWorkLocationsStagingList() {
        return dsrWorkLocationsStagingList;
    }

    public void setDsrWorkLocationsStagingList(List<DsrWorkLocationsStaging> dsrWorkLocationsStagingList) {
        this.dsrWorkLocationsStagingList = dsrWorkLocationsStagingList;
    }

    public List<GrsRegistryIdentifiers> getGrsRegistryIdentifiersList() {
        return grsRegistryIdentifiersList;
    }

    public void setGrsRegistryIdentifiersList(List<GrsRegistryIdentifiers> grsRegistryIdentifiersList) {
        this.grsRegistryIdentifiersList = grsRegistryIdentifiersList;
    }

    public List<PrsInformationRoutes> getPrsInformationRoutesList() {
        return prsInformationRoutesList;
    }

    public void setPrsInformationRoutesList(List<PrsInformationRoutes> prsInformationRoutesList) {
        this.prsInformationRoutesList = prsInformationRoutesList;
    }

    public List<PrsProviderRelationships> getPrsProviderRelationshipsList() {
        return prsProviderRelationshipsList;
    }

    public void setPrsProviderRelationshipsList(List<PrsProviderRelationships> prsProviderRelationshipsList) {
        this.prsProviderRelationshipsList = prsProviderRelationshipsList;
    }

    public List<PrsProviderRelationships> getPrsProviderRelationshipsList1() {
        return prsProviderRelationshipsList1;
    }

    public void setPrsProviderRelationshipsList1(List<PrsProviderRelationships> prsProviderRelationshipsList1) {
        this.prsProviderRelationshipsList1 = prsProviderRelationshipsList1;
    }

    public GrsRegistryUsers getRuRuId() {
        return ruRuId;
    }

    public void setRuRuId(GrsRegistryUsers ruRuId) {
        this.ruRuId = ruRuId;
    }

    public List<PrsWorkLocations> getPrsWorkLocationsList() {
        return prsWorkLocationsList;
    }

    public void setPrsWorkLocationsList(List<PrsWorkLocations> prsWorkLocationsList) {
        this.prsWorkLocationsList = prsWorkLocationsList;
    }

    public List<PrsNotes> getPrsNotesList() {
        return prsNotesList;
    }

    public void setPrsNotesList(List<PrsNotes> prsNotesList) {
        this.prsNotesList = prsNotesList;
    }

    public List<GrsOrgNames> getGrsOrgNamesList() {
        return grsOrgNamesList;
    }

    public void setGrsOrgNamesList(List<GrsOrgNames> grsOrgNamesList) {
        this.grsOrgNamesList = grsOrgNamesList;
    }

    public List<PrsProviderSubRoles> getPrsProviderSubRolesList() {
        return prsProviderSubRolesList;
    }

    public void setPrsProviderSubRolesList(List<PrsProviderSubRoles> prsProviderSubRolesList) {
        this.prsProviderSubRolesList = prsProviderSubRolesList;
    }

    public List<PrsProviderCredentials> getPrsProviderCredentialsList() {
        return prsProviderCredentialsList;
    }

    public void setPrsProviderCredentialsList(List<PrsProviderCredentials> prsProviderCredentialsList) {
        this.prsProviderCredentialsList = prsProviderCredentialsList;
    }

    public List<PrsDisciplinaryActions> getPrsDisciplinaryActionsList() {
        return prsDisciplinaryActionsList;
    }

    public void setPrsDisciplinaryActionsList(List<PrsDisciplinaryActions> prsDisciplinaryActionsList) {
        this.prsDisciplinaryActionsList = prsDisciplinaryActionsList;
    }

    public List<PrsProviderExpertises> getPrsProviderExpertisesList() {
        return prsProviderExpertisesList;
    }

    public void setPrsProviderExpertisesList(List<PrsProviderExpertises> prsProviderExpertisesList) {
        this.prsProviderExpertisesList = prsProviderExpertisesList;
    }

    public List<PrsDemographicDetails> getPrsDemographicDetailsList() {
        return prsDemographicDetailsList;
    }

    public void setPrsDemographicDetailsList(List<PrsDemographicDetails> prsDemographicDetailsList) {
        this.prsDemographicDetailsList = prsDemographicDetailsList;
    }

    public List<PrsStatuses> getPrsStatusesList() {
        return prsStatusesList;
    }

    public void setPrsStatusesList(List<PrsStatuses> prsStatusesList) {
        this.prsStatusesList = prsStatusesList;
    }

    public List<PrsConfidentialityIndicators> getPrsConfidentialityIndicatorsList() {
        return prsConfidentialityIndicatorsList;
    }

    public void setPrsConfidentialityIndicatorsList(List<PrsConfidentialityIndicators> prsConfidentialityIndicatorsList) {
        this.prsConfidentialityIndicatorsList = prsConfidentialityIndicatorsList;
    }

    public List<GrsTelephones> getGrsTelephonesList() {
        return grsTelephonesList;
    }

    public void setGrsTelephonesList(List<GrsTelephones> grsTelephonesList) {
        this.grsTelephonesList = grsTelephonesList;
    }

    public List<GrsAddresses> getGrsAddressesList() {
        return grsAddressesList;
    }

    public void setGrsAddressesList(List<GrsAddresses> grsAddressesList) {
        this.grsAddressesList = grsAddressesList;
    }

    public List<PrsConditions> getPrsConditionsList() {
        return prsConditionsList;
    }

    public void setPrsConditionsList(List<PrsConditions> prsConditionsList) {
        this.prsConditionsList = prsConditionsList;
    }

    public List<GrsPersonNames> getGrsPersonNamesList() {
        return grsPersonNamesList;
    }

    public void setGrsPersonNamesList(List<GrsPersonNames> grsPersonNamesList) {
        this.grsPersonNamesList = grsPersonNamesList;
    }

    public List<GrsIdentifiers> getGrsIdentifiersList() {
        return grsIdentifiersList;
    }

    public void setGrsIdentifiersList(List<GrsIdentifiers> grsIdentifiersList) {
        this.grsIdentifiersList = grsIdentifiersList;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (pauthId != null ? pauthId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof PrsProviders)) {
            return false;
        }
        PrsProviders other = (PrsProviders) object;
        if ((this.pauthId == null && other.pauthId != null) || (this.pauthId != null && !this.pauthId.equals(other.pauthId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "ca.bc.gov.health.plr.ejb.entity.PrsProviders[ pauthId=" + pauthId + " ]";
    }

    public PrsCtProviderRoleTypes getHptCode() {
        return hptCode;
    }

    public void setHptCode(PrsCtProviderRoleTypes hptCode) {
        this.hptCode = hptCode;
    }

    public PrsCtJurisdictions getJurisdictionCode() {
        return jurisdictionCode;
    }

    public void setJurisdictionCode(PrsCtJurisdictions jurisdictionCode) {
        this.jurisdictionCode = jurisdictionCode;
    }

    public GrsCtPartyType getPartyTypeCode() {
        return partyTypeCode;
    }

    public void setPartyTypeCode(GrsCtPartyType partyTypeCode) {
        this.partyTypeCode = partyTypeCode;
    }

    public GrsCtBooleanTypes getAssertionFlag() {
        return assertionFlag;
    }

    public void setAssertionFlag(GrsCtBooleanTypes assertionFlag) {
        this.assertionFlag = assertionFlag;
    }

    public GrsCtBooleanTypes getActiveFlag() {
        return activeFlag;
    }

    public void setActiveFlag(GrsCtBooleanTypes activeFlag) {
        this.activeFlag = activeFlag;
    }

    public List<GrsDistribEvent> getGrsDistribEventList() {
        return grsDistribEventList;
    }

    public void setGrsDistribEventList(List<GrsDistribEvent> grsDistribEventList) {
        this.grsDistribEventList = grsDistribEventList;
    }

}
