package ca.bc.gov.health.dsr.web;

import ca.bc.gov.health.dsr.ejb.session.DsrCtOwnerOperatorTypesFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrCtStatusFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrDeliverySiteIdentifierFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrHealthDeliveryServicesAreaFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrLocalHealthAreaFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrProgramAreaFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrProgramCategoryFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrProgramCategoryStagingFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrSiteProgramCategoryFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrSourceSystemFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.DsrWorkLocationStagingFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.GrsAddressFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.GrsElectronicAddressFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.GrsOrgNameFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.GrsPartyFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.GrsRegistryUserFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.GrsTelephoneFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsCtCountriesFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsCtProvStateFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsCtStatusCodesFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsCtWorkLocationPurpsFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsInformationRouteFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsProviderFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsWorkLocationDetailFacadeLocal;
import ca.bc.gov.health.dsr.ejb.session.PrsWorkLocationFacadeLocal;
import ca.bc.gov.health.jsf.SelectItemHelper;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.model.SelectItem;

@ApplicationScoped
@ManagedBean(name = "DsrDroplists")
public class Droplists {

    @EJB
    private DsrDeliverySiteIdentifierFacadeLocal DsrDeliverySiteIdentifiersFacade;
    @EJB
    private DsrProgramAreaFacadeLocal DsrProgramAreasFacade;
    @EJB
    private DsrProgramCategoryFacadeLocal DsrProgramCategoriesFacade;
    @EJB
    private DsrProgramCategoryStagingFacadeLocal DsrProgramCategoryStagingFacade;
    @EJB
    private DsrSiteProgramCategoryFacadeLocal DsrSiteProgramCategoriesFacade;
    @EJB
    private DsrSourceSystemFacadeLocal DsrSourceSystemsFacade;
    @EJB
    private DsrWorkLocationStagingFacadeLocal DsrWorkLocationsStagingFacade;
    @EJB
    private GrsAddressFacadeLocal GrsAddressesFacade;
    
    @EJB
    private PrsCtProvStateFacadeLocal PrsCtProvStateFacade;
    
    @EJB
    private PrsCtCountriesFacadeLocal PrsCtCountriesFacade;
    
    @EJB
    private DsrCtOwnerOperatorTypesFacadeLocal DsrCtOwnerOperatorTypesFacade;
    
    @EJB
    private DsrCtStatusFacadeLocal dsrCtStatusFacade;
    @EJB
    private GrsElectronicAddressFacadeLocal GrsElectronicAddressesFacade;
    @EJB
    private GrsOrgNameFacadeLocal GrsOrgNamesFacade;
    @EJB
    private GrsPartyFacadeLocal GrsPartiesFacade;
    @EJB
    private GrsRegistryUserFacadeLocal GrsRegistryUsersFacade;
    @EJB
    private GrsTelephoneFacadeLocal GrsTelephonesFacade;
    @EJB
    private PrsInformationRouteFacadeLocal PrsInformationRoutesFacade;
    @EJB
    private PrsProviderFacadeLocal PrsProvidersFacade;
    @EJB
    private PrsWorkLocationDetailFacadeLocal PrsWorkLocationDetailsFacade;
    @EJB
    private PrsWorkLocationFacadeLocal PrsWorkLocationsFacade;
    @EJB
    private DsrHealthDeliveryServicesAreaFacadeLocal dsrHealthDeliveryServicesAreaFacade;
    @EJB
    private DsrLocalHealthAreaFacadeLocal dsrLocalHealthAreaFacade;
    @EJB
    private PrsCtWorkLocationPurpsFacadeLocal prsCtWorkLocationPurpsFacade;

    private List<SelectItem> grsCountries;
    private List<SelectItem> GrsOwnerOperators;
    private List<SelectItem> GrsLegalOperators;
    private List<SelectItem> PrsOrgNames;
    
    private List<SelectItem> grsLocationTypes;
    private List<SelectItem> GrsStatuses;

    @PostConstruct
    public void init() {
        grsCountries = SelectItemHelper.buildSelectItemList(PrsCtCountriesFacade.findAll(), "ctlDescTxt", "ctlId");

        GrsOwnerOperators = SelectItemHelper.buildSelectItemList(DsrCtOwnerOperatorTypesFacade.findAll(), "ctlDescTxt", "ctlId");
        GrsLegalOperators = GrsOwnerOperators;
        //SelectItemHelper.buildSelectItemList(GrsCtLeafFacade.findAllLegalOperators(), "ctlDescTxt", "ctlId");
        PrsOrgNames = SelectItemHelper.buildSelectItemList(PrsProvidersFacade.findAllProviderOrgNames(), "label", "value");      
        grsLocationTypes = SelectItemHelper.buildSelectItemList(prsCtWorkLocationPurpsFacade.findLocationTypes("CC", "HOSP"), "ctlDescTxt", "ctlId");
                //SelectItemHelper.buildSelectItemList(GrsCtLeafFacade.findLocationTypes("Community Care", "Hospital"), "ctlDescTxt", "ctlId");
        GrsStatuses = SelectItemHelper.buildSelectItemList(dsrCtStatusFacade.findAll(), "ctlDescTxt", "ctlId");
                
    }

    public List<SelectItem> getDsrDeliverySiteIdentifiers() {
        return SelectItemHelper.buildSelectItemList(DsrDeliverySiteIdentifiersFacade.findAll(), "activeYn", "deliverySiteIdentifierId");
    }

    public List<SelectItem> getDsrProgramAreas() {
        return SelectItemHelper.buildSelectItemList(DsrProgramAreasFacade.findAllActive(), "programAreaDsc", "programAreaCd");    
    }

    public List<SelectItem> getDsrProgramCategories() {
        return SelectItemHelper.buildSelectItemList(DsrProgramCategoriesFacade.findAllActive(), new String[]{"programCategoryCd", "programCategoryDsc"}, " - ", "programCategoryCd");
    }

    public List<SelectItem> getDsrSourceSystems() {
        return SelectItemHelper.buildSelectItemList(DsrSourceSystemsFacade.findAll(), "sourceSystemDsc", "sourceSystemCd");
    }

    public List<SelectItem> getDsrWorkLocationsStagings() {
        return SelectItemHelper.buildSelectItemList(DsrWorkLocationsStagingFacade.findAll(), "addressLine1Txt", "workLocationsStagingId");
    }

    public List<SelectItem> getGrsAddressess() {
        return SelectItemHelper.buildSelectItemList(GrsAddressesFacade.findAll(), "cmnctnPrpsTypCd", "addrId");
    }

//    public List<SelectItem> getGrsCtLeafs() {
//        return SelectItemHelper.buildSelectItemList(GrsCtLeafFacade.findAll(), "cttCttNameCode", "ctlId");
//    }
//
//    public List<SelectItem> getGrsCtLeafSupps() {
//        return SelectItemHelper.buildSelectItemList(GrsCtLeafSuppFacade.findAll(), "ctlCtlNameCode", "ctlsId");
//    }
//
//    public List<SelectItem> getGrsCtTables() {
//        return SelectItemHelper.buildSelectItemList(GrsCtTablesFacade.findAll(), "cttNameCode", "cttId");
//    }

    public List<SelectItem> getGrsElectronicAddressess() {
        return SelectItemHelper.buildSelectItemList(GrsElectronicAddressesFacade.findAll(), "cmnctnPrpsTypCd", "eaddrId");
    }

    public List<SelectItem> getGrsOrgNames() {
        return SelectItemHelper.buildSelectItemList(GrsOrgNamesFacade.findAll(), "nameTypeCode", "nmId");
    }

    public List<SelectItem> getGrsParties() {
        return SelectItemHelper.buildSelectItemList(GrsPartiesFacade.findAll(), "partyTypeCode", "partyId");
    }

    public List<SelectItem> getGrsRegistryUsers() {
        return SelectItemHelper.buildSelectItemList(GrsRegistryUsersFacade.findAll(), "ruTypeCode", "ruId");
    }

    public List<SelectItem> getGrsTelephones() {
        return SelectItemHelper.buildSelectItemList(GrsTelephonesFacade.findAll(), "cmnctnPrpsTypCd", "phonId");
    }

    public List<SelectItem> getPrsInformationRoutes() {
        return SelectItemHelper.buildSelectItemList(PrsInformationRoutesFacade.findAll(), "defaultFlag", "irtId");
    }

    public List<SelectItem> getPrsProviderss() {
        return SelectItemHelper.buildSelectItemList(PrsProvidersFacade.findAll(), "jurisdictionCode", "pauthId");
    }

    public List<SelectItem> getPrsWorkLocationDetails() {
        return SelectItemHelper.buildSelectItemList(PrsWorkLocationDetailsFacade.findAll(), "workLocationNameTxt", "wldId");
    }

    public List<SelectItem> getPrsWorkLocations() {
        return SelectItemHelper.buildSelectItemList(PrsWorkLocationsFacade.findAll(), "workLocationChid", "wlId");
    }

    public List<SelectItem> getGrsCountries() {
        return grsCountries;
    }

    public List<SelectItem> getGrsOwnerOperators() {
        return GrsOwnerOperators;
    }

    public List<SelectItem> getGrsLegalOperators() {
        return GrsLegalOperators;
    }

    public List<SelectItem> getPrsOrgNames() {
        return PrsOrgNames;
    }
    
    public List<SelectItem> getGrsLocationTypes() {
        return grsLocationTypes;
    }

    public List<SelectItem> getAllProvincesInCountry(String countryCode) {
        return SelectItemHelper.buildSelectItemList(PrsCtProvStateFacade.findAllProvincesInCountry(countryCode), "ctlDescTxt", "ctlId");
        
        
    }

    public List<SelectItem> getProviderOrgNames() {
        return SelectItemHelper.buildSelectItemList(PrsProvidersFacade.findAllProviderOrgNames(), "label", "value");
    }

    public List<SelectItem> getAllRecordStatus() {
        return SelectItemHelper.buildSelectItemList(dsrCtStatusFacade.findAll(), "ctlDescTxt", "ctlId");
    }

    public List<SelectItem> getAllCategoriesForArea(String area) {
        return SelectItemHelper.buildSelectItemList(DsrProgramAreasFacade.findAllActiveCategoriesForArea(area), "label", "value");
    }
    
    public List<SelectItem> getAllCategoriesWithCodeForArea(String area) {
        return SelectItemHelper.buildSelectItemList(DsrProgramAreasFacade.findAllActiveCategoriesForArea(area), new String[]{"value", "label"}, " - ", "value");
    }
    
    public List<SelectItem> getAllHsdaForHealthAuthority(Long healthAuthorityId) {
        return SelectItemHelper.buildSelectItemList(dsrHealthDeliveryServicesAreaFacade.getAllHsdaForHealthAuthority(healthAuthorityId), "label", "value");
    }
    
    public List<SelectItem> getAllLocalHealthAreaForHsda(String[] hsdaCode) {
        return SelectItemHelper.buildSelectItemList(dsrLocalHealthAreaFacade.getAllLocalHealthAreaForHsda(hsdaCode), "label", "value");
    }
    
    public List<SelectItem> getAllActiveLocalHealthArea() {
        return SelectItemHelper.buildSelectItemList(dsrLocalHealthAreaFacade.findAllActive(), new String[]{"localHealthAreaCd", "localHealthAreaDsc"}, " - ", "localHealthAreaCd");
    }
    
    public List<SelectItem> getAllActiveHsda() {
        return SelectItemHelper.buildSelectItemList(dsrHealthDeliveryServicesAreaFacade.findAllActive(), new String[]{"serviceDeliveryAreaCd", "serviceDeliveryAreaDsc"}, " - ", "serviceDeliveryAreaCd");
    }

    public List<SelectItem> getGrsActiveInactiveStatuses() {
        List<SelectItem> mergedStatusRemoved = new  ArrayList<>();
        
        for (SelectItem t : GrsStatuses) {
            
            if (t.getLabel().equals("Merged")) {
                continue;
            }
            
            mergedStatusRemoved.add(t);
        }
        
        return mergedStatusRemoved;
    }

    public void setGrsActiveInactiveStatuses(List<SelectItem> GrsActiveInactiveStatuses) {
        this.GrsStatuses = GrsActiveInactiveStatuses;
    }
    
    
}
