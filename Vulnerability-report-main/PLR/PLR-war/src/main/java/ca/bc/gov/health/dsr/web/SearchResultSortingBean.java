/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.dsr.web;

import ca.bc.gov.health.plr.ejb.entity.DsrDeliverySiteIdentifiers;
import ca.bc.gov.health.plr.ejb.entity.PrsWorkLocations;
import java.io.Serializable;
import java.util.Comparator;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
//import org.richfaces.component.SortOrder;

/**
 *
 * @author adebiyi.kuseju
 */
@ManagedBean(name = "SearchResultSortingBean")
@ViewScoped
public class SearchResultSortingBean implements Serializable {

//    private SortOrder dsIdOrder = SortOrder.unsorted;
//    private SortOrder statusOrder = SortOrder.unsorted;
//    private SortOrder siteNameOrder = SortOrder.unsorted;
//    private SortOrder addressOrder = SortOrder.unsorted;
//    private SortOrder programAreaOrder = SortOrder.unsorted;
//    private SortOrder providerOrgOrder = SortOrder.unsorted;

//    public void sortByDsID() {
//        statusOrder = SortOrder.unsorted;
//        siteNameOrder = SortOrder.unsorted;
//        addressOrder = SortOrder.unsorted;
//        programAreaOrder = SortOrder.unsorted;
//        providerOrgOrder = SortOrder.unsorted;
//
//        if (dsIdOrder.equals(SortOrder.ascending)) {
//            setDsIdOrder(SortOrder.descending);
//        } else {
//            setDsIdOrder(SortOrder.ascending);
//        }
//    }
//
//    public void sortByStatus() {
//
//        dsIdOrder = SortOrder.unsorted;
//        siteNameOrder = SortOrder.unsorted;
//        addressOrder = SortOrder.unsorted;
//        programAreaOrder = SortOrder.unsorted;
//        providerOrgOrder = SortOrder.unsorted;
//
//        if (statusOrder.equals(SortOrder.ascending)) {
//            setStatusOrder(SortOrder.descending);
//        } else {
//            setStatusOrder(SortOrder.ascending);
//        }
//    }
//
//    public void sortBySiteName() {
//
//        dsIdOrder = SortOrder.unsorted;
//        statusOrder = SortOrder.unsorted;
//        addressOrder = SortOrder.unsorted;
//        programAreaOrder = SortOrder.unsorted;
//        providerOrgOrder = SortOrder.unsorted;
//
//        if (siteNameOrder.equals(SortOrder.ascending)) {
//            setSiteNameOrder(SortOrder.descending);
//        } else {
//            setSiteNameOrder(SortOrder.ascending);
//        }
//    }
//
//    public void sortByAddress() {
//
//        dsIdOrder = SortOrder.unsorted;
//        statusOrder = SortOrder.unsorted;
//        siteNameOrder = SortOrder.unsorted;
//        programAreaOrder = SortOrder.unsorted;
//        providerOrgOrder = SortOrder.unsorted;
//
//        if (addressOrder.equals(SortOrder.ascending)) {
//            setAddressOrder(SortOrder.descending);
//        } else {
//            setAddressOrder(SortOrder.ascending);
//        }
//    }
//
//    public void sortByProgramArea() {
//
//        dsIdOrder = SortOrder.unsorted;
//        statusOrder = SortOrder.unsorted;
//        siteNameOrder = SortOrder.unsorted;
//        addressOrder = SortOrder.unsorted;
//        providerOrgOrder = SortOrder.unsorted;
//
//        if (programAreaOrder.equals(SortOrder.ascending)) {
//            setProgramAreaOrder(SortOrder.descending);
//        } else {
//            setProgramAreaOrder(SortOrder.ascending);
//        }
//    }
//
//    public void sortByProviderOrg() {
//
//        dsIdOrder = SortOrder.unsorted;
//        statusOrder = SortOrder.unsorted;
//        siteNameOrder = SortOrder.unsorted;
//        addressOrder = SortOrder.unsorted;
//        programAreaOrder = SortOrder.unsorted;
//
//        if (providerOrgOrder.equals(SortOrder.ascending)) {
//            setProviderOrgOrder(SortOrder.descending);
//        } else {
//            setProviderOrgOrder(SortOrder.ascending);
//        }
//    }

    public Comparator<PrsWorkLocations> getDsIdComparator() {
        return new Comparator<PrsWorkLocations>() {
            @Override
            public int compare(PrsWorkLocations first, PrsWorkLocations second) {

                boolean isFirstMerged = true;
                boolean isSecondMerged = true;
                List<DsrDeliverySiteIdentifiers> ids = first.getDsrDeliverySiteIdentifiersList();

                for (DsrDeliverySiteIdentifiers d : ids) {
                    if (d.getActiveYn().equalsIgnoreCase("Y")) {
                        isFirstMerged = false;
                    }
                }

                ids = second.getDsrDeliverySiteIdentifiersList();
                for (DsrDeliverySiteIdentifiers d : ids) {
                    if (d.getActiveYn().equalsIgnoreCase("Y")) {
                        isSecondMerged = false;
                    }
                }

                // if one or both are have merged status the  execute block
                if ((isFirstMerged != isSecondMerged) || (isFirstMerged && isSecondMerged)) {
                    if (isFirstMerged == isSecondMerged) {
                        return 0;
                    } else if (isFirstMerged) {
                        return -1;
                    } else {
                        return 1;
                    }
                }
                
                // Both records are active
                return first.getDsrDeliverySiteIdentifiersList().get(0).getIdentifierNo().compareTo(second.getDsrDeliverySiteIdentifiersList().get(0).getIdentifierNo());

            }
        };
    }

//    public SortOrder getDsIdOrder() {
//        return dsIdOrder;
//    }
//
//    public void setDsIdOrder(SortOrder dsIdOrder) {
//        this.dsIdOrder = dsIdOrder;
//    }
//
//    public SortOrder getStatusOrder() {
//        return statusOrder;
//    }
//
//    public void setStatusOrder(SortOrder statusOrder) {
//        this.statusOrder = statusOrder;
//    }
//
//    public SortOrder getSiteNameOrder() {
//        return siteNameOrder;
//    }
//
//    public void setSiteNameOrder(SortOrder siteNameOrder) {
//        this.siteNameOrder = siteNameOrder;
//    }
//
//    public SortOrder getAddressOrder() {
//        return addressOrder;
//    }
//
//    public void setAddressOrder(SortOrder addressOrder) {
//        this.addressOrder = addressOrder;
//    }
//
//    public SortOrder getProgramAreaOrder() {
//        return programAreaOrder;
//    }
//
//    public void setProgramAreaOrder(SortOrder programAreaOrder) {
//        this.programAreaOrder = programAreaOrder;
//    }
//
//    public SortOrder getProviderOrgOrder() {
//        return providerOrgOrder;
//    }
//
//    public void setProviderOrgOrder(SortOrder providerOrgOrder) {
//        this.providerOrgOrder = providerOrgOrder;
//    }
}
