package ca.bc.gov.health.dsr.web;
import ca.bc.gov.health.plr.ejb.entity.*;
import ca.bc.gov.health.dsr.ejb.session.*;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import javax.faces.bean.ViewScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.context.Flash;

/**
 * Backing bean for editing GrsElectronicAddressess
 * @author JSF Code Generator
 */
@ManagedBean(name="MaintainGrsElectronicAddresses")
@ViewScoped
public class MaintainGrsElectronicAddresses implements java.io.Serializable{
    /* EJB to handle persistence */
    @EJB
    private GrsElectronicAddressFacadeLocal grsElectronicAddressesFacade;


    /* EJB for dealing with PrsWorkLocations instances */
    @EJB
    private PrsWorkLocationFacadeLocal prsWorkLocationsFacade;

    /* EJB for dealing with PrsProviders instances */
    @EJB
    private PrsProviderFacadeLocal prsProvidersFacade;

    /* EJB for dealing with GrsRegistryUsers instances */
    @EJB
    private GrsRegistryUserFacadeLocal grsRegistryUsersFacade;
    /* Instace we're currently editing */
    private GrsElectronicAddresses grsElectronicAddresses;

    /* Flash scope to handle passing parameters from other views */
    @ManagedProperty("#{flash}")
    private Flash flash;

    /**
     * Default Constructor
     */
    public MaintainGrsElectronicAddresses(){}

    /**
     * Initializes this bean
     */
    @PostConstruct
    public void init(){
        grsElectronicAddresses = new GrsElectronicAddresses();
        if (flash.get("selectedKey")!=null){
            grsElectronicAddresses = grsElectronicAddressesFacade.find(flash.get("selectedKey"));
        }
        if (flash.get("wlWlId")!=null){
            grsElectronicAddresses.setWlWlId(prsWorkLocationsFacade.find(flash.get("wlWlId")));
        }
        if(grsElectronicAddresses.getWlWlId()==null){
            grsElectronicAddresses.setWlWlId(new PrsWorkLocations());
        }
        if (flash.get("pauthPauthId")!=null){
            grsElectronicAddresses.setPauthPauthId(prsProvidersFacade.find(flash.get("pauthPauthId")));
        }
        if(grsElectronicAddresses.getPauthPauthId()==null){
            grsElectronicAddresses.setPauthPauthId(new PrsProviders());
        }
        if (flash.get("ruRuId")!=null){
            grsElectronicAddresses.setRuRuId(grsRegistryUsersFacade.find(flash.get("ruRuId")));
        }
        if(grsElectronicAddresses.getRuRuId()==null){
            grsElectronicAddresses.setRuRuId(new GrsRegistryUsers());
        }
    }

    /**
     * Selects a record to update
     */
    public String select(){
         flash.keep("selectedKey");
        return "MaintainGrsElectronicAddresses.xhtml";
    }
    /**
     * Adds a new record
     */
    public String add(){
        nullify();
        grsElectronicAddressesFacade.create(grsElectronicAddresses);
        addPlaceholders();
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Add Successful", "Add Successful"));
        return null;
    }

    /**
     * Updates an existing record
     */
    public String update(){
        nullify();
        grsElectronicAddressesFacade.edit(grsElectronicAddresses);
        addPlaceholders();
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Update Successful", "Update Successful"));
        return null;
    }

    /**
     * Deletes a record
     */
    public String delete(){
        nullify();
        grsElectronicAddressesFacade.remove(grsElectronicAddresses);
        return clear();
    }

    /**
     * Clears the form
     */
    public String clear(){
        grsElectronicAddresses = new GrsElectronicAddresses();
        addPlaceholders();
        return "MaintainGrsElectronicAddresses.xhtml";
    }
    /**
     * Nullifys any child objects which don't have valid PKs set
     */
    private void nullify(){
        if (grsElectronicAddresses.getWlWlId()!=null && grsElectronicAddresses.getWlWlId().getWlId()==null){
            grsElectronicAddresses.setWlWlId(null);
        }
        if (grsElectronicAddresses.getPauthPauthId()!=null && grsElectronicAddresses.getPauthPauthId().getPauthId()==null){
            grsElectronicAddresses.setPauthPauthId(null);
        }
        if (grsElectronicAddresses.getRuRuId()!=null && grsElectronicAddresses.getRuRuId().getRuId()==null){
            grsElectronicAddresses.setRuRuId(null);
        }
    }
    /**
     * Defaults parent objects which don't have valid PKs set
     */
    private void addPlaceholders(){
        if (grsElectronicAddresses.getWlWlId()==null){
            grsElectronicAddresses.setWlWlId(new PrsWorkLocations());
        }
        if (grsElectronicAddresses.getPauthPauthId()==null){
            grsElectronicAddresses.setPauthPauthId(new PrsProviders());
        }
        if (grsElectronicAddresses.getRuRuId()==null){
            grsElectronicAddresses.setRuRuId(new GrsRegistryUsers());
        }
    }
    /* Getters and Setters */
    public GrsElectronicAddresses getGrsElectronicAddresses(){
        return grsElectronicAddresses;
    }
    public void setGrsElectronicAddresses(GrsElectronicAddresses grsElectronicAddresses){
        this.grsElectronicAddresses = grsElectronicAddresses;
    }
    public Flash getFlash(){
        return flash;
    }
    public void setFlash(Flash flash){
        this.flash = flash;
    }
}