/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.plr.web.listener;

import ca.bc.gov.health.plr.ejb.session.PrsPermissionsMapFacade;
import javax.ejb.EJB;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

/**
 * Listener to do any activities on application start/stop.
 * Currently the purpose is to clear the permissions cache.
 * 
 * @author sumesh.kariyil
 */
public class ApplicationContextListener implements ServletContextListener{
    
    @EJB
    private PrsPermissionsMapFacade permissionsMapFacade;
    
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        // Clear the permissions cache (PRS_PERMISSIONS_MAP) table
        // ideally it should be inside contextDestroyed, 
        // but if the server is terminated then contextDestroyed will not be invoked, hence giving it here
      //  permissionsMapFacade.clearAll();
    }
    @Override
    public void contextDestroyed(ServletContextEvent sce) {        
    }
    
}
