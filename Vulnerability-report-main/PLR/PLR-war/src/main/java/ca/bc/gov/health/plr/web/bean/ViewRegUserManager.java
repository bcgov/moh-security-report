package ca.bc.gov.health.plr.web.bean;

import ca.bc.gov.health.plr.dto.reguser.RegistryUserDetails;
import ca.bc.gov.health.plr.service.registry.user.RegistryUserService;
import java.io.Serializable;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;

/**
 * Backing bean for Viewing the Registry User Details
 * View Name : RegUserDetails.xhtml.
 *
 * @author Sumesh.Kariyil
 */
@ManagedBean
@ViewScoped
public class ViewRegUserManager extends PlrManagedBean implements Serializable {
    
    private static final String CLASSNAME = ViewRegUserManager.class.getSimpleName();
    private static final Logger LOG = Logger.getLogger(CLASSNAME);
    
    @EJB
    private RegistryUserService searchRegistryUserService;
    
    private RegistryUserDetails registryUserDetails;
    
    private Long ruId;
    
    /**
     * Initialize the backing transfer objects.
     */
    @PostConstruct
    public void init() {
        LOG.log(Level.INFO, "ViewRegUserManager init verifying resources");
    }
    
    /**
     * View the details for a provider. The provider pauth_id is populated based
     * on a HTTP request parameter.
     */
    public void viewDetails() {
        if (!FacesContext.getCurrentInstance().getPartialViewContext().isAjaxRequest()
                && getRuId() != null && getRuId() > 0) {
            registryUserDetails = searchRegistryUserService.searchByRuId(getRuId());
        }
    }
    
    public Long getRuId() {
        return ruId;
    }

    public RegistryUserDetails getRegistryUserDetails() {
        return registryUserDetails;
    }

    public void setRegistryUserDetails(RegistryUserDetails registryUserDetails) {
        this.registryUserDetails = registryUserDetails;
    }

    public void setRuId(Long ruId) {
        this.ruId = ruId;
    }

}
