<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/gov21Template.xhtml"
                xmlns:custom="http://java.sun.com/jsf/composite/custom">
    <ui:define name="title">Add Registry User</ui:define>
    <ui:define name="body">
        <style>
            table td {
                border: none;
            }
        </style>

        <h2>Add Registry User</h2>
        <hr/>
		
        <p:messages id="messages" showDetail="false" closable="true" >
			<p:autoUpdate disabled="false"/>
		</p:messages>
		
        <h:form id="form" style="padding-top: 30px">            
            <p:wizard>
                <p:tab id="address" title="Name/Organization">
                    <p:panel>
                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Registry User ID:"/>
                            <ui:param name="for" value="regUserId"/>
                        </ui:include>
                        <p:inputText value="#{addRegistryUserManager.dto.activePartyDto.regUserId}" id="regUserId" required="true" styleClass="zeroMargin"
                                     validator="#{addRegistryUserManager.validateParty}">                            
                        </p:inputText>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Registry User Type:"/>
                            <ui:param name="for" value="registryUserType"/>
                        </ui:include>
                        <p:selectOneMenu id="registryUserType" value="#{addRegistryUserManager.dto.regUserTypeId}" required="true">
                            <f:selectItems value="#{Droplists.grsCtRegUserTypes}"  />
                        </p:selectOneMenu>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Contact Details:"/>
                            <ui:param name="for" value="contactDetails"/>
                        </ui:include>
                        <p:inputTextarea id="contactDetails" value="#{addRegistryUserManager.dto.partyDetailsDto.contactDetails}"/>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Agreement ID:"/>
                            <ui:param name="for" value="agreementId"/>
                        </ui:include>
                        <p:inputText id="agreementId" value="#{addRegistryUserManager.dto.partyDetailsDto.agreement}" styleClass="zeroMargin" />

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Name Type *"/>
                            <ui:param name="for" value="nametype"/>
                        </ui:include>
                        <p:outputLabel id="nametype" value="#{addRegistryUserManager.dto.activeOrgNameDto.typeCode} - "/>
                        #{addRegistryUserManager.dto.activeOrgNameDto.type}

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Name:"/>
                            <ui:param name="for" value="orgName"/>
                        </ui:include>
                        <p:inputText id="orgName" value="#{addRegistryUserManager.dto.activeOrgNameDto.name}" required="true" styleClass="zeroMargin"
                                     validator="#{addRegistryUserManager.validateOrg}"/>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Long Name:"/>
                            <ui:param name="for" value="orgLongName"/>
                        </ui:include>
                        <p:inputText id="orgLongName" value="#{addRegistryUserManager.dto.activeOrgNameDto.longName}" styleClass="zeroMargin"/>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Effective From:"/>
                            <ui:param name="for" value="effectiveFromDate_orgName"/>
                        </ui:include>
                        <p:calendar id="effectiveFromDate_orgName" value="#{addRegistryUserManager.dto.effectiveStartDate}" required="true" showOn="button" navigator="true" size="11" title="#{consts['default.date.title']}" />
                        <p:watermark value="1980-06-30" for="effectiveFromDate_orgName"/>
                    </p:panel>

                </p:tab>

                <p:tab id="contact" title="Address">                                        

                    <p:panel id="addressPanel">                        
                        <p:outputLabel value="Add Entry:" />
                        <h:selectOneRadio id="phoneBlockRadio" value="#{addRegistryUserManager.addressFieldsRequired}">
                            <f:selectItem itemLabel="No" itemValue="#{false}"/>
                            <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                            <p:ajax listener="#{addRegistryUserManager.resetAddress()}" update="addressPanel"/>
                        </h:selectOneRadio>


                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Address Type:"/>
                            <ui:param name="for" value="addressType"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:selectOneMenu value="#{addRegistryUserManager.dto.activeAddressDto.typeId}" id="addressType" 
                                         required="#{addRegistryUserManager.addressFieldsRequired}" 
                                         disabled="#{not addRegistryUserManager.addressFieldsRequired}">
                            <f:selectItems value="#{Droplists.prsCtAddressTypes}"/> 
                        </p:selectOneMenu>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Purpose:"/>
                            <ui:param name="for" value="addressPurpose"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:selectOneMenu value="#{addRegistryUserManager.dto.activeAddressDto.communicationPurposeId}" id="addressPurpose" 
                                         required="#{addRegistryUserManager.addressFieldsRequired}" 
                                         disabled="#{not addRegistryUserManager.addressFieldsRequired}">
                            <f:selectItems value="#{Droplists.prsCtCommunPurposeTypesFilterByEc}"/>
                        </p:selectOneMenu>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Address Line 1:"/>
                            <ui:param name="for" value="addressLine1"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:inputText value="#{addRegistryUserManager.dto.activeAddressDto.addressLineOne}" id="addressLine1" 
                                     required="#{addRegistryUserManager.addressFieldsRequired}" 
                                     disabled="#{not addRegistryUserManager.addressFieldsRequired}" 
                                     styleClass="zeroMargin"/>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Address Line 2:"/>
                            <ui:param name="for" value="addressLine2"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:inputText value="#{addRegistryUserManager.dto.activeAddressDto.addressLineTwo}" id="addressLine2" styleClass="zeroMargin" disabled="#{not addRegistryUserManager.addressFieldsRequired}"/>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Address Line 3:"/>
                            <ui:param name="for" value="addressLine3"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:inputText value="#{addRegistryUserManager.dto.activeAddressDto.addressLineThree}" id="addressLine3" styleClass="zeroMargin" disabled="#{not addRegistryUserManager.addressFieldsRequired}"/>



                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="City:"/>
                            <ui:param name="for" value="city"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:autoComplete id="city" 
                                        value="#{addRegistryUserManager.dto.activeAddressDto.city}" 
                                        required="#{addRegistryUserManager.addressFieldsRequired}"
                                        disabled="#{not addRegistryUserManager.addressFieldsRequired}"
                                        completeMethod="#{addressSupportManager.suggestCityName}" 
                                        effect="fade">    
                        </p:autoComplete>

                        <p:fragment id="province_fragment">
                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Province / State:"/>
                                <ui:param name="for" value="province_address"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                            </ui:include>
                            <p:inputText id="province_address"
                                         value="#{addRegistryUserManager.dto.activeAddressDto.provinceOrStateTxt}"
                                         required="#{addRegistryUserManager.addressFieldsRequired}"
                                         disabled="#{not addRegistryUserManager.addressFieldsRequired}"
                                         rendered="#{!addressSupportManager.showProvinceDropDown(addRegistryUserManager.dto.activeAddressDto.countryId)}"/>
                            <p:selectOneMenu id="province_drop" value="#{addRegistryUserManager.dto.activeAddressDto.provinceOrStateTxt}" 
                                             required="#{addRegistryUserManager.addressFieldsRequired}"
                                             rendered="#{addressSupportManager.showProvinceDropDown(addRegistryUserManager.dto.activeAddressDto.countryId)}">
                                <f:selectItems value="#{addressSupportManager.addressProvinceSelectItems}"/>
                            </p:selectOneMenu>
                        </p:fragment>
                        
                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Country:"/>
                            <ui:param name="for" value="country"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:selectOneMenu id="country" value="#{addRegistryUserManager.dto.activeAddressDto.countryId}" required="#{addRegistryUserManager.addressFieldsRequired}" disabled="#{not addRegistryUserManager.addressFieldsRequired}">
                            <f:selectItems value="#{addressSupportManager.countrySelectItemsOrderedByName}"/>
                            <p:ajax listener="#{addressSupportManager.addressCountryChanged(addRegistryUserManager.dto.activeAddressDto.countryId)}" update="province_fragment"/>
                        </p:selectOneMenu>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Postal Code / Zip Code:"/>
                            <ui:param name="for" value="postalCode"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:inputText value="#{addRegistryUserManager.dto.activeAddressDto.postalCode}" id="postalCode" styleClass="zeroMargin" 
                                     disabled="#{not addRegistryUserManager.addressFieldsRequired}" validator="postalCodeValidator">
                            <f:attribute name="countryId" value="#{addRegistryUserManager.dto.activeAddressDto.countryId}" />
                        </p:inputText>

                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                            <ui:param name="text" value="Effective From:"/>
                            <ui:param name="for" value="effectiveFromDate_address"/>
                            <ui:param name="disabled" value="#{not addRegistryUserManager.addressFieldsRequired}"/>
                        </ui:include>
                        <p:calendar id="effectiveFromDate_address" value="#{addRegistryUserManager.dto.activeAddressDto.effectiveStartDate}" required="#{addRegistryUserManager.addressFieldsRequired}" disabled="#{not addRegistryUserManager.addressFieldsRequired}" showOn="button" navigator="true" size="11" title="#{consts['default.date.title']}"/>
                        <p:watermark value="1980-06-30" for="effectiveFromDate_address"/>

                    </p:panel>
                </p:tab>

                <p:tab id="confirm" title="Contact">
                    <p:panel>
                        <p:panel id="eAddressPanel" header="Electronic Address">

                            <p:outputLabel value="Add Entry:"></p:outputLabel>
                            <h:selectOneRadio id="eAddressBlockRadio" value="#{addRegistryUserManager.electronicAddressRequired}">
                                <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                <p:ajax listener="#{addRegistryUserManager.resetEAddress()}" update="eAddressPanel"/>
                            </h:selectOneRadio>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="E-Address Type:"/>
                                <ui:param name="for" value="eAddressType"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.electronicAddressRequired}"/>
                            </ui:include>
                            <p:selectOneMenu value="#{addRegistryUserManager.dto.activeElectronicAddressDto.typeId}" id="eAddressType" required="#{addRegistryUserManager.electronicAddressRequired}" disabled="#{not addRegistryUserManager.electronicAddressRequired}" binding="#{typeId}">
                                <f:selectItems value="#{Droplists.prsCtElectonicAddressTypes}"/> 
                            </p:selectOneMenu>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="E-Address Purpose:"/>
                                <ui:param name="for" value="eAddressPurpose"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.electronicAddressRequired}"/>
                            </ui:include>
                            <p:selectOneMenu value="#{addRegistryUserManager.dto.activeElectronicAddressDto.communicationPurposeId}" id="eAddressPurpose" required="#{addRegistryUserManager.electronicAddressRequired}" disabled="#{not addRegistryUserManager.electronicAddressRequired}">
                                <f:selectItems value="#{Droplists.prsCtCommunPurposeTypesFilterByEc}"/>
                            </p:selectOneMenu>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="E-Address"/>
                                <ui:param name="for" value="eAddress"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.electronicAddressRequired}"/>
                            </ui:include>
                            <p:inputText value="#{addRegistryUserManager.dto.activeElectronicAddressDto.address}" id="eAddress" 
                                         required="#{addRegistryUserManager.electronicAddressRequired}" 
                                         disabled="#{not addRegistryUserManager.electronicAddressRequired}" styleClass="zeroMargin" 
                                         validator="conditionalEmailValidator">
                                <f:attribute name="typeId" value="#{typeId}"/>
                            </p:inputText>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Effective From:"/>
                                <ui:param name="for" value="effectiveFromDate_eAddress"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.electronicAddressRequired}"/>
                            </ui:include>
                            <p:calendar id="effectiveFromDate_eAddress" value="#{addRegistryUserManager.dto.activeElectronicAddressDto.effectiveStartDate}" required="#{addRegistryUserManager.electronicAddressRequired}" disabled="#{not addRegistryUserManager.electronicAddressRequired}" showOn="button" navigator="true" size="11" title="#{consts['default.date.title']}"/>
                            <p:watermark value="1980-06-30" for="effectiveFromDate_eAddress"/>


                        </p:panel>

                        <p:panel id="telecomPanel" header="Telecommunications">

                            <p:outputLabel value="Add Entry:"></p:outputLabel>
                            <h:selectOneRadio id="telecomBlockRadio" value="#{addRegistryUserManager.telecomFieldsRequired}">
                                <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                <p:ajax listener="#{addRegistryUserManager.resetTelecom()}" update="telecomPanel"/>
                            </h:selectOneRadio>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Telecom Type:"/>
                                <ui:param name="for" value="telecomType"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.telecomFieldsRequired}"/>
                            </ui:include>
                            <p:selectOneMenu id="telecomType" 
                                             value="#{addRegistryUserManager.dto.activeTelecomDto.typeId}" 
                                             required="#{addRegistryUserManager.telecomFieldsRequired}" 
                                             disabled="#{not addRegistryUserManager.telecomFieldsRequired}" >
                                <f:selectItems value="#{Droplists.prsCtTelecomNumberTypes}" />
                                <p:ajax listener="#{maintainTelephoneManager.telecomTypeCodeChanged(addRegistryUserManager.dto.activeTelecomDto.typeId)}" 
                                        update="telecomPurpose"/>
                            </p:selectOneMenu>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Telecom Purpose:"/>
                                <ui:param name="for" value="telecomPurpose"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.telecomFieldsRequired}"/>
                            </ui:include>
                            <p:selectOneMenu id="telecomPurpose" 
                                             value="#{addRegistryUserManager.dto.activeTelecomDto.communicationPurposeId}" 
                                             required="#{addRegistryUserManager.telecomFieldsRequired}" 
                                             disabled="#{not addRegistryUserManager.telecomFieldsRequired}" >
                                <f:selectItems value="#{maintainTelephoneManager.prsCtTelecomPurposeCdByTelecomTypeSelectItems}" />
                            </p:selectOneMenu>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Telecom Area Code:"/>
                                <ui:param name="for" value="areaCode"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.telecomFieldsRequired}"/>
                            </ui:include>
                            <p:inputText id="areaCode" 
                                         value="#{addRegistryUserManager.dto.activeTelecomDto.areaCode}" 
                                         required="#{addRegistryUserManager.telecomFieldsRequired}" 
                                         disabled="#{not addRegistryUserManager.telecomFieldsRequired}" 
                                         styleClass="zeroMargin"/>


                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Telecom Number:"/>
                                <ui:param name="for" value="phoneNumber"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.telecomFieldsRequired}"/>
                            </ui:include>
                            <p:inputText id="phoneNumber" 
                                         value="#{addRegistryUserManager.dto.activeTelecomDto.number}" 
                                         required="#{addRegistryUserManager.telecomFieldsRequired}" 
                                         disabled="#{not addRegistryUserManager.telecomFieldsRequired}" 
                                         styleClass="zeroMargin"/>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Telecom Extension:"/>
                                <ui:param name="for" value="extensionNumber"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.telecomFieldsRequired}"/>
                            </ui:include>
                            <p:inputText id="extensionNumber" 
                                         value="#{addRegistryUserManager.dto.activeTelecomDto.extension}" 
                                         disabled="#{not addRegistryUserManager.telecomFieldsRequired}" 
                                         styleClass="zeroMargin"/>

                            <ui:include src="/WEB-INF/fragments/label.xhtml">
                                <ui:param name="text" value="Effective From:"/>
                                <ui:param name="for" value="effectiveFromDate_telecom"/>
                                <ui:param name="disabled" value="#{not addRegistryUserManager.telecomFieldsRequired}"/>
                            </ui:include>
                            <p:calendar id="effectiveFromDate_telecom" 
                                        value="#{addRegistryUserManager.dto.activeTelecomDto.effectiveStartDate}" 
                                        required="#{addRegistryUserManager.telecomFieldsRequired}" 
                                        disabled="#{not addRegistryUserManager.telecomFieldsRequired}" 
                                        showOn="button" 
                                        navigator="true" 
                                        size="11" 
                                        title="#{consts['default.date.title']}"/>
                            <p:watermark value="1980-06-30" for="effectiveFromDate_telecom"/>

                        </p:panel>


                        <p:commandButton id="addUserSubmit" value="Submit" action="#{addRegistryUserManager.save()}" update="@form"/>
                        <p:ajaxStatus style="display:inline-block">
                            <f:facet name="start"><h:graphicImage value="/images/Spinner.gif"/></f:facet>
                            <f:facet name="complete"><h:outputText value=""/></f:facet>
                        </p:ajaxStatus>
                    </p:panel>
                </p:tab>                
            </p:wizard>

        </h:form>
    </ui:define>
</ui:composition>