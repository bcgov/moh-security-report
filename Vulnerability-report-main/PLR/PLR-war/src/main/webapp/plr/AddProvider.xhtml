<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/gov21Template.xhtml">

    <f:metadata>
        <f:viewParam name="type" value="#{addProviderManager.dto.partyType}" 
                     required="#{not facesContext.postback}" requiredMessage="Bad URL. Please use a link from within the application." />
        <f:viewParam name="OOP" value="#{addProviderManager.OOP}" />
    </f:metadata>
    <ui:define name="title">Add Provider</ui:define>
    <ui:define name="body">
        <h2>Add Provider 
            <h:outputText value=" - (BC Practitioner)" rendered="#{addProviderManager.dto.partyType == 'IND' and addProviderManager.OOP != 'true'}" />
            <h:outputText value=" - (Organization)" rendered="#{addProviderManager.dto.partyType == 'ORG'}" />
            <h:outputText value=" - (Out of Province Practitioner)" rendered="#{addProviderManager.OOP == 'true'}"/>
        </h2>
        <hr/>
        <br/>
		
        <p:messages id="messages" showDetail="false" closable="true" >
            <p:autoUpdate disabled="false"/>
        </p:messages>
		
        <style>
            td {
                background: transparent;
                border: none;
            }
            .ui-selectoneradio.ui-widget td {
                /* Prevent the radio buttons from jumping up when selected. */
                vertical-align: middle;
            }            
            .ui-chkbox .ui-chkbox-box {
                background: white;
            }
            .ui-radiobutton .ui-radiobutton-box {
                background: white;
            }
            .ui-widget-header {
                color: white;
            }
            .ui-panelgrid td, .ui-panelgrid tr {
                border-style: none !important
            }
            .ui-panel td, .ui-panel tr {
                border-style: none !important
            }
        </style>

        <h:form id="form">
            <p:wizard flowListener="#{addProviderManager.onFlowProcess}" widgetVar="addProWiz">
                <p:tab title="Identifier and Status">
                    <p:panel>
                        <h:panelGrid>

                            <p:panel header="Identifier">
                                <h:panelGrid id="panelGridID">
                                    <p:outputLabel value="Provider Role Type:"/>
                                    <h:panelGroup rendered="#{addProviderManager.OOP != 'true' and addProviderManager.dto.partyType != 'ORG'}">
                                        <p:selectOneMenu id="providerRoleTypeIND" value="#{addProviderManager.dto.typeId}" required="true">
                                            <f:selectItems value="#{addProviderManager.providerTypeSelectItems}"  />
                                            <p:ajax listener="#{addProviderManager.providerTypeChanged()}" update="identifierType"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{addProviderManager.OOP == 'true' and addProviderManager.dto.partyType != 'ORG'}">
                                        <p:selectOneMenu id="providerRoleTypeOOPIND" value="#{addProviderManager.dto.typeId}" required="true">
                                            <f:selectItems value="#{addProviderManager.providerTypeSelectItems}"  />
                                            <p:ajax listener="#{addProviderManager.providerTypeChanged()}" update="identifierType"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{addProviderManager.OOP != 'true' and addProviderManager.dto.partyType == 'ORG'}">
                                        <p:selectOneMenu id="providerRoleTypeORG" value="#{addProviderManager.dto.typeId}" required="true">
                                            <f:selectItems value="#{addProviderManager.providerTypeSelectItems}"  />
                                            <p:ajax listener="#{addProviderManager.providerTypeChanged()}" update="identifierType"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>

                                    <p:outputLabel for="identifierType" value="Identifier Type:"/>
                                    <p:selectOneMenu  id="identifierType" value="#{addProviderManager.dto.identifiers[0].typeId}" required="true">
                                        <f:selectItems value="#{addProviderManager.identifierTypeSelectItems}"/>
                                    </p:selectOneMenu>

                                    <p:outputLabel for="identifierOOP" value="Identifier:"  rendered="#{addProviderManager.OOP == 'true' or addProviderManager.dto.partyType == 'ORG'}"/>
                                    <p:outputLabel for="identifier" value="Identifier:"  rendered="#{addProviderManager.OOP != 'true' and addProviderManager.dto.partyType != 'ORG'}"/>

                                    <h:panelGroup rendered="#{addProviderManager.OOP == 'true' or addProviderManager.dto.partyType == 'ORG'}" >
                                        <p:inputText id="identifierOOP" value="#{addProviderManager.dto.identifiers[0].identifier}" required="true">
                                        </p:inputText>

                                        <p:spacer width="10"/>
                                        <p:commandButton type="button" immediate="true" value="Generate Provider ID">
                                            <p:ajax listener="#{addProviderManager.timeInMillis}" update="identifierOOP"/>
                                        </p:commandButton>
                                        <h:graphicImage id="helpFirst" value="/images/help.png" /><p:tooltip for="helpFirst" value="Generate a random Provider Identifier or enter one manually.  This feature is only availabale for Out of Province Providers or Organizations." />
                                        <p:watermark value="123456" for="identifierOOP"/>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{addProviderManager.OOP != 'true' and addProviderManager.dto.partyType != 'ORG'}" >
                                        <p:inputText id="identifier" value="#{addProviderManager.dto.identifiers[0].identifier}" required="true">
                                        </p:inputText>
                                        <p:watermark value="123456" for="identifier"/>
                                    </h:panelGroup>

                                    <p:outputLabel for="effectiveFromDate_identifier" value="Effective From:" />
                                    <p:calendar id="effectiveFromDate_identifier" required="true" showOn="button" navigator="true" size="11"  value="#{addProviderManager.dto.identifiers[0].effectiveStartDate}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_identifier"/>

                                </h:panelGrid>
                            </p:panel>
                            <p:panel header="Status">
                                <h:panelGrid>
                                    <p:outputLabel for="statusClassCode" value="Status Class Code:" />
                                    <p:selectOneMenu id="statusClassCode" value="#{addProviderManager.dto.statuses[0].classCodeId}" required="true">
                                        <f:selectItems value="#{Droplists.prsCtStatusClassCodes}"/>
                                    </p:selectOneMenu>

                                    <p:outputLabel for="statusCode" value="Status Code:" />
                                    <p:selectOneMenu id="statusCode" value="#{addProviderManager.dto.statuses[0].typeId}" required="true">
                                        <p:ajax listener="#{addProviderManager.statusCodeChanged}" update="statusReasonCode"/>
                                        <f:selectItems value="#{Droplists.prsCtStatusCodes}"/>
                                    </p:selectOneMenu>

                                    <p:outputLabel for="statusReasonCode" value="Status Reason Code:" />
                                    <p:selectOneMenu id="statusReasonCode" value="#{addProviderManager.dto.statuses[0].reasonCodeId}" required="true">
                                        <f:selectItems value="#{addProviderManager.statusReasonCodeSelectItems}"/>
                                    </p:selectOneMenu>

                                    <p:outputLabel for="effectiveFromDate_status" value="Effective From:" />
                                    <p:calendar id="effectiveFromDate_status" value="#{addProviderManager.dto.statuses[0].effectiveStartDate}" required="true" showOn="button" navigator="true" size="11">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_status"/>
                                </h:panelGrid>
                            </p:panel>

                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="address" title="Name">
                    <p:panel>
                        <h:panelGrid>

                            <p:panel header="Personal Information" rendered="#{addProviderManager.dto.partyType == 'IND'}">
                                <h:panelGrid>
                                    <p:row>
                                        <p:outputLabel for="prefix" value="Prefix:"/>
                                        <h:graphicImage id="helpPrefix" value="/images/help.png" />
                                        <p:tooltip for="helpPrefix" value="Name Prefix must only contain spaces, ', -, ., and the English alphabet." />
                                    </p:row>
                                    <p:inputText value="#{addProviderManager.dto.indNames[0].prefix}" id="prefix">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="firstName" value="First Name:"/>
                                        <h:graphicImage id="helpFirstName" value="/images/help.png" />
                                        <p:tooltip for="helpFirstName" value="Names must only contain spaces, ', -, ., and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.indNames[0].firstName}" id="firstName" required="true">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="secondName" value="Second Name:"/>
                                        <h:graphicImage id="helpSecond" value="/images/help.png" />
                                        <p:tooltip for="helpSecond" value="Names must only contain spaces, ', -, ., and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.indNames[0].secondName}" id="secondName">      
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="thirdName" value="Third Name:"/>
                                        <h:graphicImage id="helpThird" value="/images/help.png" />
                                        <p:tooltip for="helpThird" value="Names must only contain spaces, ', -, ., and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.indNames[0].thirdName}" id="thirdName">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="surname" value="Surname:"/>
                                        <h:graphicImage id="helpLast" value="/images/help.png" />
                                        <p:tooltip for="helpLast" value="Names must only contain spaces, ', -, ., and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.indNames[0].lastName}" id="surname" required="true">
                                    </p:inputText>

                                    <p:outputLabel for="effectiveFromDate_name" value="Effective From:" />
                                    <p:calendar id="effectiveFromDate_name" value="#{addProviderManager.dto.indNames[0].effectiveStartDate}" required="true" showOn="button" navigator="true" size="11">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_name"/>
                                </h:panelGrid>
                            </p:panel>

                            <p:panel header="Demographic Details" rendered="#{addProviderManager.dto.partyType == 'IND'}">
                                <h:panelGrid>                                   
                                    <p:outputLabel for="dob" value="Date of Birth:" />
                                    <p:calendar id="dob" value="#{addProviderManager.dto.demographicDetails[0].birthDate}" showOn="button" navigator="true" size="11"  required="true" yearRange="#{jsfUtils.getBirthdateYearRange()}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="dob"/>

                                    <p:outputLabel for="gender" value="Gender:" />
                                    <p:selectOneRadio value="#{addProviderManager.dto.demographicDetails[0].genderId}" id="gender" required="true">
                                        <f:selectItems value="#{Droplists.prsCtGenderCodes}"/>
                                    </p:selectOneRadio>

                                    <p:outputLabel for="effectiveFromDate_demographics" value="Effective From:" />
                                    <p:calendar id="effectiveFromDate_demographics" value="#{addProviderManager.dto.demographicDetails[0].effectiveStartDate}" required="true" showOn="button" navigator="true" size="11">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_demographics"/>
                                </h:panelGrid>
                            </p:panel>

                            <p:panel header="Organization" rendered="#{addProviderManager.dto.partyType == 'ORG'}">
                                <h:panelGrid>

                                    <p:row>
                                        <p:outputLabel for="orgName" value="Name:"/> 
                                        <h:graphicImage id="helpOrgName" value="/images/help.png" />
                                        <p:tooltip for="helpOrgName" value="Organization Name can contain only: spaces, ', (, ), -, &amp;, +, ., /, \\, :, numbers, and the English alphabet." />
                                    </p:row>
                                    <p:inputText id="orgName" value="#{addProviderManager.dto.orgNames[0].name}" required="true">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="orgLongName" value="Description:"/>
                                        <h:graphicImage id="helpOrgLongName" value="/images/help.png" />
                                        <p:tooltip for="helpOrgLongName" value="Organization Description can contain only: spaces, ', (, ), -, &amp;, +, ., /, \\, :, numbers, and the English alphabet." />
                                    </p:row>
                                    <p:inputText id="orgLongName" value="#{addProviderManager.dto.orgNames[0].longName}">
                                    </p:inputText>

                                    <p:outputLabel for="effectiveFromDate_orgName" value="Effective From:" />
                                    <p:calendar id="effectiveFromDate_orgName" value="#{addProviderManager.dto.orgNames[0].effectiveStartDate}" required="true" showOn="button" navigator="true" size="11">
                                    </p:calendar>
                                </h:panelGrid>
                            </p:panel>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="contact" title="Contact">
                    <p:dialog widgetVar="addrValidDlg"  header="Address Validation Status:" visible="false">     
                        <p:messages id="adrMessages" showDetail="false" closable="true" >
                            <p:autoUpdate disabled="false"/>
                        </p:messages>
                        <p:panelGrid columns="2">
                            <p:panel header="Address Provided:" >
                            <p:panelGrid columns="2">
                                <h:outputText value="Address Line 1:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].addressLineOne}" />

                                <h:outputText value="Address Line 2:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].addressLineTwo}" />

                                <h:outputText value="Address Line 3:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].addressLineThree}" />

                                <h:outputText value="City:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].city}" />

                                <h:outputText value="Province / State:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].provinceOrStateTxt}" />
                                
                                <h:outputText value="Country:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].country}" />

                                <h:outputText value="Postal Code / Zip Code:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].postalCode}" />
                            </p:panelGrid>
                            </p:panel>
                            <p:panel header="Address Recommended:" >
                            <p:panelGrid columns="2">
                                <h:outputText value="Address Line 1:" />
                                <h:outputText value="#{addProviderManager.recommendedAddress.addressLineOne}" />

                                <h:outputText value="Address Line 2:" />
                                <h:outputText value="#{addProviderManager.recommendedAddress.addressLineTwo}" />

                                <h:outputText value="Address Line 3:" />
                                <h:outputText value="#{addProviderManager.recommendedAddress.addressLineThree}" />

                                <h:outputText value="City:" />
                                <h:outputText value="#{addProviderManager.recommendedAddress.city}" />

                                <h:outputText value="Province / State:" />
                                <h:outputText value="#{addProviderManager.recommendedAddress.provinceOrStateTxt}" />
                                
                                <h:outputText value="Country:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].country}" />

                                <h:outputText value="Postal Code / Zip Code:" />
                                <h:outputText value="#{addProviderManager.recommendedAddress.postalCode}" />
                            </p:panelGrid>
                            </p:panel>
                        </p:panelGrid><br></br>
                        <p:commandButton value="Continue w/ Original" onclick="PF('addrValidDlg').hide();PF('addProWiz').next();" action="#{addProviderManager.addAddressInvalidWarnMsg}" process="@this"/>
                        <p:commandButton value="Continue w/ Recommended" action="#{addProviderManager.useADAddress}" onclick="PF('addrValidDlg').hide();PF('addProWiz').next();" process="@this"/>
                        <p:commandButton value="Cancel"   onclick="PF('addrValidDlg').hide();"/>                         
                    </p:dialog>
                    <p:dialog widgetVar="addrValidationUnkownDlg"  header="Address Validation Status Unkown:" visible="false">     
                        <p:messages id="adrUnkMessages" showDetail="false" closable="true" >
                            <p:autoUpdate disabled="false"/>
                        </p:messages>
                        <p:commandButton value="Continue w/ Original" onclick="PF('addrValidDlg').hide();PF('addProWiz').next();" />
                        <p:commandButton value="Cancel"   onclick="PF('addrValidDlg').hide();"/>
                    </p:dialog>
                    <p:dialog widgetVar="addrInvalidNoCorrectionsDlg"  header="Address Invalid, No Corrections Available:" visible="false">     
                        <p:messages id="adrInvalidNoCorrMessages" showDetail="false" closable="true" >
                            <p:autoUpdate disabled="false"/>
                        </p:messages>
                            <p:panel header="Address Provided:" >
                            <p:panelGrid columns="2">
                                <h:outputText value="Address Line 1:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].addressLineOne}" />

                                <h:outputText value="Address Line 2:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].addressLineTwo}" />

                                <h:outputText value="Address Line 3:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].addressLineThree}" />

                                <h:outputText value="City:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].city}" />

                                <h:outputText value="Province / State:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].provinceOrStateTxt}" />

                                <h:outputText value="Country:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].country}" />

                                <h:outputText value="Postal Code / Zip Code:" />
                                <h:outputText value="#{addProviderManager.dto.addresses[0].postalCode}" />
                            </p:panelGrid>
                            </p:panel>
                        <p:commandButton value="Continue w/ Original" onclick="PF('addrInvalidNoCorrectionsDlg').hide();PF('addProWiz').next();" action="#{addProviderManager.addAddressInvalidWarnMsg}" process="@this"/>
                        <p:commandButton value="Cancel" onclick="PF('addrInvalidNoCorrectionsDlg').hide();"/>
                    </p:dialog> 
                    <p:panel>
                        <h:panelGrid>
                            <p:panel header="Address">
                                <h:panelGrid>
                                    <p:outputLabel for="addressType" value="Address Type:"/>
                                    <p:selectOneMenu value="#{addProviderManager.dto.addresses[0].typeId}" id="addressType" required="true">
                                        <f:selectItems value="#{Droplists.prsCtAddressTypes}"/> 
                                    </p:selectOneMenu>

                                    <p:outputLabel for="addressPurpose" value="Purpose:"/>
                                    <p:selectOneMenu value="#{addProviderManager.dto.addresses[0].communicationPurposeId}" id="addressPurpose" required="true">
                                        <f:selectItems value="#{Droplists.prsCtCommunPurposeTypesFilterByEc}"/>
                                    </p:selectOneMenu>

                                    <p:row>
                                        <p:outputLabel for="autoComplete" value="Address Auto Complete:" />
                                        <h:graphicImage id="helpAuto" value="/images/help.png" />
                                        <p:tooltip for="helpAuto">
                                            <h:outputText value="Address Auto Complete attempts to suggest valid Canadian addresses based on the input you provide."/><br/>
                                            <h:outputText value="Click on an address from the resulting list to automatically fill the address fields below."/><br/>
                                            <h:outputText value="PO Box and RR Addresses should include the correct City, City and Province or Postal Code for better results."/>
                                        </p:tooltip>
                                    </p:row>
                                    <p:autoComplete value="#{addProviderManager.addressAutoComplete}" queryDelay="#{addProviderManager.configurationDao.addressSuggestionsUIDelay}" id="autoComplete" inputStyle="width: 200%" autocomplete="off"
                                                    completeMethod="#{addProviderManager.suggestAddresses}" maxResults="#{addProviderManager.autocompleteMaxResults}"
                                                    emptyMessage="#{addProviderManager.suggestedAddressesIsNotNullButEmpty ? 'No results' : 'Searching ... if nothing returns try typing more of the address.'}" >
                                        <p:ajax event="itemSelect" listener="#{addProviderManager.onAutoCompleteSelection}" 
                                                update="autoComplete,addressLine1,addressLine2,addressLine3,city,country,province_fragment,postalCode"/>
                                    </p:autoComplete>
                                    <p:watermark value="Type here for quick address suggestions..." for="autoComplete" />
                                    
                                    <p:row>
                                        <p:outputLabel for="addressLine1" value="Address Line 1:" />
                                        <h:graphicImage id="helpL1" value="/images/help.png" />
                                        <p:tooltip for="helpL1" value="Address Lines must only contain spaces, &amp;, ', -, ., numbers, and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.addresses[0].addressLineOne}" id="addressLine1" required="true">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="addressLine2" value="Address Line 2:" />
                                        <h:graphicImage id="helpL2" value="/images/help.png" />
                                        <p:tooltip for="helpL2" value="Address Lines must only contain spaces, &amp;, ', -, ., numbers, and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.addresses[0].addressLineTwo}" id="addressLine2">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="addressLine3" value="Address Line 3:" />
                                        <h:graphicImage id="helpL3" value="/images/help.png" />
                                        <p:tooltip for="helpL3" value="Address Lines must only contain spaces, &amp;, ', -, ., numbers, and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.addresses[0].addressLineThree}" id="addressLine3">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="city" value="City:" />
                                        <h:graphicImage id="helpCity" value="/images/help.png" />
                                        <p:tooltip for="helpCity" value="City must only contain spaces, &amp;, ', -, ., numbers, and the English alphabet." />
                                    </p:row>
                                    <p:autoComplete id="city" 
                                                    value="#{addProviderManager.dto.addresses[0].city}" 
                                                    required="true"
                                                    completeMethod="#{addressSupportManager.suggestCityName}" 
                                                    effect="fade">      
                                    </p:autoComplete>

                                    <p:fragment id="province_fragment">
                                        <ui:include src="/WEB-INF/fragments/label.xhtml">
                                            <ui:param name="text" value="Province / State:"/>
                                            <ui:param name="for" value="province_address"/>
                                        </ui:include>
                                        <p:inputText value="#{addProviderManager.dto.addresses[0].provinceOrStateTxt}" id="province_address" 
                                                     rendered="#{!addressSupportManager.showProvinceDropDown(addProviderManager.dto.addresses[0].countryId)}"
                                                     label="Province / State"/>
                                        <p:selectOneMenu id="province_drop" value="#{addProviderManager.dto.addresses[0].provinceOrStateTxt}" 
                                                         rendered="#{addressSupportManager.showProvinceDropDown(addProviderManager.dto.addresses[0].countryId)}">
                                            <f:selectItems value="#{addProviderManager.addressProvinceSelectItems}"/>
                                        </p:selectOneMenu>
                                    </p:fragment>
                                    
                                    <p:outputLabel for="country" value="Country:"/>
                                    <p:selectOneMenu id="country" value="#{addProviderManager.dto.addresses[0].countryId}" required="true">
                                        <f:selectItems value="#{addressSupportManager.countrySelectItemsOrderedByName}"/>                                        
                                        <p:ajax listener="#{addProviderManager.addressCountryChanged(addProviderManager.dto.addresses[0].countryId)}" update="province_fragment"/>
                                    </p:selectOneMenu>
                                    <p:row>
                                        <p:outputLabel for="postalCode" value="Postal Code / Zip Code:" />
                                        <h:graphicImage id="helpPC" value="/images/help.png" />
                                        <p:tooltip for="helpPC" value="Postal Code must only contain spaces, &amp;, ', -, ., numbers, and the English alphabet." />
                                    </p:row>

                                    <p:inputText value="#{addProviderManager.dto.addresses[0].postalCode}" id="postalCode" validator="postalCodeValidator">
                                        <f:attribute name="countryId" value="#{addProviderManager.dto.addresses[0].countryId}" />
                                    </p:inputText>
                                    <p:watermark value="V1V 1V1" for="postalCode"/>

                                    <p:outputLabel for="effectiveFromDate_address" value="Effective From:" />
                                    <p:calendar id="effectiveFromDate_address" value="#{addProviderManager.dto.addresses[0].effectiveStartDate}" required="true" showOn="button" navigator="true" size="11">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_address"/>

                                </h:panelGrid>
                            </p:panel>

                            <p:panel header="Phone Number">
                                <h:panelGrid id="phoneGrid">
                                    <p:outputLabel value="Add Phone Number:">
                                        <p:selectOneRadio id="phoneGridRadio" value="#{addProviderManager.addPhoneNumber}">
                                            <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                            <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                            <p:ajax update="phoneGrid"/>
                                            <p:ajax listener="#{addProviderManager.resetPhone()}"/>
                                        </p:selectOneRadio>
                                    </p:outputLabel>

                                    <p:row>
                                        <p:outputLabel for="areaCode" value="Area Code:" 
                                                       styleClass="#{not addProviderManager.addPhoneNumber ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpAreaCode" value="/images/help.png" />
                                        <p:tooltip for="helpAreaCode" value="Area Code must only contain spaces, -, and numbers." />
                                    </p:row>

                                    <p:inputText id="areaCode" value="#{addProviderManager.dto.phone.areaCode}" 
                                                 disabled="#{not addProviderManager.addPhoneNumber}" required="#{addProviderManager.addPhoneNumber}">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel id="phoneNumberLabel" for="phoneNumber" value="Phone Number:"
                                                       styleClass="#{not addProviderManager.addPhoneNumber ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpPhoneNumber" value="/images/help.png" />
                                        <p:tooltip for="helpPhoneNumber" value="Phone Number must only contain spaces, -, and numbers." />
                                    </p:row>


                                    <p:inputText id="phoneNumber" value="#{addProviderManager.dto.phone.number}" 
                                                 disabled="#{not addProviderManager.addPhoneNumber}"
                                                 required="#{addProviderManager.addPhoneNumber}" >
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel for="extensionNumber" value="Extension:" 
                                                       styleClass="#{not addProviderManager.addPhoneNumber ? 'ui-state-disabled' : ''}" />
                                        <h:graphicImage id="helpEx" value="/images/help.png" />
                                        <p:tooltip for="helpEx" value="Extension must only contain spaces, -, and numbers." />
                                    </p:row>

                                    <p:inputText id="extensionNumber" value="#{addProviderManager.dto.phone.extension}" 
                                                 disabled="#{not addProviderManager.addPhoneNumber}">
                                    </p:inputText>

                                    <p:outputLabel for="effectiveFromDate_phoneNum" value="Effective From:" title="Address Effective From"
                                                   styleClass="#{not addProviderManager.addPhoneNumber ? 'ui-state-disabled' : ''}"/>
                                    <p:calendar id="effectiveFromDate_phoneNum" value="#{addProviderManager.dto.phone.effectiveStartDate}" showOn="button" navigator="true" size="11"
                                                disabled="#{not addProviderManager.addPhoneNumber}"
                                                required="#{addProviderManager.addPhoneNumber}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_phoneNum"/>
                                </h:panelGrid>
                            </p:panel>

                            <p:panel header="Fax Number">
                                <h:panelGrid id="faxGrid">
                                    <p:outputLabel value="Add Fax Number:">
                                        <p:selectOneRadio id="faxGridRadio" value="#{addProviderManager.addFaxNumber}">
                                            <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                            <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                            <p:ajax update="faxGrid"/>
                                            <p:ajax listener="#{addProviderManager.resetFax()}"/>
                                        </p:selectOneRadio>
                                    </p:outputLabel>

                                    <p:row>
                                        <p:outputLabel for="areaCodeFax" value="Area Code:" 
                                                       styleClass="#{not addProviderManager.addFaxNumber ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpFaxAC" value="/images/help.png" />
                                        <p:tooltip for="helpFaxAC" value="Area Code must only contain spaces, -, and numbers." />
                                    </p:row>

                                    <p:inputText id="areaCodeFax" value="#{addProviderManager.dto.fax.areaCode}"
                                                 disabled="#{not addProviderManager.addFaxNumber}" required="#{addProviderManager.addFaxNumber}">
                                    </p:inputText>

                                    <p:row>
                                        <p:outputLabel id="faxNumberLabel" for="faxNumber" value="Fax Number:" 
                                                       styleClass="#{not addProviderManager.addFaxNumber ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpFaxNum" value="/images/help.png" />
                                        <p:tooltip for="helpFaxNum" value="Phone Number must only contain spaces, -, and numbers." />
                                    </p:row>

                                    <p:inputText id="faxNumber" value="#{addProviderManager.dto.fax.number}"
                                                 disabled="#{not addProviderManager.addFaxNumber}"
                                                 required="#{addProviderManager.addFaxNumber}" >
                                    </p:inputText>

                                    <p:outputLabel for="effectiveFromDate_faxNum" value="Effective From:" 
                                                   styleClass="#{not addProviderManager.addFaxNumber ? 'ui-state-disabled' : ''}"/>
                                    <p:calendar id="effectiveFromDate_faxNum" value="#{addProviderManager.dto.fax.effectiveStartDate}" showOn="button" navigator="true" size="11"
                                                disabled="#{not addProviderManager.addFaxNumber}"
                                                required="#{addProviderManager.addFaxNumber}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveFromDate_faxNum"/>

                                </h:panelGrid>
                            </p:panel>

                            <p:panel header="Email">
                                <h:panelGrid id="emailGrid">
                                    <p:outputLabel value="Add Email Address:">
                                        <p:selectOneRadio id="emailGridRadio" value="#{addProviderManager.addEmail}">
                                            <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                            <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                            <p:ajax update="emailGrid"/>
                                            <p:ajax listener="#{addProviderManager.resetEmail()}"/>
                                        </p:selectOneRadio>
                                    </p:outputLabel>

                                    <p:outputLabel for="emailAddress" value="Email Address:"
                                                   styleClass="#{not addProviderManager.addEmail ? 'ui-state-disabled' : ''}"/>
                                    <p:inputText id="emailAddress" value="#{addProviderManager.dto.electronicAddresses[0].address}" validator="#{addProviderManager.validateEmail}"
                                                 disabled="#{not addProviderManager.addEmail}"
                                                 required="#{addProviderManager.addEmail}">
                                    </p:inputText>
                                    <p:outputLabel for="effectiveStartDateEmail" value="Effective From:" 
                                                   styleClass="#{not addProviderManager.addEmail ? 'ui-state-disabled' : ''}"/>
                                    <p:calendar id="effectiveStartDateEmail" value="#{addProviderManager.dto.electronicAddresses[0].effectiveStartDate}"
                                                showOn="button" navigator="true" size="11"
                                                disabled="#{not addProviderManager.addEmail}"
                                                required="#{addProviderManager.addEmail}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveStartDateEmail"/>
                                </h:panelGrid>
                            </p:panel>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="confirm" title="Credential and Expertise">
                    <p:panel>
                        <h:panelGrid>
                            <p:panel header="Credential">
                                <h:panelGrid id="credGrid">
                                    <p:outputLabel value="Add Credential:">
                                        <p:selectOneRadio id="credGridRadio" value="#{addProviderManager.addCredential}">
                                            <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                            <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                            <p:ajax update="credGrid"/>
                                            <p:ajax listener="#{addProviderManager.resetCredential()}"/>
                                        </p:selectOneRadio>
                                    </p:outputLabel>
                                    <p:outputLabel for="credentialType" value="Credential Type:"
                                                   styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                    <p:selectOneMenu id="credentialType" value="#{addProviderManager.dto.credentials[0].typeId}"
                                                     disabled="#{not addProviderManager.addCredential}"
                                                     required="#{addProviderManager.addCredential}">
                                        <f:selectItems value="#{addProviderManager.credentialTypeSelectItems}"/>
                                    </p:selectOneMenu>

                                    <p:row>
                                        <p:outputLabel id="designationLabel" for="designation" value="Designation:"
                                                       styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ' '}"/> 
                                        <h:graphicImage id="helpDesig" value="/images/help.png" /><p:tooltip for="helpDesig" value="A text description of the degree or educational rank that the credential specifies, e.g., BSc, MD, BScN" />
                                    </p:row>
                                    <p:inputText id="designation" value="#{addProviderManager.dto.credentials[0].designation}"
                                                 disabled="#{not addProviderManager.addCredential}"
                                                 required="#{addProviderManager.addCredential}">
                                    </p:inputText>
                                    <p:row>
                                        <p:outputLabel for="regNo" value="Registration Number:"
                                                       styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpReg" value="/images/help.png" /><p:tooltip for="helpReg" value="A number identifying the credential." />
                                    </p:row>
                                    <p:inputText id="regNo" value="#{addProviderManager.dto.credentials[0].registrationNumber}"
                                                 disabled="#{not addProviderManager.addCredential}">
                                    </p:inputText>

                                    <p:outputLabel for="institution" value="Institution:"
                                                   styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                    <p:inputText id="institution" value="#{addProviderManager.dto.credentials[0].grantingInstitution}"
                                                 disabled="#{not addProviderManager.addCredential}">
                                    </p:inputText>

                                    <p:outputLabel for="cityCred" value="City:"
                                                   styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                    <p:autoComplete id="cityCred" value="#{addProviderManager.dto.credentials[0].institutionCity}" completeMethod="#{addressSupportManager.suggestCityName}" effect="fade"
                                                    disabled="#{not addProviderManager.addCredential}">
                                    </p:autoComplete>

                                    <p:outputLabel for="countryCred" value="Country:"
                                                   styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                    <p:selectOneMenu id="countryCred" value="#{addProviderManager.dto.credentials[0].institutionCountryId}" 
                                                     disabled="#{not addProviderManager.addCredential}">
                                        <f:selectItem itemLabel="Select One" itemValue=""/>
                                        <f:selectItems value="#{addressSupportManager.countrySelectItemsOrderedByName}" />
                                        <p:ajax event='change' listener="#{addProviderManager.countryCredentialChanged()}" update="provinceCred"/>
                                        <p:ajax event='change' listener="#{addressSupportManager.countryChangedGroup2(addProviderManager.dto.credentials[0].institutionCountryId)}" update="provinceCred"/>
                                    </p:selectOneMenu>

                                    <p:outputLabel for="provinceCred" value="Province / State:"
                                                   styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                    <p:selectOneMenu id="provinceCred" value="#{addProviderManager.dto.credentials[0].institutionProvStateId}"
                                                     disabled="#{empty addressSupportManager.provinceSelectItemsGroup2 or not addProviderManager.addCredential}">
                                        <f:selectItem itemLabel="Select One" itemValue=""/>
                                        <f:selectItems value="#{addressSupportManager.provinceSelectItemsGroup2}"/> 
                                        <p:ajax event='change' listener="#{addProviderManager.provinceCredentialChanged()}" />
                                    </p:selectOneMenu>

                                    <p:row>
                                        <p:outputLabel for="equivalencyFlag" value="Equivalency:"
                                                       styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpEquiv" value="/images/help.png" />
                                        <p:tooltip for="helpEquiv" value="Select to indicate that a credential was granted based on equivalency rather than by an officially recognized institution (i.e. as a result of experience)." />
                                    </p:row>
                                    <p:selectBooleanCheckbox id="equivalencyFlag" value="#{addProviderManager.dto.credentials[0].equivalencyFlag}" 
                                                             disabled="#{not addProviderManager.addCredential}">
                                    </p:selectBooleanCheckbox>

                                    <p:row>
                                        <p:outputLabel for="yearIssued" value="Year:"
                                                       styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpYear" value="/images/help.png" />
                                        <p:tooltip for="helpYear" value="The year the credential was conferred." />
                                    </p:row>
                                    <p:inputText id="yearIssued" value="#{addProviderManager.dto.credentials[0].yearIssued}"
                                                 disabled="#{not addProviderManager.addCredential}">
                                    </p:inputText>

                                    <p:outputLabel id="effectiveStartDateCredLabel" for="effectiveStartDateCred" value="Effective From:"
                                                   styleClass="#{not addProviderManager.addCredential ? 'ui-state-disabled' : ''}"/>
                                    <p:calendar id="effectiveStartDateCred" value="#{addProviderManager.dto.credentials[0].effectiveStartDate}"
                                                showOn="button" navigator="true" size="11"
                                                disabled="#{not addProviderManager.addCredential}"
                                                required="#{addProviderManager.addCredential}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveStartDateCred"/>
                                </h:panelGrid>
                            </p:panel>

                            <p:panel header="Expertise">
                                <h:panelGrid id="expertGrid">
                                    <p:outputLabel value="Add Expertise:">
                                        <p:selectOneRadio id="expertGridRadio" value="#{addProviderManager.addExpertise}">
                                            <f:selectItem itemLabel="No" itemValue="#{false}"/>
                                            <f:selectItem itemLabel="Yes" itemValue="#{true}"/>
                                            <p:ajax update="expertGrid"/>
                                            <p:ajax listener="#{addProviderManager.resetExpertise()}"/>
                                        </p:selectOneRadio>
                                    </p:outputLabel>

                                    <p:outputLabel for="expertise" value="Expertise:"
                                                   styleClass="#{not addProviderManager.addExpertise ? 'ui-state-disabled' : ''}"/>
                                    <p:selectOneMenu id="expertise" value="#{addProviderManager.dto.expertise[0].typeId}"
                                                     disabled="#{not addProviderManager.addExpertise}"
                                                     required="#{addProviderManager.addExpertise}">
                                        <f:selectItems value="#{addProviderManager.expertiseTypeSelectItems}"/>
                                    </p:selectOneMenu>

                                    <p:row>
                                        <p:outputLabel for="sourceCode" value="Source's Code:"
                                                       styleClass="#{not addProviderManager.addExpertise ? 'ui-state-disabled' : ''}"/>
                                        <h:graphicImage id="helpSource" value="/images/help.png" /> <p:tooltip for="helpSource" value="The code that the source uses in their own system to record this provider expertise." />
                                    </p:row>
                                    <p:inputText id="sourceCode" value="#{addProviderManager.dto.expertise[0].sourcesCode}"
                                                 disabled="#{not addProviderManager.addExpertise}"
                                                 >
                                    </p:inputText>

                                    <p:outputLabel id="effectiveStartDateExpertiseLabel" for="effectiveStartDateExpertise" value="Effective From:"
                                                   styleClass="#{not addProviderManager.addExpertise ? 'ui-state-disabled' : ''}"/>
                                    <p:calendar id="effectiveStartDateExpertise" value="#{addProviderManager.dto.expertise[0].effectiveStartDate}"
                                                showOn="button" navigator="true" size="11"
                                                disabled="#{not addProviderManager.addExpertise}"
                                                required="#{addProviderManager.addExpertise}">
                                    </p:calendar>
                                    <p:watermark value="1980-06-30" for="effectiveStartDateExpertise"/>
                                </h:panelGrid>
                            </p:panel>
                        </h:panelGrid>
                        <p:commandButton id="addProviderSubmit" value="Submit" action="#{addProviderManager.save()}" update="@form"
                                         onclick="this.disabled = true;" oncomplete="this.disabled=false;"/>
                        <p:ajaxStatus style="display:inline-block">
                            <f:facet name="start"><h:graphicImage value="/images/Spinner.gif"/></f:facet>
                            <f:facet name="complete"><h:outputText value=""/></f:facet>
                        </p:ajaxStatus>
                    </p:panel>
                </p:tab>
            </p:wizard>

        </h:form>        

    </ui:define>
</ui:composition>