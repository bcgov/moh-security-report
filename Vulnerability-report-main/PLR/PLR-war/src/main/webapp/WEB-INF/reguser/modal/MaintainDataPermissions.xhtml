<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >
    <p:dialog id="maintainDataPermDialog" 
              header="#{maintainDataPermissionManager.accessProfileDto.new ? 'Add' : 'Update'} Data Permission Profile"
              widgetVar="maintainDataPermModal" modal="true" draggable="false" 
              closeOnEscape="true" resizable="false" fitViewport="true" width="355" height="465">
        <h:form id="maintainDataPermForm">
		
			<p:messages id="messages" showDetail="false" closable="true" >
				<p:autoUpdate disabled="false"/>
			</p:messages>

            <p:outputLabel for="dpsName" value="DPS Name" styleClass="frmDialogLbl"/>
            <p:selectOneMenu value="#{maintainDataPermissionManager.accessProfileDto.profileGroupId}" id="dpsName" required="true">
                <f:selectItems value="#{Droplists.grsAccessProfileGroupNames}"/>
            </p:selectOneMenu>

            <p:outputLabel for="providerType" value="Provider Type" styleClass="frmDialogLbl"/>
            <p:selectOneMenu value="#{maintainDataPermissionManager.accessProfileDto.providerType}" id="providerType" required="true">
<!--                <f:selectItems value="#{Droplists.providerRoleTypesForAdd}"/>TODO-->
                <f:selectItems value="#{Droplists.providerRoleTypesForDistribution}"/>
            </p:selectOneMenu>
            
            <p:outputLabel for="distributeAfter" value="Distribute After" styleClass="frmDialogLbl"/>
            <p:calendar id="distributeAfter" value="#{maintainDataPermissionManager.accessProfileDto.distributeAfter}" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" styleClass="zeroMargin"/>
            <p:watermark value="1980-06-30" for="distributeAfter"/>

            <p:outputLabel for="dataSet" value="Data Set" styleClass="frmDialogLbl"/>
            <p:selectOneMenu value="#{maintainDataPermissionManager.accessProfileDto.dataOwnerCode}" id="dataSet" required="true">
<!--                <f:selectItems value="#{Droplists.prsCtDataOwnerCodes}"/>TODO-->
                <f:selectItems value="#{Droplists.prsCtDataOwnerCodesForDistribution}"/>
            </p:selectOneMenu>
            
            <p:outputLabel for="effectiveFromDate" value="Effective From" styleClass="frmDialogLbl"/>
            <p:calendar id="effectiveFromDate" value="#{maintainDataPermissionManager.accessProfileDto.effectiveStartDate}" required="true" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" styleClass="zeroMargin"/>
            <p:watermark value="1980-06-30" for="effectiveFromDate"/>

            <p:outputLabel for="effectiveToDate" value="Effective To" styleClass="frmDialogLbl"/>
            <p:calendar id="effectiveToDate" value="#{maintainDataPermissionManager.accessProfileDto.effectiveEndDate}" required="false" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy"  styleClass="zeroMargin"/>
            <p:watermark value="1980-06-30" for="effectiveToDate"/>
            
            <ui:fragment rendered="#{!maintainDataPermissionManager.accessProfileDto.new}">
                <p:outputLabel for="EndReasonType" value="End Reason" styleClass="frmDialogLbl"/>
                <p:selectOneMenu id="EndReasonType" value="#{maintainDataPermissionManager.accessProfileDto.endReasonCodeId}" required="true">
                    <f:selectItems value="#{Droplists.grsCtEndReasonTypes}" />
                </p:selectOneMenu>
            </ui:fragment>

           <div class="formControls">
                <p:commandButton id="idDataPermSubmitButton" value="#{maintainDataPermissionManager.accessProfileDto.new ? 'Create' : 'Update'}" 
                                 actionListener="#{maintainDataPermissionManager.save(true)}" oncomplete="if (args &amp;&amp; !args.validationFailed) PF('maintainDataPermModal').hide(); return false;" update=":maintainDataPermForm, #{maintainDataPermissionManager.panelToUpdate}" />
                <p:ajaxStatus style="display:inline-block">
                    <f:facet name="start"><h:graphicImage value="/resources/Spinner.gif"/></f:facet>
                    <f:facet name="complete"><h:outputText value="" /></f:facet>                     
                </p:ajaxStatus>    
                <a href="#" onclick="PF('maintainDataPermModal').hide();
                        return false;">Cancel</a>
            </div>
        </h:form>
    </p:dialog> 
</ui:composition>