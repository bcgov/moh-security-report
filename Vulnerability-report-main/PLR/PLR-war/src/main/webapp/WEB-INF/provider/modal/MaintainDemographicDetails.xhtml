<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >

    <style>
        .ui-selectoneradio.ui-widget td {
            /* Prevent the radio buttons from jumping up when selected. */
            vertical-align: middle;
        }
        #content form input, .ui-inputfield {
            background: white;
            color: black;
        }
        .ui-radiobutton .ui-radiobutton-box {
            background: white;
        }
    </style>

    <p:dialog id="maintainDemographicDetailsDialog" 
              header="#{maintainDemographicDetailsManager.demographicDetailsDto.new ? 'Add' : 'Update'} Demographic Details"
              widgetVar="maintainDemographicDetailsModal" modal="true" draggable="false" 
              closeOnEscape="true" resizable="false" fitViewport="true" width="375" height="535">
        <h:form id="maintainDemographicDetailsForm">
		
			<p:messages id="messages" showDetail="false" closable="true" >
				<p:autoUpdate disabled="false"/>
			</p:messages>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Date of Birth"/>
                <ui:param name="for" value="dob"/>
            </ui:include>
            <h:outputText rendered="#{maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('birthDate')}" 
                          value="No Permissions"/>
            <p:calendar id="dob" value="#{maintainDemographicDetailsManager.demographicDetailsDto.birthDate}" 
                        showOn="button" navigator="true" size="11" required="true"  yearRange="#{jsfUtils.getBirthdateYearRange()}" 
                        binding="#{birthDate}" rendered="#{!maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('birthDate')}" />
            <p:watermark value="1980-06-30" for="dob"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Date of Death"/>
                <ui:param name="for" value="dod"/>
            </ui:include>
            <h:outputText rendered="#{maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('deathDate')}" value="No Permissions"/>
            <p:calendar id="dod" value="#{maintainDemographicDetailsManager.demographicDetailsDto.deathDate}" showOn="button" navigator="true" 
                        size="11" validator="afterDateValidator" rendered="#{!maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('deathDate')}">
                <f:attribute name="beforeDate" value="#{birthDate}"/>
                <f:attribute name="errorMessage" value="#{val['error.death.before.birth']}"/>
            </p:calendar>
            <p:watermark value="1980-06-30" for="dod"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Birth Country"/>
                <ui:param name="for" value="birthCountry"/>
            </ui:include>
            <h:outputText rendered="#{maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('birthCountry')}" 
                          value="No Permissions"/>
            <p:selectOneMenu id="birthCountry" value="#{maintainDemographicDetailsManager.demographicDetailsDto.birthCountryCodeId}"
                             rendered="#{!maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('birthCountry')}" >
                <f:selectItem itemLabel="Select None" itemValue="#{null}"/>                
                <f:selectItems value="#{addressSupportManager.countrySelectItemsOrderedByName}"/>
                <p:ajax listener="#{addressSupportManager.countryChangedGroup1(maintainDemographicDetailsManager.demographicDetailsDto.birthCountryCodeId)}" update="birthProvState"/>
            </p:selectOneMenu>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Birth Province / State"/>
                <ui:param name="for" value="birthProvState"/>
            </ui:include>
            <h:outputText rendered="#{maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('birthProvState')}" 
                          value="No Permissions"/>
            <p:selectOneMenu id="birthProvState" value="#{maintainDemographicDetailsManager.demographicDetailsDto.birthProvStateCodeId}" 
                             disabled="#{empty addressSupportManager.provinceSelectItemsGroup1}" 
                             rendered="#{!maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('birthProvState')}" >
                <f:selectItem itemLabel="Select None" itemValue="#{null}"/>                
                <f:selectItems value="#{maintainDemographicDetailsManager.demographicDetailsDto.birthCountryCodeId ne null ? addressSupportManager.provinceSelectItemsGroup1 : null}"/>
            </p:selectOneMenu>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Gender"/>
                <ui:param name="for" value="gender"/>
            </ui:include>
            <h:outputText rendered="#{maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('gender')}" 
                          value="No Permissions"/>
            <p:selectOneRadio value="#{maintainDemographicDetailsManager.demographicDetailsDto.genderId}" id="gender" required="true"
                              rendered="#{!maintainDemographicDetailsManager.demographicDetailsDto.accessRestrictionData.unreadables.contains('gender')}" >
                <f:selectItems value="#{Droplists.prsCtGenderCodes}"/>
            </p:selectOneRadio>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="End Reason"/>
                <ui:param name="for" value="endReasonCode"/>
                <ui:param name="rendered" value="#{!maintainDemographicDetailsManager.demographicDetailsDto.new}"/>
            </ui:include>
            <p:selectOneMenu id="endReasonCode" rendered ="#{!maintainDemographicDetailsManager.demographicDetailsDto.new}" value="#{maintainDemographicDetailsManager.demographicDetailsDto.endReasonCodeId}" required="true">
                <f:selectItems value="#{Droplists.grsCtEndReasonTypes}" />
            </p:selectOneMenu>


            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective From"/>
                <ui:param name="for" value="effectiveFromDate"/>
            </ui:include>
            <p:calendar id="effectiveFromDate" value="#{maintainDemographicDetailsManager.demographicDetailsDto.effectiveStartDate}" required="true" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="effectiveFromDate"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective To"/>
                <ui:param name="for" value="effectiveToDate"/>
            </ui:include>
            <p:calendar id="effectiveToDate" value="#{maintainDemographicDetailsManager.demographicDetailsDto.effectiveEndDate}" required="false" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="effectiveToDate"/>

            <div class="formControls">
                <p:commandButton id="idStatusSubmitButton" value="#{maintainDemographicDetailsManager.demographicDetailsDto.new ? 'Create' : 'Update'}" actionListener="#{maintainDemographicDetailsManager.save(true)}" oncomplete="if (args &amp;&amp; !args.validationFailed) PF('maintainDemographicDetailsModal').hide()" update=":maintainDemographicDetailsForm, :demographicDetailsPanel, :modalMessages" />
                <p:ajaxStatus style="display:inline-block">
                    <f:facet name="start"><h:graphicImage value="/resources/Spinner.gif"/></f:facet>
                    <f:facet name="complete"><h:outputText value="" /></f:facet>                     
                </p:ajaxStatus>    
                <a href="#" onclick="PF('maintainDemographicDetailsModal').hide();
                        return false;">Cancel</a>
            </div>
        </h:form>
    </p:dialog>          


</ui:composition>