<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:custom="http://java.sun.com/jsf/composite/custom">
    <style>
        input[type="submit"].anchorLike{
            padding: 0;
            outline: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
            color: #234175;
            text-decoration: none;
            font-weight: normal;
        }
        input[type="submit"].anchorLike:hover{         
            color: #D69C22;
            text-decoration: underline;
            border: 1px solid #999999;
        }

    </style>

    <p:panel id="workLocationsPanel" header="Work Locations" >
        <h:panelGrid styleClass="recordDetailsPanels">
            <ui:include src="/WEB-INF/fragments/noresult.xhtml">
                <ui:param name="text" value="work locations"/>
                <ui:param name="field" value="workLocationList"/>
                <ui:param name="records" value="#{viewProviderManager.providerDetails.workLocationList}"/>
                <ui:param name="result" value="#{viewProviderManager.providerDetails}"/>
            </ui:include>
            <ui:repeat var="workLocation" value="#{viewProviderManager.providerDetails.workLocationList}" id="wlRepeat">
                <p:panel id="workLocationPanel" widgetVar="pnl#{workLocation.id}" toggleTitle="Expand/Collapse" toggleable="true" collapsed="#{viewProviderManager.collapsed}">
                    <f:facet name="header" >
                        <h:outputText value="#{workLocation.primaryWorkLocationDetails.name} (#{workLocation.identifier}) (#{workLocation.dataOwnerCode}) #{workLocation.primaryWorkLocationDetails.defaultFlag ? 'Default' : ''}" />
                        <h:outputText style="font-size: 7.5px;" value=" - D(#{workLocation.workLocationDetails.size()}), A(#{workLocation.addresses.size()}), T(#{workLocation.telecommunications.size()}), E.A(#{workLocation.electronicAddresses.size()}), IR(#{workLocation.informationRoutes.size()})" />
                    </f:facet>
                    <h:panelGrid columns="4" cellpadding="2">
                        <h:outputLabel value="Identifier:"/><h:outputText value="#{workLocation.identifier}"/>
                        <h:outputLabel value="DB Created:"/><h:outputText value="#{jsfUtils.formatDate(workLocation.createdDate)}"/>
                        <!-- From Original WL this is all-->
                        <h:outputLabel value="Data Source:"/><h:outputText value="#{workLocation.userChid}"/>
                        <h:outputLabel value="DB Expired:"/><h:outputText value="#{jsfUtils.formatDate(workLocation.invalidatedDate)}"/>
                        <h:outputLabel value="Data Owner Code:"/><h:outputText value="#{workLocation.dataOwnerCode}"/>
                    </h:panelGrid>

                    <p:panel id="wlEntities" styleClass="wl_#{workLocation.id}" >
                        <p:panel id="workLocationWorkLocationDetailsPanel" header="Work Location Details" styleClass="ui-subpanel">
                            <h:panelGrid styleClass="recordDetailsPanels">
                                <ui:include src="/WEB-INF/fragments/noresult.xhtml">
                                    <ui:param name="text" value="Details"/>
                                    <ui:param name="field" value="workLocationDetails"/>
                                    <ui:param name="records" value="#{workLocation.workLocationDetails}"/>
                                    <ui:param name="result" value="#{workLocation}"/>
                                </ui:include>
                                <ui:repeat var="wLocationDetails" value="#{workLocation.workLocationDetails}">
                                    <p:panel id="workLocationDetailsPanel" header="#{wLocationDetails.name}  (#{wLocationDetails.type}) (#{wLocationDetails.dataOwnerCode})"  toggleTitle="Expand/Collapse" toggleable="true" collapsed="#{viewProviderManager.collapsed}" styleClass="ui-subpanel">
                                        <h:panelGrid columns="2" cellpadding="2">
                                            <h:outputLabel value="Name"/><h:outputText value="#{wLocationDetails.name}"/>
                                            <h:outputLabel value="Type"/><h:outputText value="#{wLocationDetails.type}"/>
                                            <h:outputLabel value="Default Flag:"/><h:outputText value="#{wLocationDetails.defaultFlag ? 'Yes' : 'No'}"/>
                                            <h:outputLabel value="Additional Info"/><h:outputText value="#{wLocationDetails.additionalAddresseeInfo}"/>
                                            <h:outputLabel value="Effective From:"/><h:outputText value="#{jsfUtils.formatDate(wLocationDetails.effectiveStartDate)}"/>
                                            <h:outputLabel value="Effective To:"/><h:outputText value="#{jsfUtils.formatDate(wLocationDetails.effectiveEndDate)}"/>
                                            <h:outputLabel value="End Reason:"/><h:outputText value="#{wLocationDetails.endReasonCode}"/>
                                            <h:outputLabel value="Data Source:"/><h:outputText value="#{wLocationDetails.userChid}"/>
                                            <h:outputLabel value="DB Created:"/><h:outputText value="#{jsfUtils.formatDate(wLocationDetails.createdDate)}"/>
                                            <h:outputLabel value="DB Expired:"/><h:outputText value="#{jsfUtils.formatDate(wLocationDetails.invalidatedDate)}"/>
                                            <h:outputLabel value="Data Owner Code:"/><h:outputText value="#{wLocationDetails.dataOwnerCode}"/>
                                        </h:panelGrid>

                                        <f:facet name="actions" >
                                            <custom:activeIcon rendered="#{wLocationDetails.displayActive}" />
                                            <p:commandLink  
                                                id="updateWorkLocationDetailsLink" 
                                                rendered="#{wLocationDetails.updatable and not viewProviderManager.userRoleService.consumer}" 
                                                oncomplete="PF('maintainWorkLocationModal').show()" 
                                                update=":maintainWorkLocationDialog" 
                                                styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default" 
                                                title="Update #{wLocationDetails.type}">
                                                <custom:updateIcon title="Update" />
                                                <f:setPropertyActionListener value="#{wLocationDetails}" target="#{maintainWorkLocationManager.workLocationDetailsDto}" />
                                                <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainWorkLocationManager.providerDetails}" />
                                                <f:setPropertyActionListener value="#{workLocation}" target="#{maintainWorkLocationManager.workLocationDto}" />
                                                <f:setPropertyActionListener value="@(.wl_#{workLocation.id})" target="#{maintainWorkLocationManager.panelToUpdate}" /> 
                                                <p:resetInput target=":maintainWorkLocationForm" />
                                            </p:commandLink>
                                        </f:facet>
                                    </p:panel>
                                </ui:repeat>
                            </h:panelGrid>

                            <f:facet name="actions" >
                                <p:commandLink id="addWorkLocationDetailsLink" 
                                               rendered="#{not viewProviderManager.userRoleService.consumer and workLocation.displayActive and workLocation.workLocationDetails.size() == 0}" 
                                               value="Add" onclick="PF('maintainWorkLocationDetailsModal').show()" 
                                               styleClass="ui-action" title="Add a new Work Location Details for this work location"/>
                            </f:facet>
                        </p:panel>
                        <p:panel id="workLocationAddressesPanel" header="Addresses" styleClass="ui-subpanel" >
                            <h:panelGrid styleClass="recordDetailsPanels">
                                <ui:include src="/WEB-INF/fragments/noresult.xhtml">
                                    <ui:param name="text" value="addresses"/>
                                    <ui:param name="field" value="addresses"/>
                                    <ui:param name="records" value="#{workLocation.addresses}"/>
                                    <ui:param name="result" value="#{workLocation}"/>
                                </ui:include>
                                <ui:repeat var="address" value="#{workLocation.addresses}" id="wlAddressRepeat">
                                    <p:panel id="wlAddressPanel" header="#{address.addressLineOne} #{address.city}, #{address.provinceOrStateTxt} (#{address.type}) (#{address.communicationPurpose}) (#{address.dataOwnerCode})" toggleTitle="Expand/Collapse" toggleable="true" collapsed="#{viewProviderManager.collapsed}" styleClass="ui-subpanel" >
                                        <h:panelGrid columns="2" cellpadding="2">
                                            <h:outputLabel value="Validation Status:" rendered="#{address.validationStatus != null or address.validationStatus.length() > 0}"/><h:outputText value="#{address.validationStatusDesc} (#{address.validationStatus})" rendered="#{address.validationStatus != null or address.validationStatus.length() > 0}"/>
                                            <h:outputLabel value="Address Type:"/><h:outputText value="#{address.type} (#{address.typeCode})"/>
                                            <h:outputLabel value="Address Purpose:"/><h:outputText value="#{address.communicationPurpose} (#{address.communicationPurposeCode})"/>
                                            <h:outputLabel value="Address Line 1:"/><h:outputText value="#{address.addressLineOne}"/>
                                            <h:outputLabel value="Address Line 2:"/><h:outputText value="#{address.addressLineTwo}"/>
                                            <h:outputLabel value="Address Line 3:"/><h:outputText value="#{address.addressLineThree}"/>
                                            <h:outputLabel value="City:"/><h:outputText value="#{address.city}"/>
                                            <h:outputLabel value="State/Prov:"/><h:outputText value="#{address.provinceOrStateTxt}"/>
                                            <h:outputLabel value="Postal/Zip Code:"/><h:outputText value="#{address.postalCode}"/>
                                            <h:outputLabel value="Country:"/><h:outputText value="#{address.country} (#{address.countryCode})"/>
                                            <h:outputLabel value="Effective From:"/><h:outputText value="#{jsfUtils.formatDate(address.effectiveStartDate)}"/>
                                            <h:outputLabel value="Effective To:"/><h:outputText value="#{jsfUtils.formatDate(address.effectiveEndDate)}"/>
                                            <h:outputLabel value="End Reason:"/><h:outputText value="#{address.endReasonCode}"/>
                                            <h:outputLabel value="Data Source:"/><h:outputText value="#{address.userChid}"/>
                                            <h:outputLabel value="DB Created:"/><h:outputText value="#{jsfUtils.formatDate(address.createdDate)}"/>
                                            <h:outputLabel value="DB Expired:"/><h:outputText value="#{jsfUtils.formatDate(address.invalidatedDate)}"/>
                                            <h:outputLabel value="Data Owner Code:"/><h:outputText value="#{address.dataOwnerCode}"/>
                                        </h:panelGrid>

                                        <f:facet name="actions" >
                                            <custom:activeIcon rendered="#{address.displayActive}" />
                                            
                                            <p:commandLink 
                                                action="#{addressSupportManager.refreshDropDownsGroup1(address.countryId)}"
                                                id="updateWLAddressLink" rendered="#{workLocation.active  and address.updatable and not viewProviderManager.userRoleService.consumer}" 
                                                oncomplete="PF('maintainAddressModal').show()"
                                                update=":maintainAddressDialog, :modalMessages, :addrValidDlgId, :workLocationsPanel, :addrInvalidNoCorrectionsDlgId, :@(.wl_#{workLocation.id})" 
                                                styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"
                                                title="Update #{address.type}" >
                                                <custom:updateIcon title="Update #{address.type}" />
                                                <f:setPropertyActionListener value="#{workLocation.id}" target="#{maintainAddressManager.workLocationId}" />
                                                <f:setPropertyActionListener value="#{address}" target="#{maintainAddressManager.addressDto}" />
                                                <f:setPropertyActionListener value="#{workLocation.addresses}" target="#{maintainAddressManager.addresses}" />
                                                <f:setPropertyActionListener value="@(.wl_#{workLocation.id})" target="#{maintainAddressManager.panelToUpdate}" /> 
                                                <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainAddressManager.providerDetails}" />
                                                <f:setPropertyActionListener value="#{viewProviderManager.providerDetails.pauthId}" target="#{maintainAddressManager.pauthId}" />
                                                <p:resetInput target=":maintainAddressForm" />
                                            </p:commandLink>
                                        </f:facet>
                                    </p:panel>
                                </ui:repeat>
                            </h:panelGrid>
                            <f:facet name="actions" >
                                <p:commandLink 
                                    id="addAddressLink" 
                                    rendered="#{workLocation.displayActive and not viewProviderManager.userRoleService.consumer}" 
                                    process="@this" actionListener="#{maintainAddressManager.init()}" 
                                    update=":maintainAddressDialog, :addrValidDlgId, :workLocationsPanel, :addrInvalidNoCorrectionsDlgId" oncomplete="PF('maintainAddressModal').show();"
                                    styleClass="ui-action" title="Add a new Address for this work location" >
                                    <custom:addIcon title="Add a new Address" />
                                    <f:setPropertyActionListener value="#{workLocation.id}" target="#{maintainAddressManager.workLocationId}" />
                                    <f:setPropertyActionListener value="#{workLocation.addresses}" target="#{maintainAddressManager.addresses}" />
                                    <f:setPropertyActionListener value=":workLocationsPanel" target="#{maintainAddressManager.panelToUpdate}" /> 
                                    <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainAddressManager.providerDetails}" />
<!--                                    <f:setPropertyActionListener value="#{viewProviderManager.providerDetails.pauthId}" target="#{maintainAddressManager.pauthId}" />-->
                                    <f:actionListener binding="#{addressSupportManager.refreshDropDownsGroup1(maintainAddressManager.addressDto.countryId)}" />
                                    <p:resetInput target=":maintainAddressForm" />
                                </p:commandLink>
                            </f:facet>
                        </p:panel>
                        <p:panel id="workLocationTelecommunicationsPanel" header="Telecommunications" styleClass="ui-subpanel" >
                            <h:panelGrid styleClass="recordDetailsPanels">
                                <ui:include src="/WEB-INF/fragments/noresult.xhtml">
                                    <ui:param name="text" value="telecommunications"/>
                                    <ui:param name="field" value="telecommunications"/>
                                    <ui:param name="records" value="#{workLocation.telecommunications}"/>
                                    <ui:param name="result" value="#{workLocation}"/>
                                </ui:include>
                                <ui:repeat var="telecom" value="#{workLocation.telecommunications}">
                                    <p:panel id="telecommunicationPanel" header="#{telecom.areaCode} #{telecom.number} #{telecom.extension} (#{telecom.type}) (#{telecom.communicationPurpose}) (#{telecom.dataOwnerCode})" toggleTitle="Expand/Collapse" toggleable="true" collapsed="#{viewProviderManager.collapsed}" styleClass="ui-subpanel" >
                                        <h:panelGrid columns="2" cellpadding="2">
                                            <h:outputLabel value="Type:"/><h:outputText value="#{telecom.type} (#{telecom.typeCode})"/>
                                            <h:outputLabel value="Purpose:"/><h:outputText value="#{telecom.communicationPurpose} (#{telecom.communicationPurposeCode})"/>
                                            <h:outputLabel value="Area Code:"/><h:outputText value="#{telecom.areaCode}"/>
                                            <h:outputLabel value="Number:"/><h:outputText value="#{telecom.number}"/>
                                            <h:outputLabel value="Extension:"/><h:outputText value="#{telecom.extension}"/>
                                            <h:outputLabel value="Effective From:"/><h:outputText value="#{jsfUtils.formatDate(telecom.effectiveStartDate)}"/>
                                            <h:outputLabel value="Effective To:"/><h:outputText value="#{jsfUtils.formatDate(telecom.effectiveEndDate)}"/>
                                            <h:outputLabel value="End Reason:"/><h:outputText value="#{telecom.endReasonCode}"/>
                                            <h:outputLabel value="Data Source:"/><h:outputText value="#{telecom.userChid}"/>
                                            <h:outputLabel value="DB Created:"/><h:outputText value="#{jsfUtils.formatDate(telecom.createdDate)}"/>
                                            <h:outputLabel value="DB Expired:"/><h:outputText value="#{jsfUtils.formatDate(telecom.invalidatedDate)}"/>
                                            <h:outputLabel value="Data Owner Code:"/><h:outputText value="#{telecom.dataOwnerCode}"/>
                                        </h:panelGrid>

                                        <f:facet name="actions" >
                                            <custom:activeIcon rendered="#{telecom.displayActive}" />
                                            <p:commandLink  
                                                id="updateTelecomLink" 
                                                rendered="#{workLocation.active and telecom.updatable and not viewProviderManager.userRoleService.consumer}" 
                                                oncomplete="PF('maintainTelecomModal').show()" 
                                                update=":maintainTelecomDialog" 
                                                styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default" 
                                                title="Update #{telecom.type}">
                                                <custom:updateIcon title="Update #{telecom.type}" />
                                                <f:setPropertyActionListener value="#{workLocation.id}" target="#{maintainTelephoneManager.workLocationId}" />
                                                <f:setPropertyActionListener value="#{telecom}" target="#{maintainTelephoneManager.telephoneDto}" />
                                                <f:setPropertyActionListener value="#{workLocation.telecommunications}" target="#{maintainTelephoneManager.telephones}" />
                                                <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainTelephoneManager.providerDetails}" />
                                                <f:setPropertyActionListener value="@(.wl_#{workLocation.id})" target="#{maintainTelephoneManager.panelToUpdate}" /> 
                                                <p:resetInput target=":maintainTelecomForm" />
                                            </p:commandLink>
                                        </f:facet>
                                    </p:panel>
                                </ui:repeat>
                            </h:panelGrid>        
                            <f:facet name="actions" >
                                <p:commandLink 
                                    id="addTelecomLink"  
                                    rendered="#{workLocation.displayActive and not viewProviderManager.userRoleService.consumer}" 
                                    process="@this"
                                    actionListener="#{maintainTelephoneManager.init()}"
                                    update=":maintainTelecomDialog"
                                    oncomplete="PF('maintainTelecomModal').show();"
                                    styleClass="ui-action" 
                                    title="Add a new Telecommunication for this work location" >
                                    <custom:addIcon title="Add a new Telecommunication" />
                                    <f:setPropertyActionListener value="#{workLocation.id}" target="#{maintainTelephoneManager.workLocationId}" />
                                    <f:setPropertyActionListener value="#{workLocation.telecommunications}" target="#{maintainTelephoneManager.telephones}" />
                                    <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainTelephoneManager.providerDetails}" />
                                    <f:setPropertyActionListener value=":workLocationsPanel" target="#{maintainTelephoneManager.panelToUpdate}" />
                                    <f:setPropertyActionListener value="true" target="#{maintainTelephoneManager.isWorkLocTelecom}" />
                                    <p:resetInput target=":maintainTelecomForm" />
                                </p:commandLink>
                            </f:facet>                                
                        </p:panel>
                        <p:panel id="workLocationElectronicAddressesPanel" header="Electronic Addresses" styleClass="ui-subpanel" >
                            <h:panelGrid styleClass="recordDetailsPanels">
                                <ui:include src="/WEB-INF/fragments/noresult.xhtml">
                                    <ui:param name="text" value="electronic addresses"/>
                                    <ui:param name="field" value="electronicAddresses"/>
                                    <ui:param name="records" value="#{workLocation.electronicAddresses}"/>
                                    <ui:param name="result" value="#{workLocation}"/>
                                </ui:include>
                                <ui:repeat var="eAddress" value="#{workLocation.electronicAddresses}">
                                    <p:panel id="eAddressPanel" header="#{eAddress.address} (#{eAddress.type}) (#{eAddress.communicationPurpose}) (#{eAddress.dataOwnerCode})" toggleTitle="Expand/Collapse" toggleable="true" collapsed="#{viewProviderManager.collapsed}" styleClass="ui-subpanel" >
                                        <h:panelGrid columns="2" cellpadding="2">
                                            <h:outputLabel value="Type:"/><h:outputText value="#{eAddress.type} (#{eAddress.typeCode})"/>
                                            <h:outputLabel value="Purpose:"/><h:outputText value="#{eAddress.communicationPurpose} (#{eAddress.communicationPurposeCode})"/>
                                            <h:outputLabel value="Address:"/><h:outputText value="#{eAddress.address}"/>
                                            <h:outputLabel value="Effective From:"/><h:outputText value="#{jsfUtils.formatDate(eAddress.effectiveStartDate)}"/>
                                            <h:outputLabel value="Effective To:"/><h:outputText value="#{jsfUtils.formatDate(eAddress.effectiveEndDate)}"/>
                                            <h:outputLabel value="End Reason:"/><h:outputText value="#{eAddress.endReasonCode}"/>
                                            <h:outputLabel value="Data Source:"/><h:outputText value="#{eAddress.userChid}"/>
                                            <h:outputLabel value="DB Created:"/><h:outputText value="#{jsfUtils.formatDate(eAddress.createdDate)}"/>
                                            <h:outputLabel value="DB Expired:"/><h:outputText value="#{jsfUtils.formatDate(eAddress.invalidatedDate)}"/>
                                            <h:outputLabel value="Data Owner Code:"/><h:outputText value="#{eAddress.dataOwnerCode}"/>
                                        </h:panelGrid>

                                        <f:facet name="actions" >
                                            <custom:activeIcon rendered="#{eAddress.displayActive}" />
                                            <p:commandLink  
                                                id="updateWLAddressLink" 
                                                rendered="#{workLocation.active and eAddress.updatable and not viewProviderManager.userRoleService.consumer}" 
                                                oncomplete="PF('maintainEAddressModal').show()"
                                                update=":maintainElectronicAddressDialog" 
                                                styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default" 
                                                title="Update #{eAddress.type}">
                                                <custom:updateIcon title="Update #{eAddress.type}" />
                                                <f:setPropertyActionListener value="#{workLocation.id}" target="#{maintainElectronicAddressManager.workLocationId}" />
                                                <f:setPropertyActionListener value="#{workLocation.electronicAddresses}" target="#{maintainElectronicAddressManager.addresses}" />
                                                <f:setPropertyActionListener value="#{eAddress}" target="#{maintainElectronicAddressManager.addressDto}" />
                                                <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainElectronicAddressManager.providerDetails}" />
                                                <f:setPropertyActionListener value="@(.wl_#{workLocation.id})" target="#{maintainElectronicAddressManager.panelToUpdate}" />  
                                                <p:resetInput target=":maintainElectronicAddressForm" />
                                            </p:commandLink>
                                        </f:facet>
                                    </p:panel>
                                </ui:repeat>
                            </h:panelGrid>        
                            <f:facet name="actions" >
                                <p:commandLink 
                                    id="addEAddressLink" 
                                    rendered="#{workLocation.displayActive and not viewProviderManager.userRoleService.consumer}" 
                                    process="@this" 
                                    actionListener="#{maintainElectronicAddressManager.init()}"
                                    update=":maintainElectronicAddressDialog" 
                                    oncomplete="PF('maintainEAddressModal').show();" 
                                    styleClass="ui-action"
                                    title="Add a new Electronic Address for this work location" >
                                    <custom:addIcon title="Add a new Electronic Address" />
                                    <f:setPropertyActionListener value="#{workLocation.id}" target="#{maintainElectronicAddressManager.workLocationId}" />
                                    <f:setPropertyActionListener value="#{workLocation.electronicAddresses}" target="#{maintainElectronicAddressManager.addresses}" />
                                    <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainElectronicAddressManager.providerDetails}" />
                                    <f:setPropertyActionListener value=":workLocationsPanel" target="#{maintainElectronicAddressManager.panelToUpdate}" /> 
                                    <p:resetInput target=":maintainElectronicAddressForm" />
                                </p:commandLink>
                            </f:facet>
                        </p:panel>
                        <p:panel id="workLocationInformationRoutesPanel" header="Communication Preference" styleClass="ui-subpanel" >
                            <h:panelGrid styleClass="recordDetailsPanels">
                                <ui:include src="/WEB-INF/fragments/noresult.xhtml">
                                    <ui:param name="text" value="communication preference"/>
                                    <ui:param name="field" value="informationRoutes"/>
                                    <ui:param name="records" value="#{workLocation.informationRoutes}"/>
                                    <ui:param name="result" value="#{workLocation}"/>
                                </ui:include>
                                <ui:repeat var="informationRoute" value="#{workLocation.informationRoutes}">
                                    <p:panel id="informationRoutePanel" header="(#{informationRoute.documentTypeCode}) (#{informationRoute.dataOwnerCode})" toggleTitle="Expand/Collapse" toggleable="true" collapsed="#{viewProviderManager.collapsed}" styleClass="ui-subpanel" >
                                        <h:panelGrid columns="2" cellpadding="2">
                                            <h:outputLabel value="Work Location Identifier:"/><h:outputText value="#{informationRoute.workLocationIdentifier}"/>
                                            <h:outputLabel value="Content Type:"/><h:outputText value="#{informationRoute.documentType} (#{informationRoute.documentTypeCode})"/>
                                            <h:outputLabel value="Address Type:"/><h:outputText value="#{informationRoute.addressDto.type} (#{informationRoute.addressDto.typeCode})"/>
                        <h:outputLabel value="Telecommunication Number Type:"/><h:outputText value="#{informationRoute.telecommunicationDto.type} (#{informationRoute.telecommunicationDto.typeCode})"/>
                        <h:outputLabel value="Electronic Address Type:"/><h:outputText value="#{informationRoute.electronicAddressDto.type} (#{informationRoute.electronicAddressDto.typeCode})"/>
                                            <h:outputLabel value="Communication Purpose:"/><h:outputText value="#{informationRoute.communicationPurpose} (#{informationRoute.communicationPurposeCode})"/>
                                            <h:outputLabel value="Communication Data Owner Code:"/><h:outputText value="#{informationRoute.communicationDataOwnerCode}"/>
                                            <h:outputLabel value="Effective From:"/><h:outputText value="#{jsfUtils.formatDate(informationRoute.effectiveStartDate)}"/>
                                            <h:outputLabel value="Effective To:"/><h:outputText value="#{jsfUtils.formatDate(informationRoute.effectiveEndDate)}"/>
                                            <h:outputLabel value="End Reason:"/><h:outputText value="#{informationRoute.endReasonCode}"/>
                                            <h:outputLabel value="Data Source:"/><h:outputText value="#{informationRoute.userChid}"/>
                                            <h:outputLabel value="DB Created:"/><h:outputText value="#{jsfUtils.formatDate(informationRoute.createdDate)}"/>
                                            <h:outputLabel value="DB Expired:"/><h:outputText value="#{jsfUtils.formatDate(informationRoute.invalidatedDate)}"/>
                                            <h:outputLabel value="Data Owner Code:"/><h:outputText value="#{informationRoute.dataOwnerCode}"/>
                                        </h:panelGrid>

                                        <f:facet name="actions" >
                                            <custom:activeIcon rendered="#{informationRoute.displayActive}" />
                                            <p:commandLink 
                                                id="updateInformationRouteLink" 
                                                rendered="#{workLocation.active  and informationRoute.updatable and not viewProviderManager.userRoleService.consumer}" 
                                                oncomplete="PF('maintainInfoRouteModal').show()"
                                                update=":maintainInfoRouteDialog">
                                                <custom:updateIcon title="Update #{informationRoute.type}" />
                                                <f:setPropertyActionListener value="#{informationRoute}" target="#{maintainInformationRouteManager.dto}" />
                                                <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainInformationRouteManager.providerDetails}" />
                                                <f:setPropertyActionListener value="#{workLocation}" target="#{maintainInformationRouteManager.workLocation}"/>
                                                <f:setPropertyActionListener value="@(.wl_#{workLocation.id})" target="#{maintainInformationRouteManager.panelToUpdate}" />  
                                                <p:resetInput target=":maintainInfoRouteForm" />
                                            </p:commandLink>
                                        </f:facet>
                                    </p:panel>
                                </ui:repeat>
                            </h:panelGrid> 
                            <f:facet name="actions" >
                                <p:commandLink 
                                    id="wlIRAdd" 
                                    rendered="#{workLocation.displayActive and not viewProviderManager.userRoleService.consumer}" 
                                    process="@this" 
                                    actionListener="#{maintainInformationRouteManager.resetDto()}" 
                                    update=":maintainInfoRouteDialog" 
                                    oncomplete="PF('maintainInfoRouteModal').show()">
                                    <custom:addIcon title="Add a new Communication Preference" />
                                    <f:setPropertyActionListener value="#{workLocation}" target="#{maintainInformationRouteManager.workLocation}"/>
                                    <!--<f:setPropertyActionListener value="{viewProviderManager.providerDetails}" target="{maintainInformationRouteManager.providerDetails}"/>-->
                                    <f:setPropertyActionListener value=":workLocationsPanel"  target="#{maintainInformationRouteManager.panelToUpdate}" /> 
                                    <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainInformationRouteManager.providerDetails}" />
                                    <p:resetInput target=":maintainInfoRouteForm" />
                                </p:commandLink>
                            </f:facet>

                        </p:panel>

                    </p:panel>
                    <f:facet name="actions">
                        <h:panelGroup styleClass="rightAlign" rendered="#{workLocation.displayActive}" >
                            <custom:activeIcon/>
                        </h:panelGroup>
                    </f:facet>
                </p:panel>
            </ui:repeat>
        </h:panelGrid>        
        <f:facet name="actions" >
            <p:commandLink 
                process="@this"
                actionListener="#{maintainWorkLocationManager.resetDto()}" 
                update=":maintainWorkLocationDialog" 
                oncomplete="PF('maintainWorkLocationModal').show()"
                rendered="#{not viewProviderManager.userRoleService.consumer}">
                <custom:addIcon title="Add a new Work Location" />
                <f:setPropertyActionListener value="#{viewProviderManager.providerDetailsCopy}" target="#{maintainWorkLocationManager.providerDetails}" />
                <f:setPropertyActionListener value=":workLocationsPanel" target="#{maintainWorkLocationManager.panelToUpdate}" /> 
                <p:resetInput target=":maintainWorkLocationForm" />
            </p:commandLink>
        </f:facet>
    </p:panel>   

</ui:composition>