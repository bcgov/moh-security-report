<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >
    <p:dialog id="maintainWorkLocationDialog" 
              header="#{maintainWorkLocationManager.workLocationDetailsDto.new ? 'Add' : 'Update'} Work Location Details" 
              widgetVar="maintainWorkLocationModal" 
              modal="true" draggable="false" 
              closeOnEscape="true" resizable="false" fitViewport="true" width="330" height="555">
        <h:form id="maintainWorkLocationForm">
		
			<p:messages id="messages" showDetail="false" closable="true" >
				<p:autoUpdate disabled="false"/>
			</p:messages>
			
            <div class="frmDialogLbl">
                <p:outputLabel for="wlChid" value="Work Location ID"/>
                <h:graphicImage id="helpFirst" value="/images/help.png" />
                <p:tooltip for="helpFirst" value="A work location ID will be generated if you don't provide one." />
            </div>            
            <p:inputText id="wlChid" value="#{maintainWorkLocationManager.workLocationDto.identifier}" style="display: block" 
                         rendered="#{maintainWorkLocationManager.workLocationDetailsDto.new}"
                         converterMessage="#{val['error.long.worklocation']}" />
            <h:outputText value="#{maintainWorkLocationManager.workLocationDto.identifier}" rendered="#{! maintainWorkLocationManager.workLocationDetailsDto.new}"/>
            
            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Default Flag"/>
                <ui:param name="for" value="defaultFlag"/>
            </ui:include>
            <p:selectBooleanCheckbox id="defaultFlag" value="#{maintainWorkLocationManager.workLocationDetailsDto.defaultFlag}"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Name"/>
                <ui:param name="for" value="name"/>
            </ui:include>
            <p:inputText id="name" value="#{maintainWorkLocationManager.workLocationDetailsDto.name}" required="true" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Type"/>
                <ui:param name="for" value="providerType"/>
            </ui:include>
            <p:selectOneMenu id="providerType" value="#{maintainWorkLocationManager.workLocationDetailsDto.typeId}" required="true">
                <f:selectItems value="#{Droplists.prsCtWorkLocationPurps}" />
            </p:selectOneMenu>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Additional Address Info"/>
                <ui:param name="for" value="additionalInfo"/>
            </ui:include>
            <p:inputTextarea id="additionalInfo" value="#{maintainWorkLocationManager.workLocationDetailsDto.additionalAddresseeInfo}" />

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="End Reason"/>
                <ui:param name="for" value="EndReasonType"/>
                <ui:param name="rendered" value="#{!maintainWorkLocationManager.workLocationDetailsDto.new}"/>
            </ui:include>
            <p:selectOneMenu id="EndReasonType" rendered="#{!maintainWorkLocationManager.workLocationDetailsDto.new}" value="#{maintainWorkLocationManager.workLocationDetailsDto.endReasonCodeId}" required="true" >
                <f:selectItems value="#{Droplists.grsCtEndReasonTypes}" />
            </p:selectOneMenu>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective From"/>
                <ui:param name="for" value="effectiveFromDate"/>
            </ui:include>
            <p:calendar id="effectiveFromDate" value="#{maintainWorkLocationManager.workLocationDetailsDto.effectiveStartDate}" required="true" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="effectiveFromDate"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective To"/>
                <ui:param name="for" value="effectiveToDate"/>
            </ui:include>
            <p:calendar id="effectiveToDate" value="#{maintainWorkLocationManager.workLocationDetailsDto.effectiveEndDate}" required="false" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="effectiveToDate"/>

            <div class="formControls">
                <p:commandButton id="idWLSubmitButton" value="#{maintainWorkLocationManager.workLocationDetailsDto.new ? 'Create' : 'Update'}" actionListener="#{maintainWorkLocationManager.save()}" oncomplete="if (args &amp;&amp; !args.validationFailed) PF('maintainWorkLocationModal').hide();return false;" update=":maintainWorkLocationForm, :workLocationsPanel" />
                <p:ajaxStatus style="display:inline-block">
                    <f:facet name="start"><h:graphicImage value="/resources/Spinner.gif"/></f:facet>
                    <f:facet name="complete"><h:outputText value="" /></f:facet>                     
                </p:ajaxStatus>    
                <a href="#" onclick="PF('maintainWorkLocationModal').hide();
                        return false;">Cancel</a>
            </div>
        </h:form>
    </p:dialog>
</ui:composition>