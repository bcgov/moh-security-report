<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >
    <style>
        .ui-chkbox .ui-chkbox-box {
            background: white;
        }
    </style>
    <p:dialog id="maintainPersonNameDialog" 
              header="#{maintainPersonNameManager.dto.new ? 'Add' : 'Update'} Name" 
              widgetVar="maintainPersonNameModal" modal="true" draggable="false" 
              closeOnEscape="true" resizable="false" fitViewport="true" width="275" height="645">
        <h:form id="maintainPersonNameForm">
			<p:messages id="messages" showDetail="false" closable="true" >
				<p:autoUpdate disabled="false"/>
			</p:messages>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Type"/>
                <ui:param name="for" value="type"/>
            </ui:include>
            <ui:include src="/WEB-INF/fragments/type.xhtml">
                <ui:param name="isNew" value="#{maintainPersonNameManager.dto.new}"/>
                <ui:param name="id" value="type"/>
                <ui:param name="value" value="#{maintainPersonNameManager.dto.typeId}"/>
                <ui:param name="selectValues" value="#{Droplists.prsCtPersonNameTypes}"/>
            </ui:include> 
            
            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Prefix"/>
                <ui:param name="for" value="prefix"/>
                <ui:param name="tip" value="Name Prefix must only contain spaces, ', -, ., and the English alphabet."/>
            </ui:include>
            <p:inputText value="#{maintainPersonNameManager.dto.prefix}" id="prefix" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="First Name"/>
                <ui:param name="for" value="firstName"/>
                <ui:param name="tip" value="Names must only contain spaces, ', -, ., and the English alphabet."/>
            </ui:include>
            <p:inputText value="#{maintainPersonNameManager.dto.firstName}" id="firstName" required="true" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Second Name"/>
                <ui:param name="for" value="secondName"/>
                <ui:param name="tip" value="Names must only contain spaces, ', -, ., and the English alphabet."/>
            </ui:include>
            <p:inputText value="#{maintainPersonNameManager.dto.secondName}" id="secondName" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Third Name"/>
                <ui:param name="for" value="thirdName"/>
                <ui:param name="tip" value="Names must only contain spaces, ', -, ., and the English alphabet."/>
            </ui:include>
            <p:inputText value="#{maintainPersonNameManager.dto.thirdName}" id="thirdName" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Surname"/>
                <ui:param name="for" value="surname"/>
                <ui:param name="tip" value="Names must only contain spaces, ', -, ., and the English alphabet."/>
            </ui:include>
            <p:inputText value="#{maintainPersonNameManager.dto.lastName}" id="surname" required="true" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Suffix"/>
                <ui:param name="for" value="suffix"/>
                <ui:param name="tip" value="Name Suffix must only contain spaces, ', -, ., and the English alphabet."/>
            </ui:include>
            <p:inputText value="#{maintainPersonNameManager.dto.suffix}" id="suffix" styleClass="zeroMargin"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="End Reason"/>
                <ui:param name="for" value="EndReasonType"/>
                <ui:param name="rendered" value="#{!maintainPersonNameManager.dto.new}"/>
            </ui:include>
            <p:selectOneMenu id="EndReasonType" 
                             value="#{maintainPersonNameManager.dto.endReasonCodeId}" 
                             required="true"
                             rendered ="#{!maintainPersonNameManager.dto.new}">
                <f:selectItems value="#{Droplists.grsCtEndReasonTypes}"/>
            </p:selectOneMenu>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective From"/>
                <ui:param name="for" value="effectiveStartDate"/>
            </ui:include>
            <p:calendar id="effectiveStartDate" value="#{maintainPersonNameManager.dto.effectiveStartDate}" showOn="button" navigator="true" size="11" required="true" />
            <p:watermark value="1980-06-30" for="effectiveStartDate"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective To"/>
                <ui:param name="for" value="effectiveEndDate"/>
            </ui:include>
            <p:calendar id="effectiveEndDate" value="#{maintainPersonNameManager.dto.effectiveEndDate}" showOn="button" navigator="true" size="11" />
            <p:watermark value="1980-06-30" for="effectiveEndDate"/>

            <div class="formControls">
                <p:commandButton id="personNameSubmitButton" 
                                 value="#{maintainPersonNameManager.dto.new ? 'Create' : 'Update'}" 
                                 actionListener="#{maintainPersonNameManager.save}" 
                                 oncomplete="if (args &amp;&amp; !args.validationFailed) PF('maintainPersonNameModal').hide()" 
                                 update=":maintainPersonNameForm, :nameIndPanel, :modalMessages, :headerGroup" />
                <p:ajaxStatus style="display:inline-block">
                    <f:facet name="start"><h:graphicImage value="/resources/Spinner.gif"/></f:facet>
                    <f:facet name="complete"><h:outputText value="" /></f:facet>                     
                </p:ajaxStatus>    
                <a href="#" onclick="PF('maintainPersonNameModal').hide();
                        return false;">Cancel</a>
            </div>
        </h:form>
    </p:dialog> 

</ui:composition>