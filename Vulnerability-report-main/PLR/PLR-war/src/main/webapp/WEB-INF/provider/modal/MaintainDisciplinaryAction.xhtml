<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >

    <p:dialog id="maintainDisActionDialog" 
              header="#{maintainDisciplinaryActionManager.disciplinaryActionDto.new ? 'Add' : 'Update'} Disciplinary Action"
              widgetVar="maintainDisActionModal" modal="true" draggable="false" 
              closeOnEscape="true" resizable="false" fitViewport="true" width="425" height="615">
        <h:form id="maintainDisActionForm">
		
			<p:messages id="messages" showDetail="false" closable="true" >
				<p:autoUpdate disabled="false"/>
			</p:messages>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Action Identifier"/>
                <ui:param name="for" value="Identifier"/>
            </ui:include>
            <ui:include src="/WEB-INF/fragments/identifier.xhtml">
                <ui:param name="id" value="Identifier"/>
                <ui:param name="value" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.identifier}"/>
                <ui:param name="required" value="false"/>
                <ui:param name="isNew" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.new}"/>
            </ui:include>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Display"/>
                <ui:param name="for" value="display"/>
            </ui:include>
            <p:selectBooleanCheckbox id="display" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.displayFlag}"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Description"/>
                <ui:param name="for" value="description"/>
            </ui:include>
            <p:inputTextarea id="description" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.description}" required="true" rows="10" cols="40" autoResize="false"/>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Archive Date"/>
                <ui:param name="for" value="archiveDate"/>
            </ui:include>
            <p:calendar id="archiveDate" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.archiveDate}" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="archiveDate"/>

            <ui:fragment rendered ="#{!maintainDisciplinaryActionManager.disciplinaryActionDto.new}">
                <ui:include src="/WEB-INF/fragments/label.xhtml">
                    <ui:param name="text" value="End Reason"/>
                    <ui:param name="for" value="EndReasonType"/>
                </ui:include>
                <p:selectOneMenu id="EndReasonType" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.endReasonCodeId}" required="true" >
                    <f:selectItems value="#{Droplists.grsCtEndReasonTypes}" />
                </p:selectOneMenu>
            </ui:fragment>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective From"/>
                <ui:param name="for" value="effectiveFromDate"/>
            </ui:include>
            <p:calendar id="effectiveFromDate" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.effectiveStartDate}" required="true" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="effectiveFromDate"/>


            <!-- TODO only display effectiveToDate to RegAdmin -->
            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Effective To"/>
                <ui:param name="for" value="effectiveToDate"/>
            </ui:include>
            <p:calendar id="effectiveToDate" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.effectiveEndDate}" required="false" showOn="button" navigator="true" size="11" pattern="dd-MMM-yyyy" />
            <p:watermark value="1980-06-30" for="effectiveToDate"/>


            <div class="formControls">
                <p:commandButton id="idSubmitButton" value="#{maintainDisciplinaryActionManager.disciplinaryActionDto.new ? 'Create' : 'Update'}" actionListener="#{maintainDisciplinaryActionManager.save}" oncomplete="if (args &amp;&amp; !args.validationFailed) PF('maintainDisActionModal').hide()" update=":maintainDisActionForm, :disciplinaryActionsPanel, :modalMessages" />
                <p:ajaxStatus style="display:inline-block">
                    <f:facet name="start"><h:graphicImage value="/resources/Spinner.gif"/></f:facet>
                    <f:facet name="complete"><h:outputText value="" /></f:facet>                     
                </p:ajaxStatus>    
                <a href="#" onclick="PF('maintainDisActionModal').hide();
                        return false;">Cancel</a>
            </div>
        </h:form>
    </p:dialog>
</ui:composition>