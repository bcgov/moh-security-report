<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"                
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:richext="http://java.sun.com/jsf/composite/richext">
    <p:panel>
        <f:facet name="header">
            <h:outputText value="#{msg['AddDeliverySite.site.location']}"/>
        </f:facet>
        <table cellpadding="2" cellspacing="0">
            <!-- Display DS Id field only if we are updating an existing site-->
            <tr>
                <td class="label">
                    <h:outputText id="dsIdStaging" value="#{msg['UpdateDeliverySite.site.location.ds.id']}" rendered="#{action == 'update'}"/>
                </td>
                <td colspan="3">
                    <h:outputText value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.identifierNo}" rendered="#{action == 'update'}"/>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['UpdateDeliverySite.site.location.status']}" rendered="#{action == 'update'}"/>
                </td>
                <td colspan="3">
                    <h:selectOneMenu id="statusStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.statusId.ctlId}" rendered="#{action == 'update'}" required="true" requiredMessage="Status is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.grsActiveInactiveStatuses}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.name']}"/>
                    <span class="required">*</span>
                </td>
                <td colspan="3">
                    <h:inputText id="siteNameStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.deliverySiteNameTxt}" size="#{msg['textfield.larger.size']}" required="true" requiredMessage="Delivery Site name is required." />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.addressLine1']}"/>
                    <span class="required">*</span>
                </td>
                <td colspan="3">
                    <h:inputText id="addressLine1Staging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.addressLine1Txt}" size="#{msg['textfield.larger.size']}" required="true" requiredMessage="Address Line 1 is required." />
                </td>

            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.addressLine2']}"/>
                </td>
                <td colspan="3">
                    <h:inputText id="addressLine2Staging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.addressLine2Txt}" size="#{msg['textfield.larger.size']}" />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.addressLine3']}"/>
                </td>
                <td colspan="3">
                    <h:inputText id="addressLine3Staging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.addressLine3Txt}" size="#{msg['textfield.larger.size']}" />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.addressLine4']}"/>
                </td>
                <td colspan="3">
                    <h:inputText id="addressLine4Staging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.addressLine4Txt}" size="#{msg['textfield.larger.size']}" />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.country']}"/>
                    <span class="required">*</span>
                </td>
                 <td colspan="3">
                    <p:selectOneMenu id="countryStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.countryId.ctlId}" style="width: 400px" required="true" requiredMessage="Country is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.grsCountries}"/>
                        <p:ajax listener="#{DsrWorkLocationsStagingBean.updateProvince}" process="@this" update="provinceStaging" event="change"/>
                    </p:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td class="label">
                     <h:outputText value="#{msg['AddDeliverySite.site.location.province']}"/>
                    <span class="required">*</span>
                </td>
                 <td colspan="3">
                    <p:selectOneMenu id="provinceStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.provinceId.ctlId}" style="width: 400px" required="true" requiredMessage="Province is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrWorkLocationsStagingBean.provinceList}"/>
                    </p:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.city']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:inputText id="cityStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.cityTxt}" size="#{msg['textfield.large.size']}" required="true" requiredMessage="City is required." />
                </td>
                <td class="label" colspan="2" style="text-align: left">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.postalcode']}"/>
                    <span class="required">*</span>
                    <richext:spacer width="5"/>
                    <h:inputText id="postalCodeStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.postalCodeOrZipTxt}" size="#{msg['textfield.medium.size']}" required="true" requiredMessage="Postal Code is required." />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.contact.name']}"/>
                    <span class="required">*</span>
                </td>
                <td colspan="3">
                    <h:inputText id="contactNameStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.contactName}" size="#{msg['textfield.larger.size']}" required="true" requiredMessage="Contact name is required." />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.telephone']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:inputText id="telAreaCodeStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.phoneAreaCodeNum}" size="#{msg['textfield.smallest.size']}" maxlength="3" required="true" requiredMessage="Telephone area code is required." validatorMessage="Telephone area code must be three digits long." >
                        <f:validateLength minimum="3" maximum="3" />
                    </h:inputText>
                    <richext:spacer width="5"/>
                    <h:inputText id="telNoStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.phoneTelecommNmbrNum}" size="#{msg['textfield.small.size']}" maxlength="8" required="true" requiredMessage="Telephone number is required." validatorMessage="Telephone number must be seven digits long and in the format XXX-XXXX." >
                         <f:validateRegex pattern="\d{3}[-]\d{4}" />
                    </h:inputText>
                    <richext:spacer width="5"/>
                    <h:outputText value="#{msg['AddDeliverySite.site.location.telephone.ext']}"/>
                    <h:inputText id="telExtStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.phoneExtensionNum}" size="#{msg['textfield.smallest.size']}" validatorMessage="Only numbers are allowed in telephone ext." >
                         <f:validateRegex pattern="\d*" />
                    </h:inputText>
                </td>
                <td colspan="2">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.fax']}"/>
                    <richext:spacer width="5"/>
                    <h:inputText id="faxAreaCodeStaging" value="#{DsrWorkLocationsStagingBean.faxAreaCode}" size="#{msg['textfield.smallest.size']}" />
                    <richext:spacer width="5"/>
                    <h:inputText id="faxNoStaging" value="#{DsrWorkLocationsStagingBean.faxNumber}" size="#{msg['textfield.small.size']}" />
                    <richext:spacer width="5"/>
                    <h:outputText value="#{msg['AddDeliverySite.site.location.fax.ext']}"/>
                    <h:inputText id="faxExtStaging" value="#{DsrWorkLocationsStagingBean.faxExtensionNumber}" size="#{msg['textfield.smallest.size']}" validatorMessage="Only numbers are allowed in fax ext." >
                         <f:validateRegex pattern="\d*" />
                    </h:inputText>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.email']}"/>
                </td>
                <td colspan="3">
                    <h:inputText id="emailStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.electronicAddressTxt}" size="#{msg['textfield.larger.size']}" />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.startdate']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <p:calendar id="startDateStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.effectiveStartDate}" mode="popup" showOn="button" pattern="dd-MMM-yyyy" required="true" requiredMessage="Start Date is required." />
                    <p:watermark value="1980-06-30" for="startDateStaging"/>
                </td>
                 <td class="label" colspan="2">
                    <h:outputText value="#{msg['AddDeliverySite.site.location.enddate']}"/>
                    <richext:spacer width="5"/>
                    <p:calendar id="endDateStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.effectiveEndDate}" mode="popup" showOn="button" pattern="dd-MMM-yyyy"/>
                    <p:watermark value="1980-06-30" for="endDateStaging"/>
                </td>              
            </tr>
        </table>
    </p:panel>
    <br />
    <p:panel>
        <f:facet name="header">
            <h:outputText value="#{msg['AddDeliverySite.ownership.information']}"/>
        </f:facet>
        <table cellpadding="2" cellspacing="0">
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.ownership.information.legal.owner']}" />
                    <span class="required">*</span>
                </td>
                <td>
                    <h:inputText id="ownerStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.ownerNameTxt}" size="#{msg['textfield.larger.size']}" required="true" requiredMessage="Legal Owner is required." />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.ownership.information.legal.owner.type']}"/>
                    <span class="required">*</span>
                </td>
                <td><h:selectOneMenu id="ownerTypeStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.ownerTypeId.ctlId}" required="true" requiredMessage="Legal Owner Type is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.grsOwnerOperators}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.ownership.information.legal.operator']}"/>
                </td>
                <td>
                    <h:inputText id="operatorStaging" value="#{DsrWorkLocationsStagingBean.operatorName}" size="#{msg['textfield.larger.size']}" />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.ownership.information.legal.operator.type']}"/>
                </td>
                <td><h:selectOneMenu id="operatorTypeStaging" value="#{DsrWorkLocationsStagingBean.operatorType}" >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.grsLegalOperators}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
        </table>
    </p:panel>
    <br/>
    <p:panel>
        <f:facet name="header">
            <h:outputText value="#{msg['AddDeliverySite.additional.information']}"/>
        </f:facet>
        <table cellpadding="2" cellspacing="0">
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.program.area']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:selectOneMenu id="programAreaStaging" value="#{DsrWorkLocationsStagingBean.selectedProgramArea}" valueChangeListener="#{DsrWorkLocationsStagingBean.updateCategory}" required="true" requiredMessage="Program Area is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.dsrProgramAreas}"/>
                        <p:ajax process="@this" update="programCategoryStaging" event="change" async="true"/>
                    </h:selectOneMenu>
                </td>

            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.program.category']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:selectManyListbox id="programCategoryStaging" value="#{DsrWorkLocationsStagingBean.selectedProgramCategories}" required="true" requiredMessage="Program Category is required." >
                        <f:selectItems value="#{DsrWorkLocationsStagingBean.categoryList}"/>
                    </h:selectManyListbox>
                </td>

            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.program.campus']}"/>
                </td>
                <td>
                    <h:inputText id="campusStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.campusOfCareTxt}" size="#{msg['textfield.larger.size']}"/>
                </td>
            </tr>
            <tr>
                <td class="label" >
                    <h:outputLabel for="lhaStaging">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.lha']}" />
                    </h:outputLabel>
                     <span class="required">*</span>
                </td>
                <td>
                    <h:selectOneMenu id="lhaStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.localHealthAreaCd.localHealthAreaCd}" valueChangeListener="#{DsrWorkLocationsStagingBean.updateHsdaAndProvider}" required="true" requiredMessage="Local Health Area is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.allActiveLocalHealthArea}"/>
                        <p:ajax process="@this" update="hsdaStaging,providerOrgStaging" event="change" async="true"/>
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.hsda']}" />
                     <span class="required">*</span>
                </td>
                <td>
                    <h:selectOneMenu id="hsdaStaging" value="#{DsrWorkLocationsStagingBean.dummyHsda}" disabled="true" required="true" requiredMessage="Health Delivery Services Area is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.allActiveHsda}"/>                     
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.provider.organization']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:selectOneMenu id="providerOrgStaging" value="#{DsrWorkLocationsStagingBean.dummyHa}" disabled="true" required="true" requiredMessage="Provider Organization is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.prsOrgNames}"/>
                    </h:selectOneMenu>
                </td>                
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.additional.information.location.type']}" />
                    <span class="required">*</span>
                </td>
                <td>
                    <h:selectOneMenu id="locationTypeStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.workLocationTypeId.ctlId}" required="true" requiredMessage="Location Type is required." >
                        <f:selectItem itemValue="" itemLabel=""/>
                        <f:selectItems value="#{DsrDroplists.grsLocationTypes}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
        </table>
    </p:panel>
    <br/>
    <p:panel>
        <f:facet name="header">
            <h:outputText value="#{msg['AddDeliverySite.submitter.information']}"/>
        </f:facet>
        <table cellpadding="2" cellspacing="0">
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.submitter.information.name']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:inputText id="submitterNameStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.submitterNm}" size="#{msg['textfield.larger.size']}" required="true" requiredMessage="Submitter Name is required." />
                </td>
            </tr>
            <tr>
                <td class="label">
                    <h:outputText value="#{msg['AddDeliverySite.submitter.information.email']}"/>
                    <span class="required">*</span>
                </td>
                <td>
                    <h:inputText id="submitterEmailStaging" value="#{DsrWorkLocationsStagingBean.dsrWorkLocationsStaging.submitterEmailTxt}" size="#{msg['textfield.larger.size']}" required="true" requiredMessage="Submitter Email is required." />
                </td>

            </tr>
        </table>
    </p:panel>
    <div style="text-align: right; margin-top: 10px">
        <ui:include src="/WEB-INF/fragments/Spinner.xhtml"/>
        <!--            Display add new site button only if we are adding a new site-->
        <p:commandButton id="newSiteStagingRequest" value="#{msg['button.submit']}" action="#{DsrWorkLocationsStagingBean.addNewSite}" rendered="#{action == 'add'}" update="@form" ajax="false"/>
        <!--            Display update site button only if we are updating an existing site-->
        <p:commandButton id="updateSiteStagingRequest" value="#{msg['button.submit']}" action="#{DsrWorkLocationsStagingBean.updateSite}" rendered="#{action == 'update'}" update="@form" ajax="false"/>
        <richext:spacer width="10"/>
        <p:commandButton id="clearStaging" value="#{msg['button.clear']}" action="#{DsrWorkLocationsStagingBean.clear}" rendered="#{action == 'add'}" process="@this" update="@form"/>
        <p:commandButton id="cancelStaging" value="#{msg['button.cancel']}" action="#{DsrWorkLocationsStagingBean.canelUpdate}" rendered="#{action == 'update'}" process="@this" update="@form"/>
    </div>
</ui:composition>