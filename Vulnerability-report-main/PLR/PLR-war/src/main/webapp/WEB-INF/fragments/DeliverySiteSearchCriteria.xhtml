<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:richext="http://java.sun.com/jsf/composite/richext">
    <style>
        .searchDropDown{
            width: 400px;
        }
        
        #content tr, td {
            border: 0px;
        }

    </style>
    <p:panel id="searchContainer">
    <table cellpadding="2" cellspacing="0">
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.ds.id']}"/>
            </td>
            <td colspan="3" class="plain">
                <h:inputText value="#{PrsWorkLocationBean.dsId}" size="#{msg['textfield.medium.size']}" />
            </td>
        </tr>     
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.identifier.source']}"/>
            </td>
            <td class="plain">
                <h:selectOneMenu value="#{PrsWorkLocationBean.identifierSource}" styleClass="searchDropDown">
                    <f:selectItem itemValue="" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.dsrSourceSystems}"/>
                </h:selectOneMenu>
            </td>              
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.delivery.site.name']}"/>
            </td>
            <td colspan="3" class="plain">
                <h:inputText value="#{PrsWorkLocationBean.siteName}" size="#{msg['textfield.larger.size']}" />
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndMerge.criteria.delivery.city']}"/>
            </td>
            <td colspan="3" class="plain">
                <h:inputText value="#{PrsWorkLocationBean.cityForSearch}" size="#{msg['textfield.larger.size']}" />
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.provider.organization']}"/>
            </td>
            <td colspan="3" class="plain">
                <h:selectOneMenu value="#{PrsWorkLocationBean.selectedProviderOrganization}" styleClass="searchDropDown">
                    <f:selectItem itemValue="" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.providerOrgNames}"/>
                </h:selectOneMenu>
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.program.area']}"/>
            </td>
            <td  colspan="3" class="plain">
                <h:selectOneMenu value="#{PrsWorkLocationBean.selectedProgramAreaForSearch}" styleClass="searchDropDown">
                    <f:selectItem itemValue="" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.dsrProgramAreas}"/>
                </h:selectOneMenu>
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndMerge.criteria.program.category']}"/>
            </td>
            <td class="plain" colspan="3">
                <h:selectManyListbox id="prgCatSearch" value="#{PrsWorkLocationBean.selectedProgramCategoriesForSearch}"  style="width: 490px; height: 80px">
                    <f:selectItem itemValue="" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.dsrProgramCategories}"/>
                </h:selectManyListbox>
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.record.hsda']}"/>
            </td>
            <td class="plain" colspan="3">
                <h:selectManyListbox id="hsdaSearch" value="#{PrsWorkLocationBean.selectedHsdas}" style="width: 490px; height: 80px">
                    <f:selectItem itemValue="" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.allActiveHsda}"/>
                </h:selectManyListbox>
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndUpdate.criteria.record.lha']}"/>
            </td>
            <td class="plain" colspan="3">
                <h:selectManyListbox id="lhaSearch" value="#{PrsWorkLocationBean.selectedLhas}"  style="width: 490px; height: 80px">
                    <f:selectItem itemValue="" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.allActiveLocalHealthArea}"/>
                </h:selectManyListbox>
            </td>
        </tr>
        <tr>
            <td class="label plain">
                <h:outputText value="#{msg['SearchAndMerge.criteria.ownership.type']}"/>
            </td>
            <td colspan="3" class="plain">
                <h:selectManyListbox value="#{PrsWorkLocationBean.selectedOwnersipType}"  style="width: 180px; height: 80px">
                    <f:selectItem itemValue="-222" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.grsLegalOperators}"/>
                </h:selectManyListbox>
                <richext:spacer width="60"/>
                <h:outputText value="#{msg['SearchAndUpdate.criteria.record.status']}" style="display: inline-block; width: 110px;"/>
                <h:selectManyListbox value="#{PrsWorkLocationBean.selectedRecordsStatus}"  style="width: 140px; height: 80px">
                    <f:selectItem itemValue="-222" itemLabel=""/>
                    <f:selectItems value="#{DsrDroplists.allRecordStatus}"/>
                </h:selectManyListbox>
            </td>
        </tr>
    </table>
    <richext:spacer height="30"/>
    <div style="text-align: right">
        <ui:include src="/WEB-INF/fragments/Spinner.xhtml"/>
        <!-- Display button if we are searching from the main search page -->
        <p:commandButton id="siteSearchButton" value="#{msg['button.submit']}" action="#{PrsWorkLocationBean.search}" onclick="hideNotification();"	rendered="#{action == 'mainSearch'}" oncomplete="displayNotification(); " update="@form"/>
        <!-- Display button if we are searching from the merge page search dialog -->
        <p:commandButton id="mergeSearchButton" value="#{msg['button.submit']}" action="#{PrsWorkLocationBean.search}" onclick="hideNotification();" rendered="#{action == 'mergeSearch'}"  update="resultTable"/>
        <richext:spacer width="10"/>
        <p:commandButton value="#{msg['button.clear']}" action="#{PrsWorkLocationBean.clearSearch}" update="@form" oncomplete="hideNotification();" rendered="#{action == 'mainSearch'}"/>
        <p:commandButton value="#{msg['button.clear']}" action="#{PrsWorkLocationBean.clearSearch}" update="searchContainer" oncomplete="PF('searchPopupForm').show();" async="true" rendered="#{action == 'mergeSearch'}"/>
    </div>
    <p:defaultCommand target="siteSearchButton" scope="searchContainer" rendered="#{action == 'mainSearch'}"/>
    <p:defaultCommand target="mergeSearchButton" scope="searchContainer" rendered="#{action == 'mergeSearch'}"/>
    </p:panel>    
    <script>
        // <![CDATA[
        
        
        function hideNotification() {
            if ($('[id="mergeForm:surviving"]').length == 0) {
                PF('notifyBar').hide();
            }
        }
        
        function displayNotification() {
            if ($('[id="searchForm:resultSize"]').val() == 'false' 
                && $('[id="searchForm:resultTable"] tr').length > 0
                && $('[id="errorMessages"]').children().length == 0) {
                PF('notifyBar').show();
            }
        }
        
        // ]]>
    </script>
</ui:composition>