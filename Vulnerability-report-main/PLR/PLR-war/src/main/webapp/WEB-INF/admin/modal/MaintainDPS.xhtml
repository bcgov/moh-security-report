<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    >
    <p:dialog id="maintainDPSDialog" 
              header="#{maintainDpsManager.dpsDto.new ? (maintainDpsManager.cloneOrigin eq null ? 'Create' : 'Clone') : ('Update')} Data Permission Sets (DPS)"
              widgetVar="maintainDPSModal" modal="true" draggable="false" 
              closeOnEscape="true" resizable="false" fitViewport="true">
        <h:form id="maintainDPSForm">
		
			<p:messages id="messages" showDetail="false" closable="true" >
				<p:autoUpdate disabled="false"/>
			</p:messages>

            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Registry User ID"/>
                <ui:param name="for" value="regUser"/>
            </ui:include>
            <p:autoComplete id="regUser" rendered="#{maintainDpsManager.dpsDto.new}"
                            value="#{maintainDpsManager.dpsDto.regUserChid}" 
                            required="true"
                            completeMethod="#{maintainDpsManager.suggestRegUserChid}" 
                            effect="fade" />
            <h:outputText value="#{maintainDpsManager.dpsDto.regUserChid}" rendered="#{! maintainDpsManager.dpsDto.new}"/>
            
            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="Jurisdiction"/>
                <ui:param name="for" value="jurisdiction"/>
            </ui:include>
            <h:outputText id="jurisdiction" value="#{maintainDpsManager.dpsDto.jurisdictionCode} - #{maintainDpsManager.dpsDto.jurisdictionDesc}"/>
            
            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="DPS Name"/>
                <ui:param name="for" value="dpsName"/>
            </ui:include>            
            <p:inputText value="#{maintainDpsManager.dpsDto.groupChid}" required="true" id="dpsName"/>
            
            <ui:include src="/WEB-INF/fragments/label.xhtml">
                <ui:param name="text" value="DPS Description"/>
                <ui:param name="for" value="dpsDesc"/>
            </ui:include>            
            <p:inputTextarea value="#{maintainDpsManager.dpsDto.activeGroupDesc.description}" id="dpsDesc"
                             autoResize="false" rows="5" cols="30"/>
            
            

           <div class="formControls">
                <p:commandButton id="idDataPermSubmitButton" value="#{maintainDpsManager.dpsDto.new ? 'Create' : 'Update'}" 
                                 actionListener="#{maintainDpsManager.save()}" 
                                 oncomplete="if (args &amp;&amp; !args.validationFailed) PF('maintainDPSModal').hide(); return false;" 
                                 update=":maintainDPSForm, #{dpsManager.panelToUpdate}" />
                <p:ajaxStatus style="display:inline-block">
                    <f:facet name="start"><h:graphicImage value="/resources/Spinner.gif"/></f:facet>
                    <f:facet name="complete"><h:outputText value="" /></f:facet>                     
                </p:ajaxStatus>
                <a href="#" onclick="PF('maintainDPSModal').hide();
                        return false;">Cancel</a>
            </div>
        </h:form>
    </p:dialog> 
</ui:composition>