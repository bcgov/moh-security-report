/**
 * ************************************************************* Licensed Materials - Property of
 * IBM * Copyright IBM Canada Ltd 2005 All Rights Reserved * * Created on Jan 10, 2005 *
 * ************************************************************* Please do not makes any changes to
 * this file without first * updating the revision history below, under description * please include
 * Harvest Change Request or PSO Tools CR that * caused the change. *
 * ************************************************************* Revision History: * Date Author
 * Description * ************************************************************* 01-10-2005 David
 * Bartlett Initial Specs * *************************************************************
 */
package moh.hpc.month.end;

import java.util.Properties;
import moh.hpc.month.end.constants.PropertyFileKeys;

/**
 * Short description - the first period signifies the end.
 *
 * <p>Long description - includes all text between the short description and the start of the
 * Javadoc tags. You can use <b>HTML</b> tags for formatting.
 *
 * @author dbartlett
 * @since 2005
 */
public class HandlerMonitor implements ShutdownHook {

  private static String RES_HANDLER;
  private static String NONRES_HANDLER;
  private boolean handlerFailed;
  private boolean resHandlerFinished;
  private boolean nonResHandlerFinished;
  private boolean stopRequest = false;

  // *===========================================================================*/
  // * Name    : constructor1                                                    */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  public HandlerMonitor() {
    super();
  }

  // *===========================================================================*/
  // * Name    : constructor2                                                    */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  public HandlerMonitor(Properties prp) {
    super();
    RES_HANDLER = prp.getProperty(PropertyFileKeys.PRP_RES_HANDLER_NAME);
    NONRES_HANDLER = prp.getProperty(PropertyFileKeys.PRP_NONRES_HANDLER_NAME);
  }

  // *===========================================================================*/
  // * Name    : isResHandlerFinished                                            */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  /**
   * Returns boolean containing resHandlerFinished completion status.
   *
   * @return boolean containing resHandlerFinished
   */
  public boolean isResHandlerFinished() {
    return resHandlerFinished;
  }

  // *===========================================================================*/
  // * Name    : setResHandlerFinished                                            */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  /**
   * Sets boolean containing resHandler completion status.
   *
   * @param b containing resHandlerFinished
   */
  public void setResHandlerFinished(boolean b) {
    resHandlerFinished = b;
  }

  // *===========================================================================*/
  // * Name    : isNonResHandlerFinished                                         */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   February 9 2005   Initial Spec                            */
  // *===========================================================================*/
  /**
   * Returns boolean containing nonResHandlerFinished completion status.
   *
   * @return boolean containing nonResHandlerFinished
   */
  public boolean isNonResHandlerFinished() {
    return nonResHandlerFinished;
  }

  // *===========================================================================*/
  // * Name    : setNonResHandlerFinished                                        */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   February 9 2005   Initial Spec                            */
  // *===========================================================================*/
  /**
   * Sets boolean containing nonResHandler completion status.
   *
   * @param b containing nonResHandlerFinished
   */
  public void setNonResHandlerFinished(boolean b) {
    nonResHandlerFinished = b;
  }

  // *===========================================================================*/
  // * Name    : isHandlerFailed                                                 */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  /**
   * Returns boolean containing status of Handler.
   *
   * @return boolean containing handlerFailed
   */
  public boolean isHandlerFailed() {
    return handlerFailed;
  }

  // *===========================================================================*/
  // * Name    : setHandlerFailed                                                */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  /**
   * Sets boolean containing status of Handler.
   *
   * @param b boolean containing handlerFailed
   */
  public void setHandlerFailed(boolean b) {
    handlerFailed = b;
  }

  // *===========================================================================*/
  // * Name    : setStopRequest                                                  */
  // * Purpose : Lets the handler monitor know that an application shutdown has  */
  // *           been requested.                                                 */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  public void setStopRequest(boolean b) {
    stopRequest = b;
  }

  // *===========================================================================*/
  // * Name    : isStopRequested                                                 */
  // * Purpose : Checks if an application shutdown has been requested.           */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *===========================================================================*/
  public boolean isStopRequested() {
    return stopRequest;
  }

  // *===========================================================================*/
  // * Name    : shutdown                                                        */
  // * History:                                                                  */
  // *   Developer     Date              Description                             */
  // *   ---------     ------------      ----------------------------------------*/
  // *   DC Bartlett   January 10 2005   Initial Spec                            */
  // *   DC Bartlett   February 9 2005   Added NOnRes Handler check.             */
  // *===========================================================================*/
  public void shutdown(String handler) {
    if (handler.equals(RES_HANDLER)) {
      resHandlerFinished = true;
    }
    if (handler.equals(NONRES_HANDLER)) {
      nonResHandlerFinished = true;
    }
  }

  public void shutdown() {
    handlerFailed = true;
  }
}
