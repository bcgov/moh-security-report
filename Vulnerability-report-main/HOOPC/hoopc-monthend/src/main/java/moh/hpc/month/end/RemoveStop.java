/**
 * ************************************************************* Licensed Materials - Property of
 * IBM * Copyright IBM Canada Ltd 2004,2005 All Rights Reserved *
 * ************************************************************* Please do not makes any changes to
 * this file without first * updating the revision history below, under description * please include
 * Harvest Change Request or PSO Tools CR that * caused the change. *
 * ************************************************************* Revision History: * Date Author
 * Description * ************************************************************* 21-01-2005 DC
 * Bartlett Initial Spec * *************************************************************
 */
package moh.hpc.month.end;

import moh.hpc.month.end.constants.*;
import org.apache.log4j.PropertyConfigurator;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class RemoveStop {
  private static Logger logger = LoggerFactory.getLogger("RemoveStop");
  private boolean shutdownRequested = false;

  /** =========================================================================== */
  /** Name : process */
  /** Purpose : Create the stopper object and call the method that will deleted */
  /** the stop file */
  /** History: */
  /** Developer Date Description */
  /** --------- ------------ ---------------------------------------- */
  /** DC Bartlett January 21, 2005 Initial Spec */
  /** =========================================================================== */
  private static int process(java.util.Properties prp) {
    logger.info(" ");
    logger.info("Stopper started");
    int retCode = ApplicationConstants.FAILURE;
    try {
      Stopper stopper = new Stopper(prp);
      stopper.deleteStopFile();
    } catch (Exception e) {
      logger.error("Exception occurred in stopperprocess");
    }
    return retCode;
  }

  /** =========================================================================== */
  /** Name : main */
  /** Purpose : Setup for running the Remove Stop */
  /** Descr : Sets up various objects prior to running the Remove Stop */
  /** - Read in config file to the property object */
  /** - Read in and setup the lock port */
  /** - Set up the logger */
  /** - Start the Remove STop */
  /** History: */
  /** Developer Date Description */
  /** --------- ------------ ---------------------------------------- */
  /** DC Bartlett January 21, 2005 Initial Spec */
  /** =========================================================================== */
  public static void main(String[] args) {
    boolean run = false;
    int retCode = ApplicationConstants.SUCCESS;
    if (args.length >= 1) {
      java.util.Properties prp = new java.util.Properties();
      try {
        prp.load(new java.io.FileInputStream(args[0]));
        prp.setProperty("monthEnd.props.filename", args[0]);
        createLogger(args[0]);
        retCode = process(prp);
      } catch (java.io.IOException e) {
        e.printStackTrace();
      } catch (Exception e) {
        e.printStackTrace();
      }
    } else {
      System.out.println("Usage: removeStop properties.file");
    }
    System.exit(retCode);
  }

  /** =========================================================================== */
  /** Name : createLogger */
  /** Purpose : Setup logger */
  /** Descr : Set up apache logger to write messages to a file at a level */
  /** determined in the property file (info, debug, fatal,etc) */
  /** History: */
  /** Developer Date Description */
  /** --------- ------------ ---------------------------------------- */
  /** DC Bartlett January 21, 2005 Initial Spec */
  /** =========================================================================== */
  private static void createLogger(String loggingProperties) {
    if (loggingProperties == null) {
      PropertyConfigurator.configure(new java.util.Properties());
    } else {
      PropertyConfigurator.configureAndWatch(loggingProperties);
    }
  }
}
