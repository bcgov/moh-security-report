/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package moh.hpc.month.end.nonresident.rprovince.processors;

import ca.bc.gov.health.report.model.MEInvLetterViewModel;
import java.math.BigDecimal;
import java.nio.file.Files;
import java.nio.file.Path;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import static org.junit.jupiter.api.Assertions.assertTrue;
import org.junit.jupiter.api.Test;

/** @author trevor.schiavone */
public class MEInvLetRptProcessorTest {

  @Test
  public void smokeTestReport() throws Exception {

    List<MEInvLetterViewModel> reportList = new ArrayList<>();

    MEInvLetterViewModel invLetterReportView = new MEInvLetterViewModel();
    invLetterReportView.setName("invoice name");
    invLetterReportView.setProvinceCode("AB");
    invLetterReportView.setInvoiceContact("Invoice Contact");
    invLetterReportView.setInvoiceTitle1("Title 1");
    invLetterReportView.setInvoiceOffice1("Office 1");
    invLetterReportView.setInvoiceAddress1("Address 1");
    invLetterReportView.setInvoiceAddress2("Address 2");
    invLetterReportView.setInvoiceCity("Edmonton");
    invLetterReportView.setInvoicePostalCode("T8N0B0");
    invLetterReportView.setInvoiceNumber("5252");
    invLetterReportView.setInpatientTotalAmountClaimed(BigDecimal.TEN);
    invLetterReportView.setInpatientAdjustmentAmount(BigDecimal.TEN);
    invLetterReportView.setOutpatientTotalAmountClaimed(BigDecimal.TEN);
    invLetterReportView.setOutpatientAdjustmentAmount(BigDecimal.TEN);
    invLetterReportView.setStartDate(new Date());
    invLetterReportView.setEndDate(new Date());

    reportList.add(invLetterReportView);

    byte[] pdfData = MEInvLetRptProcessor.createPdfReport(reportList);
    assertTrue(new String(pdfData).contains("PDF"));

//    Path path = Files.createTempFile("smokeTestReport", ".pdf");
//    Files.write(path, pdfData);
//    Process p = Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + path);
//    p.waitFor();
  }
}
