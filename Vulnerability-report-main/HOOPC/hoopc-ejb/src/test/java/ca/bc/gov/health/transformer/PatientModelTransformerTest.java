package ca.bc.gov.health.transformer;

import ca.bc.gov.health.database.entity.Patients;
import ca.bc.gov.health.service.viewmodel.PatientsViewModel;
import java.time.LocalDate;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public class PatientModelTransformerTest {

  protected static final String TEST_INSURANCE_NUMBER = "66666666666666";
  protected static final LocalDate TEST_EXPIRY = LocalDate.now().plusDays(3);
  protected static final String TEST_LAST_NAME = "Doe";
  protected static final String TEST_FIRST_NAME = "John";
  protected static final String TEST_ADDRESS1 = "Add 1";
  protected static final String TEST_ADDRESS2 = "Add 2";
  protected static final String TEST_CITY = "City";
  protected static final String TEST_POSTAL_CODE = "HOHOHO";
  protected static final String TEST_PROVINCE = "BC";
  protected static final LocalDate TEST_BIRTHDATE = LocalDate.now();
  protected static final String TEST_SEX_CODE = "M";
  protected static final String TEST_DECEASED_FLAG = "Y";

  @Test
  public void transformPatientViewToEntityTest() {
    // GIVEN
    PatientsViewModel claimView =
        new PatientsViewModel() {
          {
            setInsuranceCardNumber(TEST_INSURANCE_NUMBER);
            setCardExpiryDate(TEST_EXPIRY);
            setLastName(TEST_LAST_NAME);
            setFirstName(TEST_FIRST_NAME);
            setAddress1(TEST_ADDRESS1);
            setAddress2(TEST_ADDRESS2);
            setCity(TEST_CITY);
            setPostalCode(TEST_POSTAL_CODE);
            setProvince(TEST_PROVINCE);
            setBirthDate(TEST_BIRTHDATE);
            setSexCode(TEST_SEX_CODE);
            setDeceasedFlag(TEST_DECEASED_FLAG);
          }
        };

    // WHEN
    Patients claim = new Patients();
    PatientsTransformer.transform(claim, claimView);

    // THEN
    Assertions.assertEquals(TEST_INSURANCE_NUMBER, claim.getInsuranceCardNumber());
    Assertions.assertEquals(TEST_EXPIRY, claim.getCardExpiryDate());
    Assertions.assertEquals(TEST_LAST_NAME, claim.getLastName());
    Assertions.assertEquals(TEST_FIRST_NAME, claim.getFirstName());
    Assertions.assertEquals(TEST_ADDRESS1, claim.getAddress1());
    Assertions.assertEquals(TEST_ADDRESS2, claim.getAddress2());
    Assertions.assertEquals(TEST_CITY, claim.getCity());
    Assertions.assertEquals(TEST_POSTAL_CODE, claim.getPostalCode());
    Assertions.assertEquals(TEST_PROVINCE, claim.getProvince());
    Assertions.assertEquals(TEST_BIRTHDATE, claim.getBirthDate());
    Assertions.assertEquals(TEST_SEX_CODE, claim.getSexCode());
    Assertions.assertEquals(TEST_DECEASED_FLAG, claim.getDeceasedFlag());
  }

  @Test
  public void transformPatientEntityToViewTest() {
    // GIVEN
    Patients claim =
        new Patients() {
          {
            setInsuranceCardNumber(TEST_INSURANCE_NUMBER);
            setCardExpiryDate(TEST_EXPIRY);
            setLastName(TEST_LAST_NAME);
            setFirstName(TEST_FIRST_NAME);
            setAddress1(TEST_ADDRESS1);
            setAddress2(TEST_ADDRESS2);
            setCity(TEST_CITY);
            setPostalCode(TEST_POSTAL_CODE);
            setProvince(TEST_PROVINCE);
            setBirthDate(TEST_BIRTHDATE);
            setSexCode(TEST_SEX_CODE);
            setDeceasedFlag(TEST_DECEASED_FLAG);
          }
        };

    // WHEN
    PatientsViewModel claimView = PatientsTransformer.transform(claim);

    // THEN
    Assertions.assertEquals(TEST_INSURANCE_NUMBER, claimView.getInsuranceCardNumber());
    Assertions.assertEquals(TEST_EXPIRY, claimView.getCardExpiryDate());
    Assertions.assertEquals(TEST_LAST_NAME, claimView.getLastName());
    Assertions.assertEquals(TEST_FIRST_NAME, claimView.getFirstName());
    Assertions.assertEquals(TEST_ADDRESS1, claimView.getAddress1());
    Assertions.assertEquals(TEST_ADDRESS2, claimView.getAddress2());
    Assertions.assertEquals(TEST_CITY, claimView.getCity());
    Assertions.assertEquals(TEST_POSTAL_CODE, claimView.getPostalCode());
    Assertions.assertEquals(TEST_PROVINCE, claimView.getProvince());
    Assertions.assertEquals(TEST_BIRTHDATE, claimView.getBirthDate());
    Assertions.assertEquals(TEST_SEX_CODE, claimView.getSexCode());
    Assertions.assertEquals(TEST_DECEASED_FLAG, claimView.getDeceasedFlag());
  }
}
