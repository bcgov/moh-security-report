package ca.bc.gov.health.report.transformer;

import ca.bc.gov.health.report.model.ClaimReportModel;
import java.math.BigDecimal;
import java.sql.Timestamp;
import java.util.HashMap;
import java.util.Map;
import static org.junit.jupiter.api.Assertions.assertEquals;
import org.junit.jupiter.api.Test;

public class ClaimReportJasperTransformerTest {

  private final static Timestamp TEST_DATETIME = new Timestamp(1546329600000L);
  
  @Test
  public void transformToJasperModel_Test() {

    Map<String, Object> record = new HashMap<>();
    record.put("PROVINCE", "setProvince");
    record.put("SUBMISSION_DATE", TEST_DATETIME);
    record.put("STATUS", "setStatus");
    record.put("PROV_CLAIM_NO", "setProvClaimNo");
    record.put("HOSP_CLAIM_NO", "setHospClaimNo");
    record.put("ASSOC_CLAIM_NO", "setAssocClaimNo");
    record.put("INS_CARD_NO", "setInsCardNo");
    record.put("INS_EXP_DATE", TEST_DATETIME);
    record.put("LAST_NAME", "setLastName");
    record.put("FIRST_NAME", "setFirstName");
    record.put("BIRTHDATE", TEST_DATETIME);
    record.put("SEX", "M");
    record.put("NOTES", "setNotes");
    record.put("SERVICE_DATE", TEST_DATETIME);
    record.put("SERVICE_CODE", "setServiceCode");
    record.put("DIAGNOSIS_CODE", "setDiagnosisCode");
    record.put("PROCEDURE_CODE", "setProcedureCode");
    record.put("CLAIM_AMT", new BigDecimal("1234"));
    record.put("ADJ_AMT", new BigDecimal("5678"));
    record.put("HOSP_NOTES", "setHospNotes");
    record.put("ADJ_REASON", "setAdjReason");
    record.put("OVERRIDE_REASON", "setOverrideReason");
    record.put("HOSPITAL_NUMBER", "setHospitalNumber");
    record.put("HOSPITAL_NAME", "setHospitalName");
    record.put("ACCIDENT_CODE", "setAccidentCode");
    record.put("ADDRESS1", "setAddressLine1");
    record.put("ADDRESS2", "setAddressLine2");
    record.put("ADDR_PROVINCE", "setAddrProvince");
//    record.put("ADMISS_DATE", "TEST_DATETIME");
    record.put("ADMISS_NO", "setAdmissionNo");
    record.put("CITY", "setCity");
    record.put("DAYS_STAY", new BigDecimal("1"));
    record.put("DECEASED", "setDeceased");
    record.put("DEC_REASON", "setDecReason");
    record.put("DISCH_DATE", TEST_DATETIME);
    record.put("HI_COST_PROC1", new BigDecimal("1"));
    record.put("HI_COST_PROC2", new BigDecimal("2"));
    record.put("HI_COST_PROC3", new BigDecimal("3"));
    record.put("HI_COST_DATE1", TEST_DATETIME);
    record.put("HI_COST_DATE2", TEST_DATETIME);
    record.put("HI_COST_DATE3", TEST_DATETIME);
    record.put("PER_DIEM_RATE", new BigDecimal("1"));
    record.put("POSTAL_CODE", "setPostalCode");
    record.put("REASON", "setReason");
    record.put("REPORT_TITLE", "setReportType");

    ClaimReportModel r = ClaimReportJasperTransformer.transformToJasperModel(record);

    assertEquals("setProvince", r.getProvince());
    assertEquals("2019/01/01", r.getSubmissionDate());
    assertEquals("setStatus", r.getStatus());
    assertEquals("setProvClaimNo", r.getProvincialClaimNumber());
    assertEquals("setHospClaimNo", r.getHospitalClaimNumber());
    assertEquals("setAssocClaimNo", r.getAssociatedClaimNumber());
    assertEquals("setInsCardNo", r.getInsuranceNumber());
    assertEquals("2019/01/01", r.getInsuranceExpiracyDate());
    assertEquals("setLastName", r.getSurname());
    assertEquals("setFirstName", r.getGivenName());
    assertEquals("2019/01/01", r.getBirthDate());
    assertEquals("M", r.getSex());
    assertEquals("setNotes", r.getNotes());
    assertEquals("2019/01/01", r.getAdmissionServiceDate());
    assertEquals("setServiceCode", r.getServiceCode());
    assertEquals("setDiagnosisCode", r.getDiagnosticCode());
    assertEquals("setProcedureCode", r.getProcedureCode());
    assertEquals(new BigDecimal("1234").setScale(2), r.getClaimAmount());
    assertEquals(new BigDecimal("5678").setScale(2), r.getAdjustment());
    assertEquals("setHospNotes", r.getHospitalNotes());
    assertEquals("setAdjReason", r.getAdjustmentReason());
    assertEquals("setOverrideReason", r.getOverrideReason());
    assertEquals("setHospitalNumber", r.getHospitalNumber());
    assertEquals("setHospitalName", r.getHospitalName());
    assertEquals("setAccidentCode", r.getAccidentCode());
    assertEquals("setAddressLine1", r.getAddressLine1());
    assertEquals("setAddressLine2", r.getAddressLine2());
    assertEquals("setAddrProvince", r.getAddrProvince());
    assertEquals("setAdmissionNo", r.getAdmissionNo());
    assertEquals("setCity", r.getCity());
    assertEquals("1", r.getDaysStay());
    assertEquals("setDeceased", r.getDeceased());
    assertEquals("setDecReason", r.getDecReason());
    assertEquals("2019/01/01", r.getDischargeDate());
    assertEquals("2019/01/01", r.getHiCostDate1());
    assertEquals("2019/01/01", r.getHiCostDate2());
    assertEquals("2019/01/01", r.getHiCostDate3());
    assertEquals("1", r.getHiCostProc1());
    assertEquals("2", r.getHiCostProc2());
    assertEquals("3", r.getHiCostProc3());
    assertEquals(new BigDecimal("1").setScale(2), r.getPerDiemRate());
    assertEquals("setPostalCode", r.getPostalCode());
    assertEquals("setReason", r.getReason());
    assertEquals("setReportType", r.getReportType());
  }

}
