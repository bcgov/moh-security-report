package ca.bc.gov.health.stagingarea;

import ca.bc.gov.health.database.entity.SaSubmissionDetails;
import ca.bc.gov.health.database.entity.SaSubmissions;
import ca.bc.gov.health.staging.SubmissionViewModel;
import java.util.ArrayList;
import static org.junit.jupiter.api.Assertions.assertEquals;
import org.junit.jupiter.api.Test;

public class SubmissionsViewModelTest {

  @Test
  public void testCumuls() {
    SaSubmissions sasub = createSubmission();

    SubmissionViewModel vsub = new SubmissionViewModel(sasub);

    assertEquals(Long.valueOf(123), vsub.getTotalRecords());

    assertEquals(Long.valueOf(1), vsub.getTotalDisabled());
    assertEquals(Long.valueOf(3), vsub.getTotalClaims());
    assertEquals(Long.valueOf(2), vsub.getTotalAdjs());
    assertEquals(Long.valueOf(4), vsub.getTotalReviews());
    assertEquals(Long.valueOf(0), vsub.getTotalInvalid());
  }

  private SaSubmissions createSubmission() {
    return new SaSubmissions() {
      {
        setTotalNumberDetails("123");
        setSaSubmissionDetailsList(
            new ArrayList<SaSubmissionDetails>() {
              {
                add(
                    new SaSubmissionDetails() {
                      {
                        setDisabledFlag("Y");
                        setAdjFlag("Y");
                        setReviewFlag("Y");
                        setValidFlag("Y");
                      }
                    });
                add(
                    new SaSubmissionDetails() {
                      {
                        setDisabledFlag("N");
                        setAdjFlag("N");
                        setReviewFlag("N");
                        setValidFlag("Y");
                      }
                    });
                add(
                    new SaSubmissionDetails() {
                      {
                        setDisabledFlag("N");
                        setAdjFlag("N");
                        setReviewFlag("Y");
                        setValidFlag("Y");
                      }
                    });
                add(
                    new SaSubmissionDetails() {
                      {
                        setDisabledFlag("N");
                        setAdjFlag("N");
                        setReviewFlag("Y");
                        setValidFlag("Y");
                      }
                    });
                add(
                    new SaSubmissionDetails() {
                      {
                        setDisabledFlag("N");
                        setAdjFlag("Y");
                        setReviewFlag("Y");
                        setValidFlag("Y");
                      }
                    });
                add(
                    new SaSubmissionDetails() {
                      {
                        setDisabledFlag("N");
                        setAdjFlag("Y");
                        setReviewFlag("Y");
                        setValidFlag("Y");
                      }
                    });
              }
            });
      }
    };
  }
}
