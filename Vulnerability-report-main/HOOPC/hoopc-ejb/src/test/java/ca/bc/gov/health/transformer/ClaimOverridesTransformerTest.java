package ca.bc.gov.health.transformer;

import ca.bc.gov.health.database.entity.ClaimOverrides;
import ca.bc.gov.health.database.entity.HospitalOopClaims;
import ca.bc.gov.health.service.viewmodel.ClaimOverridesViewModel;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public class ClaimOverridesTransformerTest {

  protected static final Boolean TEST_OVERRIDE_FLAG = true;
  protected static final String TEST_REASON = "Reason";
  protected static final String TEST_STATUS = "Status";
  protected static final String TEST_STATUS_REASON = "Stat Reason";

  @Test
  public void transformClaimOverridesViewToEntityTest() {
    // GIVEN
    ClaimOverridesViewModel claimView =
        new ClaimOverridesViewModel() {
          {
            setOverrideRequest(TEST_OVERRIDE_FLAG);
            setOverrideRequestReason(TEST_REASON);
            setOverrideStatus(TEST_STATUS);
            setOverrideStatusReason(TEST_STATUS_REASON);
          }
        };

    // WHEN
    HospitalOopClaims claim = new HospitalOopClaims();
    ClaimOverridesTransformer.transform(claimView, claim);

    // THEN
    Assertions.assertEquals("Y", claim.getClaimOverrides().getOverrideRequest());
    Assertions.assertEquals(TEST_REASON, claim.getClaimOverrides().getOverrideRequestReason());
    Assertions.assertEquals(TEST_STATUS, claim.getClaimOverrides().getOverrideStatus());
    Assertions.assertEquals(
        TEST_STATUS_REASON, claim.getClaimOverrides().getOverrideStatusReason());
    Assertions.assertEquals(claim, claim.getClaimOverrides().getHocId());
  }

  @Test
  public void transformClaimOverridesEntityToViewTest() {
    // GIVEN
    ClaimOverrides claim =
        new ClaimOverrides() {
          {
            setOverrideRequest("Y");
            setOverrideRequestReason(TEST_REASON);
            setOverrideStatus(TEST_STATUS);
            setOverrideStatusReason(TEST_STATUS_REASON);
          }
        };

    // WHEN
    ClaimOverridesViewModel claimView = ClaimOverridesTransformer.transform(claim);

    // THEN
    Assertions.assertEquals(TEST_OVERRIDE_FLAG, claimView.isOverrideRequest());
    Assertions.assertEquals(TEST_REASON, claimView.getOverrideRequestReason());
    Assertions.assertEquals(TEST_STATUS, claimView.getOverrideStatus());
    Assertions.assertEquals(TEST_STATUS_REASON, claimView.getOverrideStatusReason());
  }
}
