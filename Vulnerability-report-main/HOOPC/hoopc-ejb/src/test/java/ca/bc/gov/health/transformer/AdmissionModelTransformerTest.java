package ca.bc.gov.health.transformer;

import ca.bc.gov.health.database.entity.Admissions;
import ca.bc.gov.health.service.viewmodel.AdmissionsViewModel;
import java.math.BigInteger;
import java.time.LocalDate;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

public class AdmissionModelTransformerTest {

  protected static final String TEST_ADMISSION_NUMBER = "66666666666666";
  protected static final LocalDate TEST_ADMISSION_DATE = LocalDate.now();
  protected static final LocalDate TEST_DISCHARGE_DATE = LocalDate.now().plusDays(1);
  protected static final Integer TEST_TOTAL_DAYS = 1;
  protected static final String TEST_LONG_TERM_IND = "Y";
  protected static final Integer TEST_WARD_RATE = 10;

  @Test
  public void transformAdmissionViewToEntityTest() {
    // GIVEN
    AdmissionsViewModel claimView =
        new AdmissionsViewModel() {
          {
            setAdmissionNumber(TEST_ADMISSION_NUMBER);
            setAdmissionDate(TEST_ADMISSION_DATE);
            setDischargeDate(TEST_DISCHARGE_DATE);
            setTotalDaysStay(TEST_TOTAL_DAYS);
            setLongTermStayInd(TEST_LONG_TERM_IND);
            setWardRate(TEST_WARD_RATE);
          }
        };

    // WHEN
    Admissions claim = new Admissions();
    AdmissionsTransformer.transform(claim, claimView);

    // THEN
    Assertions.assertEquals(TEST_ADMISSION_NUMBER, claim.getAdmissionNumber());
    Assertions.assertEquals(TEST_ADMISSION_DATE, claim.getAdmissionDate());
    Assertions.assertEquals(TEST_DISCHARGE_DATE, claim.getDischargeDate());
    Assertions.assertEquals(BigInteger.valueOf(TEST_TOTAL_DAYS), claim.getTotalDaysStay());
    Assertions.assertEquals(TEST_LONG_TERM_IND, claim.getLongTermStayInd());
    Assertions.assertEquals(BigInteger.valueOf(TEST_WARD_RATE), claim.getWardRate());
  }

  @Test
  public void transformAdmissionEntityToViewTest() {
    // GIVEN
    Admissions claim =
        new Admissions() {
          {
            setAdmissionNumber(TEST_ADMISSION_NUMBER);
            setAdmissionDate(TEST_ADMISSION_DATE);
            setDischargeDate(TEST_DISCHARGE_DATE);
            setTotalDaysStay(BigInteger.valueOf(TEST_TOTAL_DAYS));
            setLongTermStayInd(TEST_LONG_TERM_IND);
            setWardRate(BigInteger.valueOf(TEST_WARD_RATE));
          }
        };

    // WHEN
    AdmissionsViewModel claimView = AdmissionsTransformer.transform(claim);

    // THEN
    Assertions.assertEquals(TEST_ADMISSION_NUMBER, claimView.getAdmissionNumber());
    Assertions.assertEquals(TEST_ADMISSION_DATE, claimView.getAdmissionDate());
    Assertions.assertEquals(TEST_DISCHARGE_DATE, claimView.getDischargeDate());
    Assertions.assertEquals(TEST_TOTAL_DAYS, claimView.getTotalDaysStay());
    Assertions.assertEquals(TEST_LONG_TERM_IND, claimView.getLongTermStayInd());
    Assertions.assertEquals(TEST_WARD_RATE, claimView.getWardRate());
  }
}
