/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.report.transformer;

import ca.bc.gov.health.report.model.MESumServiceReportModel;
import ca.bc.gov.health.report.model.MESumServiceViewModel;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/** @author trevor.schiavone */
public class MESumServiceViewToReportFormat {

  public static List<MESumServiceReportModel> transformSumServiceViewToReport(
      List<MESumServiceViewModel> sumServices) {

    Map<String, MESumServiceReportModel> sumServiceReportMap = new HashMap<>();

    for (MESumServiceViewModel sumService : sumServices) {

      String currentKey = sumService.getProvince() + sumService.getHospitalName();

      if (!sumServiceReportMap.containsKey(currentKey)) {

        MESumServiceReportModel tempSumServiceReportModel = new MESumServiceReportModel();
        tempSumServiceReportModel.setHospitalName(sumService.getHospitalName());
        tempSumServiceReportModel.setProvince(sumService.getProvince());

        sumServiceReportMap.put(currentKey, tempSumServiceReportModel);
      }

      MESumServiceReportModel currentReportModelValue = sumServiceReportMap.get(currentKey);

      switch (sumService.getServiceCode()) {
        case "51":
          currentReportModelValue.setServiceCount51(sumService.getServiceCount());
          break;
        case "53":
          currentReportModelValue.setServiceCount53(sumService.getServiceCount());
          break;
        case "54":
          currentReportModelValue.setServiceCount54(sumService.getServiceCount());
          break;
        case "55":
          currentReportModelValue.setServiceCount55(sumService.getServiceCount());
          break;
        case "56":
          currentReportModelValue.setServiceCount56(sumService.getServiceCount());
          break;
        case "57":
          currentReportModelValue.setServiceCount57(sumService.getServiceCount());
          break;
        case "58":
          currentReportModelValue.setServiceCount58(sumService.getServiceCount());
          break;
        case "59":
          currentReportModelValue.setServiceCount59(sumService.getServiceCount());
          break;
        case "60":
          currentReportModelValue.setServiceCount60(sumService.getServiceCount());
          break;
        case "61":
          currentReportModelValue.setServiceCount61(sumService.getServiceCount());
          break;
        case "62":
          currentReportModelValue.setServiceCount62(sumService.getServiceCount());
          break;
        case "63":
          currentReportModelValue.setServiceCount63(sumService.getServiceCount());
          break;
        case "64":
          currentReportModelValue.setServiceCount64(sumService.getServiceCount());
          break;
        case "65":
          currentReportModelValue.setServiceCount65(sumService.getServiceCount());
          break;
        case "66":
          currentReportModelValue.setServiceCount66(sumService.getServiceCount());
          break;
        case "67":
          currentReportModelValue.setServiceCount67(sumService.getServiceCount());
          break;
        case "68":
          currentReportModelValue.setServiceCount68(sumService.getServiceCount());
          break;
        case "69":
          currentReportModelValue.setServiceCount69(sumService.getServiceCount());
          break;
        case "70":
          currentReportModelValue.setServiceCount70(sumService.getServiceCount());
          break;
        default:
          break;
      }

      currentReportModelValue.setInvoicedAmount(
          currentReportModelValue.getInvoicedAmount().add(sumService.getInvoicedAmount()));
      currentReportModelValue.setServiceTotal(
          currentReportModelValue.getServiceTotal().add(sumService.getServiceCount()));
    }

    return new ArrayList<>(sumServiceReportMap.values());
  }
}
