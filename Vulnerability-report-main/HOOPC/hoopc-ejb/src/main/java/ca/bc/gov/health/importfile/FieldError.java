package ca.bc.gov.health.importfile;

/*
 * Tracks file line numbers containing errors for a specific field
 */
public class FieldError {

  private String fieldName;
  private StringBuffer lineNumbers;

  FieldError(String fieldName, int lineNo) {
    this.fieldName = fieldName;
    this.lineNumbers = new StringBuffer(String.valueOf(lineNo));
  }

  FieldError(String fieldName) {
    this.fieldName = fieldName;
    this.lineNumbers = null;
  }

  void add(int lineNo) {
    if (lineNumbers.length() > 0) {
      lineNumbers.append(", ");
    }
    lineNumbers.append(String.valueOf(lineNo));
  }

  public String getFieldName() {
    return fieldName;
  }

  public String getLineNumbers() {
    return lineNumbers.toString();
  }

  public String toString() {
    // Tsk..tsk: I've got presentation mixed in with this... (also, JSP stops as soon as it sees the
    // &)
    // return "The following lines contain an invalid "+fieldName + ":<br>&nbsp;&nbsp;&nbsp;" +
    // lineNumbers;
    if (lineNumbers == null) {
      return fieldName;
    } else {
      return "The following lines have an invalid " + fieldName + ": " + lineNumbers;
    }
  }
}
