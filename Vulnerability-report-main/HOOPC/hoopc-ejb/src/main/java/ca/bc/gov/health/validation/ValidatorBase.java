package ca.bc.gov.health.validation;

import ca.bc.gov.health.validation.rule.ValidationRule;
import java.util.List;
import java.util.stream.Collectors;
import java.util.stream.Stream;

/**
 * The Class ValidatorBase.
 *
 * @param <T> the generic type
 */
public abstract class ValidatorBase<T> implements Validator<T> {

  /* (non-Javadoc)
   * @see ca.bc.gov.health.validation.Validator#getRules(java.lang.Object)
   */
  @Override
  public abstract List<ValidationRule<T>> getRules(T claimView);

  /* (non-Javadoc)
   * @see ca.bc.gov.health.validation.Validator#validate(java.lang.Object)
   */
  @Override
  public List<ValidationError> validate(T claimView) {
    Stream<ValidationError> val =
        getRules(claimView).stream().map(r -> r.validate(claimView)).filter(e -> e != null);

    return val.collect(Collectors.toList());
  }
}
