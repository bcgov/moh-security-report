<!DOCTYPE html>
<ui:composition template="/WEB-INF/templates/gov30Template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="title">
        Hospital Reports
    </ui:define>

    <ui:define name="content">
        <ui:include src="/WEB-INF/fragments/navTabs/claimReportsTabs.xhtml" />
        <ui:param value="#{HospitalReportsBean}" name="bean" />

        <h:form id="reportForm">
            <p:messages id="messages" closable="true">
                <p:autoUpdate />
            </p:messages>
            <div class="form-group">
                <h2>BASIC INFORMATION</h2>

                <h:panelGroup id="organisation"
                              rendered="#{request.isUserInRole('MINISTRY')}">
                    <div class="ui-g">
                        <div class="ui-g-3">
                            <p:outputLabel for="@next" value="Organization Type" />
                            <p:selectOneRadio id="reportType" required="true"
                                              value="#{bean.hospitalReportOrgType}" onchange="resetOrg();">
                                <f:selectItem itemLabel="Health Authority" itemValue="HA" />
                                <f:selectItem itemLabel="Hospital" itemValue="HOSP" />
                                <p:ajax update="@form" global="false" />
                            </p:selectOneRadio>
                        </div>
                    </div>
                </h:panelGroup>

                <p:remoteCommand name="resetOrg" process="@this" update="healthAuthority hospital">
                    <p:resetInput target="healthAuthority hospital" />
                </p:remoteCommand>  

                <div class="ui-g">
                    <div class="ui-g-12">
                        <p:outputLabel style="width:100%;margin-top:10px;" for="healthAuthority"
                                       value="Organization Name"
                                       rendered="#{bean.hospitalReportOrgType eq 'HA'}"/>
                        <p:outputLabel style="width:100%;margin-top:10px;" for="hospital"
                                       value="Organization Name"
                                       rendered="#{bean.hospitalReportOrgType eq 'HOSP'}"/>

                        <h:selectOneMenu id="healthAuthority" style="width:300px;" 
                                         required="true" value="#{bean.viewModel.healthAuthority}"
                                         hideNoSelectionOption="false"
                                         rendered="#{bean.hospitalReportOrgType eq 'HA'}">
                            <f:selectItem itemLabel="" itemValue=""
                                          noSelectionOption="true" />
                            <f:selectItem itemLabel="ALL" itemValue="ALL"/>
                            <f:selectItems value="#{ApplicationBean.healthAuthoritiesList}" />		
                        </h:selectOneMenu>

                        <p:pickList id="hospital" value="#{bean.selectedHospitals}"
                                    var="item" itemLabel="#{item.hospitalNumber} - #{item.name}"
                                    itemValue="#{item}" converter="HospitalConverter"
                                    showSourceFilter="true" 
                                    filterMatchMode="contains"
                                    rendered="#{bean.hospitalReportOrgType eq 'HOSP'}"
                                    required="true"
                                    responsive="true" labelDisplay="inline" >	
                            <f:facet name="targetCaption" >Selected Hospitals</f:facet>
                        </p:pickList>

                    </div>
                </div>
            </div>

            <div class="form-group">
                <h2>STATUS INFORMATION</h2>

                <div class="ui-g">
                    <div class="ui-g-4">
                        <p:outputLabel for="@next" value="Status" />
                        <p:selectOneRadio id="claimStatus" required="true"
                                          value="#{bean.viewModel.claimStatus}">
                            <f:selectItem itemLabel="Valid" itemValue="VALID" />
                            <f:selectItem itemLabel="Invalid" itemValue="INVALID" />
                            <f:selectItem itemLabel="Processed" itemValue="PROCESSED" />
                            <f:selectItem itemLabel="Void" itemValue="VOID" />
                        </p:selectOneRadio>
                    </div>
                </div>

                <div class="ui-g">
                    <div class="ui-g-4">
                        <p:outputLabel for="@next" value="Type of patient" />
                        <p:selectOneRadio id="claimType" required="true"
                                          value="#{bean.viewModel.claimType}">
                            <f:selectItem itemLabel="Both" itemValue="BOTH" />
                            <f:selectItem itemLabel="Inpatient" itemValue="INPATIENT" />
                            <f:selectItem itemLabel="Outpatient" itemValue="OUTPATIENT" />
                        </p:selectOneRadio>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <h2>DATE INFORMATION</h2>

                <div class="ui-g">
                    <div class="ui-g-3">
                        <p:outputLabel for="@next" value="Submission Date From" />
                        <span class="date-pattern">(YYYYMMDD)</span>
                        <p:calendar id="submissionStartDate"
                                    value="#{bean.viewModel.submissionStartDate}" pattern="yyyyMMdd"
                                    navigator="true">
                            <f:converter converterId="localDateConverter" />
                        </p:calendar>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel for="@next" value="Submission Date To" />
                        <span class="date-pattern">(YYYYMMDD)</span>
                        <p:calendar id="submissionEndDate"
                                    value="#{bean.viewModel.submissionEndDate}" pattern="yyyyMMdd"
                                    navigator="true">
                            <f:converter converterId="localDateConverter" />
                        </p:calendar>
                    </div>
                </div>

                <div class="ui-g">
                    <div class="ui-g-3">
                        <p:outputLabel for="@next" value="Process Date From" />
                        <span class="date-pattern">(YYYYMMDD)</span>
                        <p:calendar id="processingStartDate"
                                    value="#{bean.viewModel.processingStartDate}" pattern="yyyyMMdd"
                                    navigator="true">
                            <f:converter converterId="localDateConverter" />
                        </p:calendar>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel for="@next" value="Process Date To" />
                        <span class="date-pattern">(YYYYMMDD)</span>
                        <p:calendar id="processingEndDate"
                                    value="#{bean.viewModel.processingEndDate}" pattern="yyyyMMdd"
                                    navigator="true">
                            <f:converter converterId="localDateConverter" />
                        </p:calendar>
                    </div>
                </div>

                <div class="ui-g">
                    <div class="ui-g-3">
                        <p:outputLabel for="@next" value="Adjustment Proc. Date From" />
                        <span class="date-pattern">(YYYYMMDD)</span>
                        <p:calendar id="adjustmentProcStartDate"
                                    value="#{bean.viewModel.adjustmentProcStartDate}"
                                    pattern="yyyyMMdd" navigator="true">
                            <f:converter converterId="localDateConverter" />
                        </p:calendar>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel for="@next" value="Adjustment Proc. Date To" />
                        <span class="date-pattern">(YYYYMMDD)</span>
                        <p:calendar id="adjustmentProcEndDate"
                                    value="#{bean.viewModel.adjustmentProcEndDate}" pattern="yyyyMMdd"
                                    navigator="true">
                            <f:converter converterId="localDateConverter" />
                        </p:calendar>
                    </div>
                </div>

            </div>
            
            <ui:include src="/WEB-INF/fragments/reports/reportSubmit.xhtml" />
        </h:form>
    </ui:define>
</ui:composition>