<ui:component
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:cc="http://xmlns.jcp.org/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    >
    <cc:interface>
        <cc:attribute name="value"/>
        <cc:attribute name="required"/>
        <cc:attribute name="layout"/>
        <cc:attribute name="columns"/>
        <cc:attribute name="allLabel"/>
        <cc:attribute name="allValue"/>
        <cc:editableValueHolder name="input" targets="checkboxes" />
    </cc:interface>
    <cc:implementation>
        <h:outputStylesheet library="composites" name="selectManyCheckboxAll.css" />
        <h:outputScript library="composites" name="selectManyCheckboxAll.js" target="head" />

        <div id="#{cc.clientId}" class="checkboxes-all" 
             data-widget-all="#{p:resolveWidgetVar('all', cc)}"
             data-widget-checkboxes="#{p:resolveWidgetVar('checkboxes', cc)}">
            <div class="all" style="display:block">
                <p:selectBooleanCheckbox id="all" value="#{cc.attrs.allValue}" />
                <p:outputLabel for="all" value="#{cc.attrs.allLabel}" />
            </div>
            <p:selectManyCheckbox id="checkboxes" value="#{cc.attrs.value}" required="#{cc.attrs.required}"
                                  layout="#{cc.attrs.layout}" columns="#{cc.attrs.columns}">
                <cc:insertChildren />
            </p:selectManyCheckbox>
        </div>
    </cc:implementation>          
</ui:component>
