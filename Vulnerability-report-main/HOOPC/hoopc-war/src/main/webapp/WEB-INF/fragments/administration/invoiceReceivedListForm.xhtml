<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:form id="listForm">
        <!--
        <p:commandButton value="Delete" process="@this" update="@form"
                id="deleteSeleniumCodeButton"
                action="#{InvoicesReceivedBean.removeInvoice}" style="display: none;" />
        -->

        <p:messages id="messages" escape="false" closable="true" />

        <div class="ui-g">
            <div class="ui-g-3">
                <p:outputLabel for="province" value="Province" />
                <h:selectOneMenu id="province"
                                 value="#{InvoicesReceivedBean.province.provinceCode}"
                                 required="true">
                    <f:selectItem itemLabel="Select" itemValue="" />
                    <f:selectItems value="#{ApplicationBean.residentProvincesList}" />
                </h:selectOneMenu>
            </div>
        </div>

        <c:if test="#{InvoicesReceivedBean.province.provinceCode != null}">
            <div class="ui-g">
                <div class="ui-g-2">
                    <p:outputLabel for="provinceInvoiceTotal" value="Invoice Total" />
                    <p:inputText id="provinceInvoiceTotal"
                                 value="#{InvoicesReceivedBean.provinceInvoiceTotal}"
                                 disabled="true" />
                </div>
            </div>
        </c:if>

        <div class="ui-g submit-buttons"
             style="margin-top: 5px; margin-bottom: 35px;">
            <div class="ui-g-12">
                <p:commandButton id="search" value="Submit"
                                 action="#{InvoicesReceivedBean.loadInvoiceList}"
                                 styleClass="submit-button" update="@form" process="@form" />
            </div>
        </div>

        <c:if test="#{InvoicesReceivedBean.province.provinceCode != null}">

            <p:outputLabel id="invoiceListTitle"
                           style="display:inline-flex; font-size:24px; font-weight:500; margin-bottom:15px; line-height: 1.1;
                           text-transform: capitalize"
                           value="#{InvoicesReceivedBean.getTitle()}" />

            <p:commandButton id="addNewInvoice" value="Add Invoice"
                             update="adminForm" process="@this" resetValues="true"
                             oncomplete="PF('addDialog').show();clearMessages();"
                             action="#{InvoicesReceivedBean.clearInvoice}" global="false"
                             style="float: right" />

            <p:dataTable id="allInvoices" var="invoiceRow"
                         value="#{InvoicesReceivedBean.allInvoices}" selectionMode="single"
                         selection="#{InvoicesReceivedBean.selectedItem}"
                         rowKey="#{invoiceRow.id}" sortBy="#{invoiceRow.invoiceDate}"
                         rowStyleClass="ui-datatable-row">

                <p:ajax event="rowSelect" update="listForm adminForm"
                        resetValues="true"
                        oncomplete="PF('editDialog').show();clearMessages();"
                        listener="#{InvoicesReceivedBean.onRowSelect()}" global="false" />

                <p:column width="15%" headerText="INVOICE #"
                          sortBy="#{invoiceRow.number}">
                    <h:outputText value="#{invoiceRow.number}" />
                </p:column>
                <p:column width="15%" headerText="INVOICE DATE"
                          sortBy="#{invoiceRow.invoiceDate}">
                    <h:outputText value="#{invoiceRow.invoiceDate}" />
                </p:column>
                <p:column width="15%" headerText="DATE RECEIVED"
                          sortBy="#{invoiceRow.receivedDate}">
                    <h:outputText value="#{invoiceRow.receivedDate}" />
                </p:column>
                <p:column width="20%" headerText="INVOICE TOTAL ($)"
                          sortBy="#{invoiceRow.totalAmount}">
                    <h:outputText value="#{invoiceRow.totalAmount}" />
                </p:column>
                <p:column width="20%" headerText="PROVINCIAL BILLING DATE"
                          sortBy="#{invoiceRow.provincialBillingDate}">
                    <h:outputText value="#{invoiceRow.provincialBillingDate}" />
                </p:column>
                <p:column width="15%" headerText="TYPE"
                          sortBy="#{invoiceRow.claimType}">
                    <h:outputText value="#{invoiceRow.claimType}" />
                </p:column>
            </p:dataTable>

        </c:if>

    </h:form>

</ui:composition>