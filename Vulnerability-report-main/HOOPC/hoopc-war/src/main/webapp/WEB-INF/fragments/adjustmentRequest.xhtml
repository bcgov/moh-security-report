<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:panelGroup id="editAdjustmentRequestForm"
                  rendered="#{claim.claimId != null}">

        <f:event listener="#{AdjustmentRequestReasonValidator.validate}" type="postValidate" />
        
        <div class="form-group">    
            <h2>ADJUSTMENT REQUEST</h2>

            <div class="ui-g">

                <div class="ui-g-3">
                    <p:outputLabel for="adjRequestDateRequested" value="Date Requested" 
                                   styleClass="#{bean.claim.residencyType.typeCode eq 'NRES' and 
                                                 bean.claim.statusCode ne 'PROCESSED' ? 'disabled' : ''}"/>
                    <p:calendar id="adjRequestDateRequested"
                                value="#{claim.claimAdjustmentsRequest.adjustmentDate}"
                                pattern="yyyyMMdd" placeholder="YYYYMMDD" yearRange="c-20:c+0"
                                navigator="true" required="true"
                                requiredMessage="Request Date is required" 
                                disabled="#{bean.claim.residencyType.typeCode eq 'NRES' and 
                                            bean.claim.statusCode ne 'PROCESSED'}" >
                        <f:converter converterId="localDateConverter"/>
                    </p:calendar>

                </div>

                <div class="ui-g-3">
                    <p:outputLabel for="adjAmount" value="Amount"
                                   styleClass="disabled"/>
                    <p:inputText id="adjAmount"
                                 value="#{claim.claimAdjustmentsRequest.amount}"
                                 required="true" disabled="true" />
                </div>
                <!--BCMOHAD-9593- Enabled source drop down to edit claim for both NRES and RES-->
                <div class="ui-g-3">
                    <p:outputLabel for="adjRequestSource" value="Source"
                                   styleClass="#{claim.residencyType.typeCode eq 'RES' ? 'disabled' : ''}"/>
                    <h:selectOneMenu id="adjRequestSource"
                                     value="#{claim.claimAdjustmentsRequest.source}"
                                     disabled="#{claim.residencyType.typeCode eq 'RES'}">
                        <f:selectItem itemLabel="MOH" itemValue="MOH" />
                        <f:selectItem itemLabel="Hospital" itemValue="HOSPITAL" />
                        <f:selectItem itemLabel="Province" itemValue="PROVINCE" />
                    </h:selectOneMenu>
                </div>
                <p:outputPanel rendered="#{ApplicationBean.appEnv eq 'D'}">
                <div class="ui-g-3">
                    <p:outputLabel for="adjRequestStatus" value="Status"
                                   styleClass="disabled"/>
                    <p:inputText id="adjRequestStatus"
                                 value="#{claim.claimAdjustmentsRequest.adjustmentStatus}"
                                 required="false" disabled="true" />
                </div>
                </p:outputPanel>
            </div>

            <!--BCMOHAD-9593- Enabled Request Reason one and two to edit and expanded the text area to accept until 256 chars for both NRES and RES-->
            <div class="ui-g" style="margin-bottom: 20px">

                <div class="ui-g-6">
                    <p:outputLabel for="adjReqReason1" value="Reason for Request One"/>
                    <p:inputTextarea id="adjReqReason1"
                                 value="#{claim.adjRequestReasons[0].freeFormReason}"
                                 required="true" maxlength="256" rows="1" cols="76"/>
                </div>

                <div class="ui-g-6">
                    <p:outputLabel for="adjReqReason2" value="Reason for Request Two"/>
                    <p:inputTextarea id="adjReqReason2"
                                 value="#{claim.adjRequestReasons[1].freeFormReason}"
                                 required="false" maxlength="256" rows="1" cols="76"/>
                </div>
            </div>
            <!--BCMOHAD-9593- Save button enabled for all types of claims except void for both NRES and RES"-->
            <div class="ui-g">
                <div class="ui-g-12 submit-buttons">
                    <p:commandButton id="saveAdjReq" styleClass="submit-button"
                                     update="@form" process="editAdjustmentRequestForm" 
                                     value="Save" onclick="clearMessages()"
                                     action="#{bean.saveClaimAdjRequest}"
                                     disabled="#{bean.claim.statusCode eq 'VOID'}"
                                     oncomplete="window.scrollTo(0,0)" />

            <!--BCMOHAD-9593- Delete button disabled when claim status is Processed, Void and Adjust App; enabled when it is Adjust Req claim for both NRES and RES-->
                    <p:commandButton id="deleteAdjReq" value="Delete" update="@form"
                                     process="@this" disabled="#{bean.deleteRequestDisabled or bean.claim.statusCode eq 'VOID'}"
                                     styleClass="#{bean.deleteRequestDisabled or bean.claim.statusCode eq 'VOID'? 'secondary-button' : 'danger'}"
                                     action="#{bean.deleteClaimAdjRequest}" onclick="clearMessages()"
                                     style="margin-right: 10px;"
                                     oncomplete="window.scrollTo(0,0)">
                        <p:resetInput target="editAdjustmentRequestForm" />
                    </p:commandButton>
                </div>
            </div>
        </div>
    </h:panelGroup>    
</ui:composition>
