<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:panelGroup id="editAdjustmentDecisionForm"
                  rendered="#{claim.claimId != null}">

        <f:event listener="#{AdjustmentDecisionReasonValidator.validate}" type="postValidate" />

        <div class="form-group">
            <h2 >ADJUSTMENT DECISION</h2>

            <div class="ui-g">

                <div class="ui-g-3">
                    <p:outputLabel for="adjDecisionDateProcessed"
                                   value="Date Processed" 
                                   styleClass="#{bean.claim.residencyType.typeCode eq 'NRES' and bean.claim.statusCode ne 'ADJUST REQ' ? 'disabled' : ''}"/>
                    <p:calendar id="adjDecisionDateProcessed"
                                value="#{claim.claimAdjustmentsDecision.adjustmentDate}"
                                pattern="yyyyMMdd" placeholder="YYYYMMDD" yearRange="c-20:c+0"
                                navigator="true" required="true"
                                requiredMessage="Processed Date is required"
                                disabled="#{bean.claim.residencyType.typeCode eq 'NRES' and bean.claim.statusCode ne 'ADJUST REQ'}" >
                        <f:converter converterId="localDateConverter"/>
                    </p:calendar>
                </div>

                <div class="ui-g-3">
                    <p:outputLabel for="adjDecisionAmount" value="Amount" styleClass="disabled" />
                    <p:inputText id="adjDecisionAmount"
                                 value="#{claim.claimAdjustmentsDecision.amount}"
                                 required="false" disabled="true" />
                </div>
                <!--BCMOHAD-9593- Enabled Status drop down to edit for both NRES and RES-->
                <div class="ui-g-3">
                    <p:outputLabel for="adjDecisionStatus" value="Status"/>
                    <h:selectOneMenu id="adjDecisionStatus"
                                     value="#{claim.claimAdjustmentsDecision.adjustmentStatus}"
                                     required="true">
                        <f:selectItem itemLabel="" itemValue="" />
                        <f:selectItem itemLabel="APPROVED" itemValue="APPROVED" />
                        <f:selectItem itemLabel="DENIED" itemValue="DENIED" />
                    </h:selectOneMenu>
                </div>
            </div>

            <!--BCMOHAD-9593- Enabled decision reason one and two to edit and expanded text area to accept until 256 chars for both NRES and RES-->
            <div class="ui-g" style="margin-bottom: 20px">

                <div class="ui-g-6">
                    <p:outputLabel for="adjDecReason1" value="Reason for Decision One"/>
                    <p:inputTextarea id="adjDecReason1"
                                 value="#{claim.adjDecisionReasons[0].freeFormReason}"
                                 maxlength="256" rows="1" cols="76" required="true" />
                </div>

                
                <div class="ui-g-6">
                    <p:outputLabel for="adjDecReason2" value="Reason for Decision Two"/>
                    <p:inputTextarea id="adjDecReason2"
                                 value="#{claim.adjDecisionReasons[1].freeFormReason}"
                                 required="false" maxlength="256" rows="1" cols="76"/>
                </div>

            </div>

            <div class="ui-g">
                <div class="ui-g-12 submit-buttons">
                    <!--BCMOHAD-9593- Enabled save button for all types of claims except Void for both NRES and RES-->
                    <p:commandButton id="saveAdjDec" styleClass="submit-button" 
                                     update="@form" process="editAdjustmentDecisionForm" value="Save"
                                     action="#{bean.saveClaimAdjDecision}" onclick="clearMessages()"
                                     disabled="#{bean.claim.statusCode eq 'VOID'}"
                                     oncomplete="window.scrollTo(0,0)">
                    </p:commandButton>
                    <!--BCMOHAD-9593- Delete button disabled when claim status is Processed, Void and Adjust Req; enabled when it is Adjust App claim for both NRES and RES-->
                    <p:commandButton id="deleteAdjDec" value="Delete" update="@form editAdjustmentRequestForm"
                                     process="@this" style="margin-right: 10px;" onclick="clearMessages()"
                                     disabled="#{bean.deleteDecisionDisabled or bean.claim.statusCode eq 'VOID'}"
                                     styleClass="#{bean.deleteDecisionDisabled or bean.claim.statusCode eq 'VOID'? 'secondary-button' : 'danger'}"
                                     action="#{bean.deleteClaimAdjDecision}"
                                     oncomplete="window.scrollTo(0,0)">
                        <p:resetInput target="editAdjustmentRequestForm editAdjustmentDecisionForm" />
                    </p:commandButton>
                </div>
            </div>
        </div>
    </h:panelGroup>    

</ui:composition>