<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <p:dataTable id="searchResults" value="#{searchBean.claimSearchResults}" var="result" rowIndexVar="rowIndex"
                 rows="100" paginator="true" paginatorPosition="top" style="margin-top: 40px"
                 paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {NextPageLink}"
                 currentPageReportTemplate="Results: {startRecord}-{endRecord} of {totalRecords}"
                 rowHover="true" rowKey="#{result.id}" lazy="true">

        <f:facet name="header" ><h:outputText value="Search Results - #{searchBean.resultsTitle}"/></f:facet>

	<p:column headerText="#" width="5%">  
            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
                <div class="table-link" >
        			<h:outputText value="#{rowIndex + 1}"/>  
                </div>
            </h:link>        
    	</p:column>  
    
        <p:column headerText="PROVINCE" sortBy="#{result.treatingPteId.provinceCode}" width="10%">
            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
                <div class="table-link" >
                    <h:outputText value="#{searchBean.resident ? result.treatingPteId.provinceCode : result.patId.province}"/>
                </div>
            </h:link>        
        </p:column>

        <p:column headerText="HOSPITAL" sortBy="#{result.hspId.name}">
            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
                <div class="table-link" >
                    <h:outputText value="#{empty result.hspId.name ? '&#160;' : result.hspId.name}" />
                </div>
            </h:link>              
        </p:column>

        <p:column headerText="LAST NAME" sortBy="#{result.patId.lastName}">
            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
                <div class="table-link" >
                    <h:outputText value="#{empty result.patId.lastName ? '&#160;' : result.patId.lastName}"/>
                </div>
            </h:link>              
        </p:column>

        <c:if test="#{!searchBean.inpatient}">
	        <p:column headerText="ADMISSION DATE" sortBy="#{result.serviceDate}">
	            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
	                <div class="table-link" >
	                    <h:outputText value="#{empty result.serviceDate ? '&#160;' : result.serviceDate}">
	                        <f:convertDateTime type="localDate" pattern="yyyy MMM dd" />
	                    </h:outputText>
	                </div>
	            </h:link>              
	        </p:column>             
		</c:if>
        <c:if test="#{searchBean.inpatient}">
	        <p:column headerText="ADMISSION DATE" sortBy="#{result.admissionsList[0].admissionDate}">
	            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
	                <div class="table-link" >
	                    <h:outputText value="#{empty result.admissionsList[0].admissionDate ? '&#160;' : result.admissionsList[0].admissionDate}">
	                        <f:convertDateTime type="localDate" pattern="yyyy MMM dd" />
	                    </h:outputText>
	                </div>
	            </h:link>              
	        </p:column>             
		</c:if>

        <p:column headerText="TOTAL AMOUNT CLAIMED" sortBy="#{result.totalAmountClaimed}">
            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
                <div class="table-link" >
                    <h:outputText value="#{empty result.totalAmountClaimed ? '&#160;' : result.totalAmountClaimed}" >
                        <f:convertNumber currencySymbol="$" type="currency"/>
                    </h:outputText>
                </div>
            </h:link>              
        </p:column>

        <p:column headerText="STATUS" sortBy="#{result.csId.statusDesc}" width="10%">
            <h:link target="_blank" outcome="#{searchBean.editRedirectUrl}#{result.id}">
                <div class="table-link" >
                    <h:outputText value="#{result.csId.statusDesc}"/>
                </div>
            </h:link>              
        </p:column>

    </p:dataTable>

</ui:composition>
