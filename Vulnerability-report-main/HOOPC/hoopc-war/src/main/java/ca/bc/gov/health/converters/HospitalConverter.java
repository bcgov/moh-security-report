/*
 * To change this license header, choose License Headers in Project Properties. To change this
 * template file, choose Tools | Templates and open the template in the editor.
 */
package ca.bc.gov.health.converters;

import ca.bc.gov.health.database.entity.Hospitals;
import ca.bc.gov.health.service.HoopcAppService;
import jakarta.faces.component.UIComponent;
import jakarta.faces.context.FacesContext;
import jakarta.faces.convert.Converter;
import jakarta.faces.convert.ConverterException;
import jakarta.faces.convert.FacesConverter;
import jakarta.inject.Inject;

/**
 * HospitalConverter.
 *
 * @author trevor.schiavone
 */
@SuppressWarnings("rawtypes")
@FacesConverter(value = "HospitalConverter", managed = true)
public class HospitalConverter implements Converter {

  @Inject private HoopcAppService applicationService;

  /*
   * (non-Javadoc)
   *
   * @see jakarta.faces.convert.Converter#getAsObject(jakarta.faces.context.FacesContext,
   * jakarta.faces.component.UIComponent, java.lang.String)
   */
  @Override
  public Object getAsObject(FacesContext fc, UIComponent uic, String value)
      throws ConverterException {

    if (value != null && value.trim().length() > 0) {
      try {
        for (Hospitals hospitals : applicationService.getHospitals(null, null)) {

          if (hospitals.getId().equals(Long.parseLong(value))) {
            return hospitals;
          }
        }
      } catch (NumberFormatException ex) {
        return null;
      }
    }
    return null;
  }

  /*
   * (non-Javadoc)
   *
   * @see jakarta.faces.convert.Converter#getAsString(jakarta.faces.context.FacesContext,
   * jakarta.faces.component.UIComponent, java.lang.Object)
   */
  @Override
  public String getAsString(FacesContext fc, UIComponent uic, Object object) {
    if (object != null && !object.equals("")) {
      return String.valueOf(((Hospitals) object).getId());
    } else {
      return null;
    }
  }
}
