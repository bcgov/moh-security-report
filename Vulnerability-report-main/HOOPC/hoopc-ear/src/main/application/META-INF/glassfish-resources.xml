<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    
    <!-- Custom Resources -->
    <custom-resource factory-class="org.glassfish.resources.custom.factory.PropertiesFactory" res-type="java.util.Properties" jndi-name="hoopc/oidc_properties">
        <property name="providerUri" value="https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/"></property>
        <property name="clientId" value="HOOPC"></property>
        <property name="clientSecret" value="${ALIAS=hoopc-keycloak-client-secret}"></property>
        <property name="redirectUri" value="http://localhost:8080/callback"></property>
        <property name="scope" value="openid"></property>
        <property name="callerGroupsClaim" value=""></property>
        <property name="callerNameClaim" value="preferred_username"></property>
        <property name="siteminderLogoutUri" value="https://logontest7.gov.bc.ca/clp-cgi/logoff.cgi"></property>
        <property name="phsaLogoutUri" value="https://sts.healthbc.org/adfs/ls/?wa=wsignout1.0"></property>
        <property name="env" value="LOCAL"></property>
    </custom-resource>
    
    <custom-resource factory-class="org.glassfish.resources.custom.factory.PropertiesFactory" res-type="java.util.Properties" jndi-name="hpc/application_properties">
        <property name="env_name" value="D"></property>
    </custom-resource>
    
    <custom-resource factory-class="org.glassfish.resources.custom.factory.PropertiesFactory" res-type="java.util.Properties" jndi-name="hpc/health_registry_properties">
        <!-- note that the & in the URL is XML encoded -->
        <property name="getDemoEndpoint" value="spring-ws:https://hd2.hcim.ehealth.gov.bc.ca/HCIM.HIALServices.Secured/QUPA_AR101102.asmx?soapAction=urn:hl7-org:v3/QUPA_IN101101&amp;sslContextParameters=#sslParameters"></property>
        <property name="keyManagerPassword" value="${ALIAS=hoopc-keymanager}"></property>
        <property name="keyStorePassword" value="${ALIAS=hoopc-keystore}"></property>
        <property name="trustStorePassword" value="${ALIAS=hoopc-truststore}"></property>
        <property name="keystoreName" value="HOOPC_HD1.jks"></property>
        <property name="receivingFacility" value="BC00002041"></property>
        <property name="permissionGroup" value="TRAININGAdmin"></property>
        <property name="e45_env_name" value="D"></property>
        
        <!-- HNSecure connection parameters -->
        <property name="tokenEndpoint" value="https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token"/>
        <property name="scopes" value="system/*.write"/>
        <property name="clientIdHnSecure" value="E13DD6BB-BB6A4589A8E"/> <!-- Used as the Sending Facility -->
        <property name="clientSecretHnSecure" value="${ALIAS=hoopc-hnsecure-keycloak-client-secret}"/>
        <property name="hnSecureUrl" value="https://hnsesb-sandbox.api.gov.bc.ca/hl7v2"/>
        <!-- <property name="hnSecureUrl" value="http://localhost:14885/hl7v2"/> -->
    </custom-resource>
    
    <custom-resource factory-class="org.glassfish.resources.custom.factory.PropertiesFactory" res-type="java.util.Properties" jndi-name="hpc/monthend_properties">
        <property name="monthEndPropsPath" value="/monthEnd.props"></property>
        <property name="runMonthEnd" value="false"></property>
    </custom-resource>
    
    <!-- JDBC Connections -->
    <jdbc-connection-pool name="HOOPCPool-DEV" connection-validation-method="auto-commit" datasource-classname="oracle.jdbc.pool.OracleConnectionPoolDataSource" wrap-jdbc-objects="false" res-type="javax.sql.ConnectionPoolDataSource">
        <property name="Password" value="${ALIAS=hoopcdb-password}"/>
        <property name="URL" value="jdbc:oracle:thin:@daudelin.hlth.gov.bc.ca:1521:hoopcd"/>
        <property name="User" value="hpcd1"/>
    </jdbc-connection-pool>
    <jdbc-resource pool-name="HOOPCPool-DEV" jndi-name="jdbc/hoopc"></jdbc-resource>
    
</resources>
