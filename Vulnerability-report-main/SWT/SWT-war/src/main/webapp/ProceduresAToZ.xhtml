<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/WEB-INF/templates/gov30Template.xhtml">
    <ui:define name="swtMetaData">
        <meta name="Description" content="Lists each the surgical procedures alphabetically, including a description for each surgery, and a link to the wait times results page for that surgery."/>
        <meta property="og:site_name" content="Surgical Wait times"/>
        <meta property="og:type" content="website"/>
        <meta property="og:url" content="https://swt.hlth.gov.bc.ca"/>
        <meta property="og:title" content="Procedures A-Z"/>
        <meta property="og:description" content="Lists each the surgical procedures alphabetically, including a description for each surgery, and a link to the wait times results page for that surgery."/>
        <meta property="og:image" content="https://swt.hlth.gov.bc.ca/jakarta.faces.resource/images/steps-to-surgery.jpg.xhtml"/>
    </ui:define>
    
    <ui:define name="title">Procedures A-Z</ui:define>
    
    <ui:define name="searchBar">
        <ui:include src="WEB-INF/fragments/searchBar.xhtml" />
    </ui:define>

    <ui:define name="content">
        <script language='javascript'>           
            window.onpageshow = function(event) {
                if (event.persisted) {
                    window.location.reload(); 
                }
            };
        </script>
        <div class="row row-no-margin" style="margin-bottom: 10px">
            <div class="col-xs-48 col-sm-36">
                <a href="Home.xhtml">Home</a> / Procedures A to Z
            </div>

            <ui:include src="WEB-INF/fragments/emailPrintShare.xhtml" />

        </div>
       
        <div class="col-lg-48">
         <h:form id="form1">    
             <p:dialog styleClass="spinner-box" widgetVar="statusDialog" modal="false" 
                        draggable="false" closable="false" resizable="false" showHeader="false" >
                  <h:graphicImage name="images/loader.png" styleClass="spinning-loader"/>
                  <br/>
                  <h:outputText value="Loading" />
              </p:dialog>
            <h1>Procedures A-Z</h1>
            
            <p>Surgical procedures are listed below in alphabetical order from A to Z. 
                Scroll down the page to view all the surgeries and click on a procedure to view the wait time information.</p>
           
            <div class="az-quick-search">
                <p:outputLabel value="Quick search:" for="procedureQuickSearch" />
                <p:autoComplete id="procedureQuickSearch" value="#{proceduresAToZ.selectedProcedure}" 
                                completeMethod="#{proceduresAToZ.autoCompleteProcedure}" var="procedureAuto"
                                itemLabel="#{procedureAuto.procedureGroupNm}" itemValue="#{procedureAuto}" forceSelection="true"
                                converter="procedureConverter"
                                placeholder="Enter a procedure name"
                                scrollHeight="250"
                                onkeydown="if (event.keyCode == 13) { return false; }">
                    <p:ajax event="itemSelect" listener="#{proceduresAToZ.goToProcedure}" 
                            onstart="PF('statusDialog').show();"/>                    
                </p:autoComplete>                
            </div>
            <p:tabView activeIndex="#{proceduresAToZ.tabIdx}">
                     <p:ajax event="tabChange" listener="#{proceduresAToZ.onTabChange}"/>   
              <p:tab id="Adult" >
                            <f:facet name="title">
                                <h:outputText value="ADULT" /><br/>
                                <h:outputText style="font-size:14px; font-style: italic" value="(17 and over)" />
                            </f:facet>
                            <p class="jump-to hidden-xs ">Jump to:
                                    <ui:repeat value="#{specialists.alphabetStrings}" var="alpha" >
                                        <h:link value="#{alpha}" fragment="a#{alpha}" style="text-decoration: none;"
                                                styleClass="#{proceduresAToZ.treeMapAdult.containsKey(alpha) ? '' : 'dead-link'}" 
                                                />
                                    </ui:repeat>    
                            </p> 

                        <c:forEach items="#{proceduresAToZ.treeMapAdult}" var="entry">
                            <h:dataTable value="#{entry.value}" var="procA" styleClass="az-table">                                    
                                <h:column >
                                    <div style="margin-right:20px;" >
                                        <a name="a#{entry.key}" class="a-to-z-anchor"></a>
                                        <h:outputText value="#{entry.key}" styleClass="big-letter"
                                                      rendered="#{component.namingContainer.rowIndex eq 0}"/>                                        
                                    </div>                                        
                                </h:column>
                                <h:column >
                                    <div >
                                        <h:link value="#{procA.procedureGroupNm}" outcome="WaitTimesResults"
                                                styleClass="procedure-list" onclick="PF('statusDialog').show();"> 
                                            <f:param name="rollupProcedure" value="#{procA.rollupProcedureGroupId}"/>
                                            <f:param name="procName" value="#{procA.procedureGroupNm}"/>
                                            <f:param name="adult" value="Y"/>
                                        </h:link>
                                        <br/>
                                        <h:outputText value="#{procA.procedureGroupDesc}"/>
                                    </div>                         
                                </h:column>
                            </h:dataTable>
                            <div class="row az-list-back-to-top">
                                <a href="#top"> 
                                    <h:graphicImage name="images/top-arrow.png" /> 
                                    Back to top
                                </a>
                            </div> 
                            <hr/>
                        </c:forEach>
                    </p:tab>
                    <p:tab id="Pediatric" > 
                            <f:facet name="title">
                                <h:outputText value="PEDIATRIC" /><br/>
                                <h:outputText style="font-size:14px; font-style: italic" value="(Under 17)" />
                            </f:facet>
                            <p class="jump-to hidden-xs ">Jump to:
                                    <ui:repeat value="#{specialists.alphabetStrings}" var="alpha" >
                                        <h:link value="#{alpha}" fragment="#{alpha}" style="text-decoration: none;"
                                                styleClass="#{proceduresAToZ.treeMapPed.containsKey(alpha) ? '' : 'dead-link'}" 
                                                />
                                    </ui:repeat>                                     
                            </p>
                      
                        <c:forEach items="#{proceduresAToZ.treeMapPed}" var="entryPed">
                            <h:dataTable value="#{entryPed.value}" var="procP" styleClass="az-table">
                                <h:column>
                                    <div style="margin-right:20px;" >
                                        <a name="#{entryPed.key}" class="a-to-z-anchor"></a>
                                        <h:outputText value="#{entryPed.key}" styleClass="big-letter"
                                                          rendered="#{component.namingContainer.rowIndex eq 0}"/>
                                    </div>                                        
                                </h:column>
                                <h:column>
                                    <div>
                                        <h:link value="#{procP.procedureGroupNm}" outcome="WaitTimesResults"
                                                styleClass="procedure-list" onclick="PF('statusDialog').show();"> 
                                            <f:param name="rollupProcedure" value="#{procP.rollupProcedureGroupId}"/>                                            
                                            <f:param name="procName" value="#{procP.procedureGroupNm}"/>
                                            <f:param name="adult" value="N"/>
                                        </h:link>
                                        <br/>
                                        <h:outputText value="#{procP.procedureGroupDesc}"/>
                                    </div>
                                </h:column>
                            </h:dataTable>
                            <div class="row az-list-back-to-top">
                                <a href="#top"> 
                                    <h:graphicImage name="images/top-arrow.png" /> 
                                    Back to top
                                </a>
                            </div>                            
                            <hr/>
                        </c:forEach>
                    </p:tab>   
                </p:tabView>
            </h:form>      
        </div>     
        <ui:include src="WEB-INF/fragments/emailPrintShareMobile.xhtml" />
    </ui:define>
</ui:composition>
</html>