<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.

Name                Date            Modification
Killian Faussart    2017-07-19      New page for SWT Enhancement
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/WEB-INF/templates/gov30Template.xhtml">
    <ui:define name="title">Provincial Strategies</ui:define>

    <ui:define name="searchBar">
        <ui:include src="WEB-INF/fragments/searchBar.xhtml" />
    </ui:define>

    <ui:define name="content">
        <script language='javascript'>
            window.onpageshow = function(event) {
                if (event.persisted) {
                    window.location.reload();
                }
            };
        </script>
        <div class="row row-no-margin" style="margin-bottom: 10px">
            <div class="col-xs-48">
                <a href="Home.xhtml">Home</a> / <a href="AboutWaitTimes.xhtml">About Wait Times</a>
                / Provincial Strategies

            </div>
            <ui:include src="WEB-INF/fragments/emailPrintShare.xhtml" />
        </div>

        <div class="col-lg-11">
            <p:panel id="panel" styleClass="sidebar-panel">
                <p><h:link value="Wait Time Definitions" outcome="WaitTimeDefinitions"  /></p>
                <p><h:link value="Wait Time Data Collection" outcome="WaitTimeDataCollection"/></p>
                <p><h:link value="Provincial Strategies" outcome="ProvincialStrategies" style="text-decoration: none"/></p>
                <p><h:link value="Procedure Groupings" outcome="ProcedureGroupings"/></p>
            </p:panel>
        </div>

        <div class="col-lg-37" style="margin-bottom: 15px">

            <h1>Provincial Strategies</h1>

            <p>More than half of all surgeries in B.C. are performed to address a medical emergency or a condition that requires immediate attention.
                Scheduled surgery, though medically necessary, is planned in advance. For this type of surgery, a surgeon’s office sends a booking
                package to the health authority where the surgery will be performed. Until the date of their surgery, the patient is placed on a
                waitlist.
            </p>
            <p>The Ministry of Health, in collaboration with the Provincial Surgical Executive Committee and the health authorities, has developed
                plans to improve timely access to appropriate scheduled surgical procedures, optimally manage surgical waitlists, and improve the
                patient experience. Actions include:
            </p>
            <h2>Improve Timely Access</h2>
            <ul style="list-style-type: disc">
                <li><p>Measuring and monitoring the <h:link value="Wait to See a Surgeon" outcome="StepsToScheduledSurgery"/> and the
                    <p:commandLink oncomplete="PF('findProcPanel').show();"
                                   value="Wait for Surgery times"
                                   update="findProcPanel" onclick="$(window.scrollTo(0, 0))"
                                   actionListener="#{findByProcedure.setDialogPage('findByProcStep1.xhtml')}"/>
                    in B.C. The Ministry sets targets for
                    wait times in the province, and works with health authorities to meet the targets.</p>
                </li>
                <li><p>Making operating rooms more efficient and finding ways to perform more surgeries using existing resources.</p></li>
                <li><p>Developing Surgical Services Programs, new health authority programs responsible for coordinating and/or providing
                    all of the services a surgical patient requires, from diagnosis to post-operative care.</p>
                </li>
                <li><p>Developing an appropriateness framework for surgery, a set of guidelines intended to prevent unnecessary tests
                    and treatments and to ensure that care is safe and effective.</p>
                </li>
            </ul>
            <h2>Manage Surgical Waitlists Optimally</h2>
            <ul style="list-style-type: disc">
                <li><p>Health authorities scheduling all surgeries, including those from the waitlists.</p></li>
                <li><p>Performing regular reviews and audits of waitlists.</p></li>
            </ul>
            <h2>Improve the Patient Experience</h2>
            <ul style="list-style-type: disc">
                <li><p>Providing more information, support, and rehabilitation services for patients.</p></li>
                <li><p>Extending Enhanced Recovery After Surgery (ERAS), a best practice approach to support optimal outcomes for patients
                    following surgery.</p>
                </li>
            </ul>

            <h1>Long Term Wait Time Data</h1>

            <p>Below is historical information for all scheduled procedures waiting and completed in B.C. For more detailed information about
                specific procedures, use the <p:commandLink style="font-weight:400; text-transform:none"
                                                            oncomplete="PF('findProcPanel').show();"
                                                            value="Find a Procedure tool"
                                                            update="findProcPanel" onclick="$(window.scrollTo(0, 0))"
                                                            actionListener="#{findByProcedure.setDialogPage('findByProcStep1.xhtml')}"/>. </p>

            <h:outputText value="Surgical Patient Registry"
                          style="font-weight: bold; color: black; font-family: 'myriad-pro', Calibri, Arial, sans serif;"
                          rendered="#{not empty ShowAdultSiteStatistics.orderedLongTermSection1WaitTimes}" />

            <div id="dataTableOverflowWrapper" class="datatable-overflow-wrapper">

                <!--SPR Data -->
                <p:dataTable id="longTermWTSec1Id1" styleClass="long-term-wait-table"
                             rendered="#{not empty ShowAdultSiteStatistics.orderedLongTermSection1WaitTimes}"
                             var="record" value="#{ShowAdultSiteStatistics.orderedLongTermSection1WaitTimes}">

                    <p:columnGroup type="header">
                        <p:row>
                            <p:column styleClass="resultpanel-topleft">
                                <f:facet name="header">
                                    <h:outputText value="Years "/>
                                </f:facet>
                            </p:column>
                            <p:column styleClass="resultpanel-topleft ">
                                <f:facet name="header">
                                    <h:outputText value="Cases Waiting "/>
                                </f:facet>
                            </p:column>
                            <p:column styleClass="resultpanel-topleft ">
                                <f:facet name="header">
                                    <h:outputText value="Cases Completed "/>
                                </f:facet>
                            </p:column>
                            <p:column styleClass="resultpanel-topleft ">
                                <f:facet name="header">
                                    <h:outputText value="50% of Cases completed within"/>
                                </f:facet>
                            </p:column>
                            <p:column styleClass="resultpanel-topleft" style="border-right: 1px solid #305982">
                                <f:facet name="header">
                                    <h:outputText value="90% of Cases completed within"/>
                                </f:facet>
                            </p:column>
                        </p:row>
                    </p:columnGroup>

                    <p:subTable id="subTable" var="subrecord" value="#{record.longTermWTSec1Tos}">
                        <f:facet name="header">
                            <h:outputText value="#{record.procedureGroupNm}" class="priorityHeader"></h:outputText>
                        </f:facet>
                        <p:column style="text-align: center;">
                            <h:outputText value="#{subrecord.fiscalYr}"></h:outputText>
                        </p:column>
                        <p:column style="text-align: center;">
                            <h:outputText value="#{subrecord.patientsWaitingNbr lt 5 ? 'Less than 5' : subrecord.patientsWaitingNbr}" >
                                <f:convertNumber pattern="###,###" />
                            </h:outputText>
                        </p:column>
                        <p:column style="text-align: center;">
                            <h:outputText value="#{subrecord.proceduresPerformedNbr}" >
                                <f:convertNumber pattern="###,###" />
                            </h:outputText>
                        </p:column>
                        <p:column style="text-align: center;">
                            <h:outputText value="#{subrecord.fiftyPctWeeksNbr} weeks" ></h:outputText>
                            <h:outputText value="N/A" rendered="#{subrecord.fiftyPctWeeksNbr == null}" />
                        </p:column>
                        <p:column style="text-align: center;">
                            <h:outputText value="#{subrecord.ninetyPctWeeksNbr} weeks" ></h:outputText>
                            <h:outputText value="N/A" rendered="#{subrecord.ninetyPctWeeksNbr == null}" />
                        </p:column>

                    </p:subTable>
                </p:dataTable>
            </div>

            <div style="font-size: 10px;" >
                <h:outputText value="Source: Surgical Wait Times Database. Dataset is subject to restating to reflect data quality improvements as well as current reporting requirements as determined by the Ministry of Health."
                              rendered="#{not empty ShowAdultSiteStatistics.orderedLongTermSection1WaitTimes}"/>
                <br/>
                <h:outputText value="Note: This data excludes cardiac surgeries, corneal transplants, and scopes, i.e., laryngoscopy, laryngopharyngoscopy, and bronchoscopy.  Data for all ages is provided."
                              rendered="#{not empty ShowAdultSiteStatistics.orderedLongTermSection1WaitTimes}"/>
            </div>

            <!--BC Cancer-->
 <!--           <c:if test="#{not empty ShowAdultSiteStatistics.dataSourceLongTermWTSec2Tos.get(0)}" > Temporary commented-->
            <c:if test="false" >
                <br/>
                <h:outputText value="#{ShowAdultSiteStatistics.dataSourceLongTermWTSec2Tos.get(0).dataSource}" style="font-weight: bold; color: #000000"/>
                <div id="dataTableOverflowWrapperBcCancer" class="datatable-overflow-wrapper-bccancer">
                    <p:dataGrid var="subrecord1"  value="#{ShowAdultSiteStatistics.dataSourceLongTermWTSec2Tos.get(0).pgnLongTermWTSec2Tos}">
                        <p:dataTable var="subrecord2" styleClass="long-term-wait-table" value="#{subrecord1.priorityLongTermWTSec2Tos}">
                            <p:columnGroup type="header">
                                <p:row>
                                    <p:column styleClass="resultpanel-topleft">
                                        <f:facet name="header">
                                            <h:outputText value="Years "/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft ">
                                        <f:facet name="header">
                                            <h:outputText value="Cases Waiting "/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft ">
                                        <f:facet name="header">
                                            <h:outputText value="Cases Completed "/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft ">
                                        <f:facet name="header">
                                            <h:outputText value="50% of Cases completed within"/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft" style="border-right: 1px solid #305982">
                                        <f:facet name="header">
                                            <h:outputText value="90% of Cases completed within"/>
                                        </f:facet>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="5" styleClass="long-term-wait-proc">
                                        <f:facet name="header">
                                            <h:outputText value="#{subrecord1.procedureGroupNm}" />
                                        </f:facet>
                                    </p:column>
                                </p:row>
                          </p:columnGroup>

                            <p:subTable var="subrecord3" value="#{subrecord2.longTermWTSec2Tos}">
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.fiscalYr}"/>
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.patientsWaitingNbr lt 5 ? 'Less than 5' : subrecord3.patientsWaitingNbr}" >
                                        <f:convertNumber pattern="###,###" />
                                    </h:outputText>
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.proceduresPerformedNbr}" >
                                        <f:convertNumber pattern="###,###" />
                                    </h:outputText>
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.fiftyPctWeeksNbr} weeks" ></h:outputText>
                                    <h:outputText value="N/A" rendered="#{subrecord3.fiftyPctWeeksNbr == null}" />
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.ninetyPctWeeksNbr} weeks"></h:outputText>
                                    <h:outputText value="N/A" rendered="#{subrecord3.ninetyPctWeeksNbr == null}" />
                                </p:column>
                            </p:subTable>
                        </p:dataTable>
                    </p:dataGrid>
                </div>
                <ui:include src="/WEB-INF/fragments/static_content/bc_cancer_agency.xhtml" />
            </c:if>

            <!--cardiac services -->
            <c:if test="#{not empty ShowAdultSiteStatistics.dataSourceLongTermWTSec2Tos.get(ShowAdultSiteStatistics.checkStatsArray())}" >
                <br/>
                <h:outputText value="#{ShowAdultSiteStatistics.dataSourceLongTermWTSec2Tos.get(ShowAdultSiteStatistics.checkStatsArray()).dataSource}" style="font-weight: bold; color: #000000"/>
                <div id="dataTableOverflowWrapperCardiac" class="datatable-overflow-wrapper-cardiac">
                    <p:dataGrid var="subrecord1"  value="#{ShowAdultSiteStatistics.dataSourceLongTermWTSec2Tos.get(ShowAdultSiteStatistics.checkStatsArray()).pgnLongTermWTSec2Tos}">
                        <p:dataTable var="subrecord3" styleClass="long-term-wait-table" value="#{subrecord1.priorityLongTermWTSec2Tos.get(ShowAdultSiteStatistics.checkCardioStatsArray()).longTermWTSec2Tos}">
                            <p:columnGroup type="header">
                                <p:row>
                                    <p:column styleClass="resultpanel-topleft">
                                        <f:facet name="header">
                                            <h:outputText value="Years "/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft ">
                                        <f:facet name="header">
                                            <h:outputText value="Cases Waiting "/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft ">
                                        <f:facet name="header">
                                            <h:outputText value="Cases Completed "/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft ">
                                        <f:facet name="header">
                                            <h:outputText value="50% of Cases completed within"/>
                                        </f:facet>
                                    </p:column>
                                    <p:column styleClass="resultpanel-topleft" style="border-right: 1px solid #305982">
                                        <f:facet name="header">
                                            <h:outputText value="90% of Cases completed within"/>
                                        </f:facet>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="5" styleClass="long-term-wait-proc">
                                        <f:facet name="header">
                                            <h:outputText value="#{subrecord1.procedureGroupNm}" class="priorityHeader"/>
                                        </f:facet>
                                    </p:column>
                                </p:row>
                          </p:columnGroup>

                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.fiscalYr}"/>
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.patientsWaitingNbr lt 5 ? 'Less than 5' : subrecord3.patientsWaitingNbr}">
                                    </h:outputText>
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.proceduresPerformedNbr}">
                                        <f:convertNumber pattern="###,###" />
                                    </h:outputText>
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.fiftyPctWeeksNbr} weeks"></h:outputText>
                                    <h:outputText value="N/A" rendered="#{subrecord3.fiftyPctWeeksNbr == null}" />
                                </p:column>
                                <p:column width="140" style="text-align: center;">
                                    <h:outputText value="#{subrecord3.ninetyPctWeeksNbr} weeks" ></h:outputText>
                                    <h:outputText value="N/A" rendered="#{subrecord3.ninetyPctWeeksNbr == null}" />
                                </p:column>
                        </p:dataTable>
                    </p:dataGrid>
                </div>
                <ui:include src="/WEB-INF/fragments/static_content/cardiac_services_bc.xhtml" />
            </c:if>

            <script language='javascript'>
                var overflowWrapperHeight = $('#dataTableOverflowWrapper').css('height');
                document.styleSheets[0].addRule('.datatable-overflow-wrapper:before','height: ' + overflowWrapperHeight);
                var overflowWrapperHeight = $('#dataTableOverflowWrapperBcCancer').css('height');
                document.styleSheets[0].addRule('.datatable-overflow-wrapper-bccancer:before','height: ' + overflowWrapperHeight);
                var overflowWrapperHeight = $('#dataTableOverflowWrapperCardiac').css('height');
                document.styleSheets[0].addRule('.datatable-overflow-wrapper-cardiac:before','height: ' + overflowWrapperHeight);
            </script>
        </div>
        <ui:include src="WEB-INF/fragments/emailPrintShareMobile.xhtml" />
    </ui:define>
    <p:dialog id="findProcPanel" widgetVar="findProcPanel" resizable="false"
              draggable="false" width="800px" modal="true" styleClass="disable-scroll" >

        <f:facet name="header" >
            <h:graphicImage name="images/body-icon-mm.png" />
            <h:outputText value="Find By Procedure" style="padding-left: 15px"/>
        </f:facet>
        <h:form id="dialogForm" >
            <p:outputPanel id="dialogPanel">
                <ui:include src="#{findByProcedure.dialogPage}" />
            </p:outputPanel>
        </h:form>
        <div class="row procedure-search-footer-row" style="text-align: center;">
            Can't find what you're looking for?
            <a href="ProceduresAToZ.xhtml" >Search Procedures A-Z </a>
        </div>
    </p:dialog>
</ui:composition>
</html>
