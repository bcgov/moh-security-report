<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.

Name                Date            Modification
Killian Faussart    2017-07-19      New page for SWT Enhancement
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/WEB-INF/templates/gov30Template.xhtml">
    <ui:define name="swtMetaData">
        <meta name="Description" content="Displays the wait times for surgeries for this specific specialist."/>
        <meta property="og:site_name" content="Surgical Wait times"/>
        <meta property="og:type" content="website"/>
        <meta property="og:url" content="https://swt.hlth.gov.bc.ca"/>
        <meta property="og:title" content="Specialist Profile"/>
        <meta property="og:description" content="Displays the wait times for surgeries for this specific specialist."/>
        <meta property="og:image" content="https://swt.hlth.gov.bc.ca/jakarta.faces.resource/images/steps-to-surgery.jpg.xhtml"/>
                                           
    </ui:define>
    
    <ui:define name="title">Specialist Profile</ui:define>
    
    <ui:define name="searchBar">
        <ui:include src="WEB-INF/fragments/searchBar.xhtml" />
    </ui:define>
    
    <ui:define name="content">
        <script language='javascript'>           
            window.onpageshow = function(event) {
                if (event.persisted) {
                    window.location.reload(); 
                }
            };
        </script>
        <p:dialog styleClass="spinner-box" widgetVar="statusDialog" modal="false" 
                draggable="false" closable="false" resizable="false" showHeader="false" >
            <h:graphicImage name="images/loader.png" styleClass="spinning-loader"/>
            <br/>
            <h:outputText value="Loading" />
        </p:dialog>
        
         <div class="col-lg-48" style="padding: 0px">
            <div class="row" style="margin-bottom: 10px">
                <div class="col-xs-48 col-sm-36">
                    <a href="Home.xhtml">Home</a> / <a href="SpecialistsAToZ.xhtml">Specialists A-Z</a> / Specialist Profile
                </div>

                <ui:include src="WEB-INF/fragments/emailPrintShare.xhtml" />
      
            </div>
            <h1>Specialist Information for 
                <h:outputText value="#{specialistProfile.surgeonNm}"/>   
                    <h:panelGroup rendered="#{ApplicationBean1.isCentralIntakeSurgeon(specialistProfile.surgeonNm)}">
                    <h:outputText id="CentralIntake" value="?" styleClass="question-circle2" style="margin-left: 5px" />
                        <p:tooltip id="toolTipCI" for="CentralIntake" 
                            value="Central Intake is a process used by some hospitals and specialists to support shorter wait times where patients are assigned to the first available specialist, rather than a specific specialist. A Generic Provider is named temporarily, until a specialist is assigned." 
                            position="top" />
                    </h:panelGroup>  
            </h1>
            <h:form>
                <div id="dataTableOverflowWrapper" class="datatable-overflow-wrapper specialist-profile-table">
                    <p:tabView>
                        <p:tab >
                            <f:facet name="title">
                                <h:outputText value="ADULT" /><br/>
                                <h:outputText style="font-size:14px; font-style: italic" value="(17 and over)" />
                            </f:facet>
                            <c:if test="#{empty specialistProfile.treeMapAdult}">
                                <p:row>
                                    <h:outputText value="No procedures found." style="font-weight: 600; font-style: normal; font-size:19px;"/><br/>
                                </p:row>
                            </c:if>
                            <c:forEach items="#{specialistProfile.treeMapAdult}" var="entry">
                                <h:outputText value="#{entry.key}" style="font-weight:600; font-style: normal; font-size: 18px"/>                            
                                <p:dataTable var="specialistA" value="#{entry.value}">
                                    <p:columnGroup type="header" >
                                        <p:row>
                                            <p:column rowspan="2" styleClass="resultpanel-topleft" style="width:45%">
                                                <f:facet name="header">
                                                    <h:outputText value="Surgeon Procedures"  />
                                                </f:facet>                                                                               
                                            </p:column>
                                            <p:column rowspan="2" styleClass="resultpanel-center"  >    
                                                <f:facet name="header">
                                                    <h:outputText value="Cases waiting " />                                        
                                                    <h:outputText id="casesW" value="?" styleClass="question-circle1"/>
                                                    <p:tooltip id="toolTip1" for="casesW" value="Cases Waiting: The number of patients waiting for surgery on the last day 
                                                               of the reporting period." position="top"/>
                                                    <br/>
                                                    <h:outputText value="as of #{specialistProfile.endDt}" style="color: #a7c0c6;"/>
                                                </f:facet>
                                            </p:column>
                                            <p:column colspan="2" styleClass="resultpanel-topright date"
                                                      headerText="Between #{specialistProfile.startDt} and #{specialistProfile.endDt}" />
                                        </p:row>
                                        <p:row>
                                            <p:column styleClass="resultpanel-topright fifty-percent">
                                                <f:facet name="header">
                                                    <h:outputText value="50% of Cases "/>
                                                    <h:outputText id="cases50" value="?" styleClass="question-circle2"/>
                                                    <br/>
                                                    <p:tooltip id="toolTip2" for="cases50" value="50th percentile wait time (median wait time): 50% of all scheduled surgeries completed during the 
                                                       three month reporting period waited less than this wait time." position="top"/>
                                                    <h:outputText value="completed within"/>
                                                </f:facet>
                                            </p:column>
                                            <p:column styleClass="resultpanel-topright ninety-percent">
                                                <f:facet name="header">
                                                    <h:outputText value="90% of Cases "/>
                                                    <h:outputText id="cases90" value="?" styleClass="question-circle2"/>
                                                    <br/>
                                                    <p:tooltip id="toolTip3" for="cases90" value="90th percentile wait time: 90% of all scheduled surgeries completed during the 
                                                       three month reporting period waited less than this wait time." position="top"/>
                                                    <h:outputText value="completed within"/>
                                                </f:facet>    
                                            </p:column>                                 
                                        </p:row>
                                    </p:columnGroup>
                                    <p:column>                                                                     
                                        <h:link value="#{specialistA.procedureGroupNm}" outcome="WaitTimesResults"
                                                    styleClass="procedure-list" onclick="PF('statusDialog').show();">                                             
                                                <f:param name="procName" value="#{specialistA.procedureGroupNm}"/>
                                                <f:param name="adult" value="Y"/>
                                        </h:link>
                                    </p:column>
                                    <p:column style="text-align: center">
                                        <h:outputText id="lt1" value="#{specialistA.patientsWaitingNbr lt 5 ? 'Less than 5' : specialistA.patientsWaitingNbr}" >
                                            <f:convertNumber pattern="###,###,###"/>
                                        </h:outputText>
                                        <p:tooltip id="toolTip6" for="lt1" rendered="#{not empty specialistA.patientsWaitingNbr and specialistA.patientsWaitingNbr lt 5}"
                                                   value="For the purposes of ensuring patient confidentiality, all 
                                                       cases waiting fields shown on the Surgery Wait Times website with values less than five are shown as
                                                        Less than 5" position="top"/>    
                                    </p:column>                                
                                    <p:column style="text-align: center">
                                        <ui:fragment  rendered="#{empty specialistA.fiftyPctWeeksNbrForWaitTwo or specialistA.proceduresPerformedNbr lt 5}">
                                            <h:outputText id="n1" value="N/A" />
                                            <p:tooltip id="toolTip4" for="n1" 
                                                       value="N/A: Not applicable (when there are no cases completed
                                                       during the reporting period, it is not applicable to report wait times information)" position="top"/>           
                                        </ui:fragment>
                                        <ui:fragment  rendered="#{not empty specialistA.fiftyPctWeeksNbrForWaitTwo and specialistA.proceduresPerformedNbr gt 5}">
                                            <h:outputText value="#{specialistA.fiftyPctWeeksNbrForWaitTwo} " />
                                            <h:outputText value="weeks" />
                                        </ui:fragment>
                                    </p:column>
                                    <p:column style="text-align: center">
                                        <ui:fragment  rendered="#{empty specialistA.ninetyPctWeeksNbrForWaitTwo or specialistA.proceduresPerformedNbr lt 5}">
                                            <h:outputText id="n2" value="N/A" />
                                            <p:tooltip id="toolTip5" for="n2" 
                                                       value="N/A: Not applicable (when there are no cases completed
                                                       during the reporting period, it is not applicable to report wait times information)" position="top"/>
                                        </ui:fragment>
                                        <ui:fragment  rendered="#{not empty specialistA.ninetyPctWeeksNbrForWaitTwo and specialistA.proceduresPerformedNbr gt 5}">
                                            <h:outputText value="#{specialistA.ninetyPctWeeksNbrForWaitTwo} " />
                                            <h:outputText value="weeks" />
                                        </ui:fragment>
                                    </p:column>                                       
                                </p:dataTable>
                                <br/>
                            </c:forEach>
                        </p:tab>
                        <p:tab>
                            <f:facet name="title">
                                <h:outputText value="PEDIATRIC" /><br/>
                                <h:outputText style="font-size:14px; font-style: italic" value="(Under 17)" />
                            </f:facet>
                            <c:if test="#{empty specialistProfile.treeMapPed}">
                                <p:row>
                                    <h:outputText value="No procedures found." style="font-weight: 600; font-style: normal; font-size:19px;"/><br/>
                                </p:row>
                            </c:if>
                            <c:forEach items="#{specialistProfile.treeMapPed}" var="entry">
                                <h:outputText value="#{entry.key}" style="font-weight:600; font-style: normal; font-size: 18px"/>                            
                                <p:dataTable style="border: 1;"
                                     var="specialistP" value="#{entry.value}">
                                    <p:columnGroup type="header" >
                                        <p:row>
                                            <p:column rowspan="2" styleClass="resultpanel-topleft" style="width:45%">
                                                <f:facet name="header">
                                                    <h:outputText value="Procedures"/>
                                                </f:facet>                                              
                                            </p:column>
                                            <p:column rowspan="2" styleClass="resultpanel-center"  >    
                                                <f:facet name="header">
                                                    <h:outputText value="Cases waiting "/>
                                                    <h:outputText id="casesWP" value="?" styleClass="question-circle1"/>
                                                    <p:tooltip id="toolTip1P" for="casesWP" value="Cases Waiting: The number of patients waiting for surgery 
                                                                  on the last day of the reporting period." position="top"/>
                                                    <br/>
                                                    <h:outputText style="color: #a7c0c6;" value="as of #{specialistProfile.endDt}" />
                                                </f:facet>
                                            </p:column>
                                            <p:column colspan="2" styleClass="resultpanel-topright date" 
                                                      headerText="Between #{specialistProfile.startDt} and #{specialistProfile.endDt}" />
                                        </p:row>
                                        <p:row>
                                            <p:column styleClass="resultpanel-topright fifty-percent" headerText="50% of cases completed within">
                                                <f:facet name="header">
                                                    <h:outputText value="50% of Cases "/>
                                                    <h:outputText id="cases50P" value="?" styleClass="question-circle2"/>
                                                    <br/>
                                                    <p:tooltip id="toolTip2P" for="cases50P" value="50th percentile wait time (median wait time): 50% of all scheduled surgeries completed during the 
                                                       three month reporting period waited less than this wait time." position="top"/>
                                                    <h:outputText value="completed within"/>
                                                </f:facet>
                                            </p:column>
                                            <p:column styleClass="resultpanel-topright ninety-percent" headerText="90% of cases completed within">
                                                <f:facet name="header">
                                                    <h:outputText value="90% of Cases "/>
                                                    <h:outputText id="cases90P" value="?" styleClass="question-circle2"/>
                                                    <br/>
                                                    <p:tooltip id="toolTip3P" for="cases90P" value="90th percentile wait time: 90% of all scheduled surgeries completed during the 
                                                       three month reporting period waited less than this wait time." position="top"/>
                                                    <h:outputText value="completed within"/>
                                                </f:facet>   
                                            </p:column>
                                        </p:row>
                                    </p:columnGroup>
                                    <p:column >
                                        <h:link value="#{specialistP.procedureGroupNm}" outcome="WaitTimesResults"
                                                    styleClass="procedure-list" onclick="PF('statusDialog').show();">                                             
                                                <f:param name="procName" value="#{specialistProfile.retOriGroupList(specialistP.procedureGroupNm)}"/>
                                                <f:param name="adult" value="N"/>
                                        </h:link>
                                    </p:column>
                                    <p:column style="text-align: center">
                                        <h:outputText id="lt2" value="#{specialistP.patientsWaitingNbr lt 5 ? 'Less than 5' : specialistP.patientsWaitingNbr}" >
                                            <f:convertNumber pattern="###,###,###"/>
                                        </h:outputText>
                                        <p:tooltip id="toolTip6p" for="lt2" rendered="#{not empty specialistP.patientsWaitingNbr and specialistP.patientsWaitingNbr lt 5}"
                                                    value="For the purposes of ensuring patient confidentiality, all 
                                                       cases waiting fields shown on the Surgery Wait Times website with values less than five are shown as
                                                        Less than 5" position="top"/> 
                                    </p:column>                                
                                    <p:column style="text-align: center">
                                       <ui:fragment  rendered="#{empty specialistP.fiftyPctWeeksNbrForWaitTwo or specialistP.proceduresPerformedNbr lt 5}">
                                            <h:outputText id="n3" value="N/A" />
                                            <p:tooltip id="toolTip4p" for="n3" 
                                                        value="N/A: Not applicable (when there are no cases completed
                                                              during the reporting period, it is not applicable to report wait times information)" position="top"/>
                                        </ui:fragment>
                                       <ui:fragment  rendered="#{not empty specialistP.fiftyPctWeeksNbrForWaitTwo and specialistP.proceduresPerformedNbr gt 5}">
                                            <h:outputText value="#{specialistP.fiftyPctWeeksNbrForWaitTwo} " />
                                            <h:outputText value="weeks" />
                                        </ui:fragment>
                                    </p:column>
                                    <p:column style="text-align: center">
                                       <ui:fragment  rendered="#{empty specialistP.ninetyPctWeeksNbrForWaitTwo or specialistP.proceduresPerformedNbr lt 5}">
                                            <h:outputText id="n4" value="N/A" />
                                            <p:tooltip id="toolTip5p" for="n4" 
                                                       value="N/A: Not applicable (when there are no cases completed
                                                       during the reporting period, it is not applicable to report wait times information)" position="top"/>
                                       </ui:fragment>
                                       <ui:fragment  rendered="#{not empty specialistP.ninetyPctWeeksNbrForWaitTwo and specialistP.proceduresPerformedNbr gt 5}">
                                            <h:outputText value="#{specialistP.ninetyPctWeeksNbrForWaitTwo} " />
                                            <h:outputText value="weeks" />               
                                        </ui:fragment>
                                    </p:column>                                                        
                                </p:dataTable>
                                <br/>
                            </c:forEach>                        
                        </p:tab>                        
                    </p:tabView>
                    <script language='javascript'>
                        var overflowWrapperHeight = $('#dataTableOverflowWrapper').css('height');
                        document.styleSheets[0].insertRule('.datatable-overflow-wrapper:before { height: ' + overflowWrapperHeight + '}', 0);                                             
                    </script>
                </div>               
            </h:form>
        </div>
        <ui:include src="WEB-INF/fragments/emailPrintShareMobile.xhtml" />
    </ui:define>
</ui:composition>
</html>