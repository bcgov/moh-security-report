/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package swtwar;

import ca.bc.gov.hlth.swt.delegate.MediaDelegate;
import ca.bc.gov.hlth.swt.entity.Site;
import ca.bc.gov.hlth.swt.session.SiteFacadeLocal;
import ca.bc.gov.hlth.swt.to.CurrentWTStatisticsTo;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.enterprise.context.RequestScoped;
import jakarta.inject.Inject;
import jakarta.inject.Named;
import java.text.SimpleDateFormat;
import java.util.List;

/**
 *
 * @version ShowAdultSiteStatistics.java
 * @version Created on Dec 29, 2008, 11:12:18 AM
 * @author Kuan.Fan
 */
@RequestScoped
@Named("ShowPediatricSiteStatistics")
public class ShowPediatricSiteStatistics {

    @EJB
    private SiteFacadeLocal siteFacade;

    @Inject
    private MediaDelegate mediaDelegate;

    private List<CurrentWTStatisticsTo> currentWaitTimes;

    private Site site;
    private String startDt;
    private String endDt;

    public ShowPediatricSiteStatistics() {
    }

    @PostConstruct
    public void init() {
        this.readMediaStatistics();
    }

    public MediaDelegate getMediaDelegate() {
        return mediaDelegate;
    }

    public void setMediaDelegate(MediaDelegate mediaDelegate) {
        this.mediaDelegate = mediaDelegate;
    }

    private void readMediaStatistics() {

        String currentSiteId = this.mediaDelegate.getCurrentSiteId();
        String adult = "N";
        site = siteFacade.findCurrent();
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");
        startDt = sdf.format(site.getReportingPeriodStartDt());
        endDt = sdf.format(site.getReportingPeriodEndDt());

        //current wait times data
        this.currentWaitTimes = this.mediaDelegate.getCurrentWaitTimes(currentSiteId, adult);

    }

    public List<CurrentWTStatisticsTo> getCurrentWaitTimes() {
        return currentWaitTimes;
    }

    public void setCurrentWaitTimes(List<CurrentWTStatisticsTo> currentWaitTimes) {
        this.currentWaitTimes = currentWaitTimes;
    }

    public String getEndDt() {
        return endDt;
    }

    public String getStartDt() {
        return startDt;
    }

}
