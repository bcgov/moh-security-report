<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/gov30Template.xhtml">
    
    <ui:define name="title">Maintain Intervention Types</ui:define>
    <ui:define name="content">
        <h2>Maintain Intervention Types</h2>
        <p:messages id="msgs"/>
        <h:form id="form1">
            <p:dataTable id="theTable" widgetVar="theTable" value="#{MaintainInterventionTypes.interventionTypes}" var="currentRow" editable="true" rows="10"
                         paginator="true" paginatorPosition="top"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink}">
                <f:facet name="header">
                    <h:outputText value="Intervention Types" />
                </f:facet>

                <p:ajax event="rowEdit" 
                        listener="#{MaintainInterventionTypes.onRowEdit}" 
                        update="theTable msgs" />
                <p:ajax event="rowEditCancel" 
                        listener="#{MaintainInterventionTypes.onRowCancel}" 
                        onstart="return confirm('#{msg.all_confirmUndo}')" 
                        update="theTable"
                        oncomplete="PF('theTable').filter();" />

                <p:column headerText="Code" sortBy="#{currentRow.interventionTypeCd}">
                    <p:cellEditor rendered="#{currentRow.interventionTypeCd == null}">
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.interventionTypeCd}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{currentRow.interventionTypeCd}" 
                                         size="25" maxlength="255" required="true" 
                                         requiredMessage="Code is Required" />
                        </f:facet>
                    </p:cellEditor>
                    <h:outputText value="#{currentRow.interventionTypeCd}" rendered="#{currentRow.interventionTypeCd != null}" />
                </p:column>
                <p:column headerText="Description" sortBy="#{currentRow.interventionTypeDsc}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.interventionTypeDsc}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{currentRow.interventionTypeDsc}" 
                                         size="25" maxlength="255" required="true" 
                                         requiredMessage="Description is Required" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>	
                <p:column headerText="Sort Order" sortBy="#{currentRow.sortOrderNbr}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.sortOrderNbr}" />
                        </f:facet>
                        <f:facet name="input">
                            <h:inputText value="#{currentRow.sortOrderNbr}" size="3" maxlength="10">
                                <f:validateLongRange minimum="0" maximum="999999999" />
                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Effective" sortBy="#{currentRow.effectiveDtm}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.effectiveDtm}" converter="#{ApplicationBean1.dateConverter}" />
                        </f:facet>
                        <f:facet name="input">
                            <div style='width:110px'>
                              <p:calendar id="effectiveDtm" label="Effective Date"
                                            pattern="dd-MMM-yyyy" 
                                            value="#{currentRow.effectiveDtm}" 
                                            size="13" 
                                            required="true"
                                            requiredMessage="Effective is Required" 
                                            validatorMessage="Invalid effective date" />
                            </div>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Expiry" sortBy="#{currentRow.expiryDtm}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.expiryDtm}" converter="#{ApplicationBean1.dateConverter}" />
                        </f:facet>
                        <f:facet name="input">
                            <div style='width:110px'>
                              <p:calendar id="expiryDtm" label="Expiry Date"
                                    pattern="dd-MMM-yyyy" 
                                    value="#{currentRow.expiryDtm}" 
                                    size="13" 
                                    validatorMessage="Invalid expiry date" />
                            </div>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Comments" sortBy="#{currentRow.commentTxt}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.commentTxt}" />
                        </f:facet>
                        <f:facet name="input">
                            <h:inputText value="#{currentRow.commentTxt}" size="25" maxlength="4000" label="Comments" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column width="5%">
                    <p:rowEditor />
                </p:column>
            </p:dataTable>
            <p/>
            <p:commandButton value="New" icon="ui-icon-plusthick" update="theTable"
                action="#{MaintainInterventionTypes.onAddNew}" oncomplete="clickNewRow();" />
        </h:form>
    </ui:define>
</ui:composition>
