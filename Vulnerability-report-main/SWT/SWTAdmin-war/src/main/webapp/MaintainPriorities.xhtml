<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/gov30Template.xhtml">
    
    <ui:define name="title">Maintain Priorities</ui:define>
    <ui:define name="content">

        <h2>Maintain Priorities</h2>
        <p:messages id="msgs" />
        <h:form id="form1">
            <p:dataTable id="theTable" widgetVar="theTable" value="#{MaintainPriorities.priorities}" var="currentRow" editable="true" rows="10" 
                     paginator="true" paginatorPosition="top"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink}">
                <f:facet name="header">
                    <h:outputText value="Priorities"/><br/>
                </f:facet>

                <p:ajax event="rowEdit" 
                        listener="#{MaintainPriorities.onRowEdit}" 
                        update="theTable msgs" />
                <p:ajax event="rowEditCancel" 
                        listener="#{MaintainPriorities.onRowCancel}" 
                        onstart="return confirm('#{msg.all_confirmUndo}')" 
                        update="theTable"
                        oncomplete="PF('theTable').filter();" />

                <p:column headerText="Code" sortBy="#{currentRow.priorityCd}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.priorityCd}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{currentRow.priorityCd}" 
                                         size="8" maxlength="255" required="true" 
                                         requiredMessage="Code is required" />
                        </f:facet>
                    </p:cellEditor>
                </p:column> 
                <p:column headerText="Description" sortBy="#{currentRow.priorityDsc}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.priorityDsc}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{currentRow.priorityDsc}" 
                                         size="25" maxlength="255" required="true" 
                                         requiredMessage="Description is required" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>                            
                <p:column headerText="Sort Order" sortBy="#{currentRow.sortOrderNbr}">   
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.sortOrderNbr}" />
                        </f:facet>
                        <f:facet name="input">
                            <h:inputText value="#{currentRow.sortOrderNbr}" size="3" maxlength="10">
                                <f:validateLongRange minimum="0" maximum="999999999" />
                            </h:inputText>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Effective" sortBy="#{currentRow.effectiveDtm}" width="15%">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.effectiveDtm}" converter="#{ApplicationBean1.dateConverter}" />
                        </f:facet>
                        <f:facet name="input">
                            <div style='width:110px'>
                              <p:calendar id="effectiveDtm" label="Effective Date"
                                            pattern="dd-MMM-yyyy" 
                                            value="#{currentRow.effectiveDtm}" 
                                            size="13" 
                                            required="true"
                                            requiredMessage="Effective is required" 
                                            validatorMessage="Invalid effective date" >
                                    <f:convertDateTime />
                                </p:calendar>
                                  
                            </div>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Expiry" sortBy="#{currentRow.expiryDtm}" width="15%"> 
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.expiryDtm}" converter="#{ApplicationBean1.dateConverter}" />
                        </f:facet>
                        <f:facet name="input">
                            <div style='width:110px'>
                              <p:calendar id="expiryDtm" label="Expiry Date"
                                    pattern="dd-MMM-yyyy" 
                                    value="#{currentRow.expiryDtm}" 
                                    size="13" 
                                    validatorMessage="Invalid expiry date">
                            </p:calendar>
                            </div>
                        </f:facet>
                    </p:cellEditor>
                </p:column> 
                <p:column headerText="Comments" sortBy="#{currentRow.commentTxt}">
                   <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{currentRow.commentTxt}" />
                        </f:facet>
                        <f:facet name="input">
                            <h:inputText value="#{currentRow.commentTxt}" size="25" maxlength="4000" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>                            
                 <p:column width="5%">
                    <p:rowEditor />
                </p:column>
            </p:dataTable>
            <p/>
            <p:commandButton value="New" icon="ui-icon-plusthick" update="theTable"
                action="#{MaintainPriorities.onAddNew}" oncomplete="clickNewRow();" />
        </h:form>
    </ui:define>
</ui:composition>
