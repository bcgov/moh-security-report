/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package org.hl7.fhir.r4bc1.model;

import static ca.bc.gov.moh.hsa.plr.converter.indivprovtofhir.ProviderFhirConstants.BC_LOCATION_PROFILE_URL;
import ca.uhn.fhir.model.api.annotation.Child;
import ca.uhn.fhir.model.api.annotation.Description;
import ca.uhn.fhir.model.api.annotation.ResourceDef;
import ca.uhn.fhir.util.ElementUtil;
import java.util.Date;
import ca.uhn.fhir.model.api.annotation.Extension;
import java.util.ArrayList;
import java.util.List;
import org.hl7.fhir.r4.model.Location;

/**
 * General constraints on the Location resource for use in the BC Provider
 * Registry project.
 *
 * @author dan.stepanov
 */
@ResourceDef(name = "Location", profile = BC_LOCATION_PROFILE_URL, id = "bc-location")
public class BCLocation extends Location {

    @Child(name = "bcAddress", type = {BCAddress.class}, min = 0, max = 1, modifier = false, summary = false)
    @Description(shortDefinition = "Mailing address for BCLocation", formalDefinition = "Mailing address for BCLocation.")
    protected BCAddress bcAddress;


    public BCAddress getBcAddress() {
        return bcAddress;
    }

    public void setBcAddress(BCAddress bcAddress) {
        this.bcAddress = bcAddress;
    }

    /**
     * A custom complex extension for BC Notes Extension with @Extension
     * annotation
     */
    @Child(name = "bcFacilityDetailsExtension", min = 0, max = 1)
    @Extension(url = "http://hl7.org/fhir/ca-bc/provider/StructureDefinition/bc-facility-details-extension", definedLocally = false, isModifier = false)
    @Description(shortDefinition = "BC Facility Details", formalDefinition = "BC Facility Details")
    protected BCFacilityDetailsExtension bcFacilityDetailsExtension;

    public BCFacilityDetailsExtension getBcFacilityDetailsExtension() {
        if(bcFacilityDetailsExtension == null) {
            bcFacilityDetailsExtension = new BCFacilityDetailsExtension();
        }
        return bcFacilityDetailsExtension;
    }

    public void setBcFacilityDetailsExtension(BCFacilityDetailsExtension bcFacilityDetailsExtension) {
        this.bcFacilityDetailsExtension = bcFacilityDetailsExtension;
    }


    /**
     * A custom complex extension for BC Notes Extension with @Extension
     * annotation
     */
    @Child(name = "bcNoteExtension", min = 0, max = -1)
    @Extension(url = "http://hl7.org/fhir/ca-bc/provider/StructureDefinition/bc-note-extension", definedLocally = false, isModifier = false)
    @Description(shortDefinition = "BC Note extension", formalDefinition = "BC Notes")
    protected List<BCNoteExtension> bcNoteExtension;

    public List<BCNoteExtension> getBcNoteExtension() {
        if(bcNoteExtension == null) {
            bcNoteExtension = new ArrayList<>();
        }
        return bcNoteExtension;
    }

    public void addBcNoteExtension(BCNoteExtension note) {
        this.getBcNoteExtension().add(note);
    }
    
    public void setBcNoteExtension(List<BCNoteExtension> myBcNoteExtension) {
        bcNoteExtension = myBcNoteExtension;
    }
       
    /**
     * A custom complex extension for BC CHSA Extension with @Extension
     * annotation
     */
    @Child(name = "bcFacilityCHSAExtension")
    @Extension(url = "http://hl7.org/fhir/ca-bc/provider/StructureDefinition/bc-facility-commmunity-health-service-area-extension", definedLocally = false, isModifier = false)
    @Description(shortDefinition = "BC Facility CHSA extension", formalDefinition = "BC Facility Community Health Service Area")
    protected BCFacilityCHSAExtension bcFacilityCHSAExtension;

    public BCFacilityCHSAExtension getBcFacilityCHSAExtension() {
        return bcFacilityCHSAExtension;
    }
 
    public void setBcFacilityCHSAExtension(BCFacilityCHSAExtension myBcFacilityCHSAExtension) {
        bcFacilityCHSAExtension = myBcFacilityCHSAExtension;
    }

    /**
     * It is important to override the isEmpty() method, adding a check for any
     * newly added fields.
     */
    @Override
    public boolean isEmpty() {
        return super.isEmpty() && ElementUtil.isEmpty(bcNoteExtension, bcFacilityCHSAExtension);//, bcFacilityDetailsExtension);
    }


    @Override
    public BCLocation copy() {
        BCLocation copy = new BCLocation();
        copy.status = status;
        //copy.bcFacilityCHSAExtension = bcFacilityCHSAExtension.copy();
        return copy;
    }

}
