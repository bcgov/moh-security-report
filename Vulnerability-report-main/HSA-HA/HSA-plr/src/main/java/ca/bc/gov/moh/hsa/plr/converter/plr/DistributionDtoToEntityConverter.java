/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.moh.hsa.plr.converter.plr;

import ca.bc.gov.moh.hsa.plr.converter.PLRDtoToEntityConverter;
import ca.bc.gov.health.plr.dto.esb.DistributionNotification;
import ca.bc.gov.moh.hsa.plr.entity.transaction.DistributionRequestEntity;
import ca.bc.gov.moh.hsa.plr.entity.transaction.ProviderAttribute;
import java.lang.reflect.InvocationTargetException;
import org.apache.camel.Converter;

/**
 * Converter class for going from a DistributionNotification to a
 * DistributionRequestEntity
 *
 * @author greg.perkins
 */
@Converter
public class DistributionDtoToEntityConverter extends PLRDtoToEntityConverter {

    @Converter
    public static DistributionRequestEntity convert(DistributionNotification in)
            throws IllegalAccessException, InvocationTargetException {

        DistributionRequestEntity out = new DistributionRequestEntity();
        ProviderAttribute provider = new ProviderAttribute();
        initialize(provider);
        out.setProvider(provider);
        convertHeader(in, out);
        convertTarget(in, out);
        convertSource(in, out);
        convertProvider(in.getProviderDetails(), out.getProvider());
        out.setRegistryOrgUserId(in.getRegistryUserOrgId());
        out.setSourceOrganizationChid(in.getSourceOrganizationChid());
        out.setResponsibleUserId(in.getResponsiblePersonUserId());
        return out;
    }

}
