package ca.bc.gov.moh.hsa.plr.esb.service.batch;

import java.io.File;
import java.io.FileNotFoundException;
import org.apache.camel.Exchange;
import org.apache.camel.CamelContext;
import org.apache.camel.impl.DefaultExchange;
import org.junit.Test;

/**
 *
 * @author David Sharpe (david.a.sharpe@cgi.com)
 */
public class PlrXmlBatchValidatorTest {

    @Test
    public void testValidateMessage_grsMessagesNS_grsMessageInvalidNS() throws Exception {
        testValidate("grsMessagesNS_grsMessageInvalidNS.xml");
    }

    @Test
    public void testValidateMessage_grsMessagesNoNS_grsMessageInvalidNS() throws Exception {
        testValidate("grsMessagesNoNS_grsMessageInvalidNS.xml");
    }

    @Test
    public void testValidateMessage_grsMessagesNoNS_grsMessageNoNS() throws Exception {
        testValidate("grsMessagesNoNS_grsMessageNoNS.xml");
    }

    @Test
    public void testValidateMessage_grsMessagesNoNS_grsMessageNS() throws Exception {
        testValidate("grsMessagesNoNS_grsMessageNS.xml");
    }

    @Test
    public void testValidateMessage_grsMessagesNS_grsMessageNoNS() throws Exception {
        testValidate("grsMessagesNS_grsMessageNoNS.xml");
    }

    @Test
    public void testValidateMessage_grsMessagesNS_grsMessageNS() throws Exception {
        testValidate("grsMessagesNS_grsMessageNS.xml");
    }

    private static void testValidate(String filename) throws FileNotFoundException, Exception {
        File file = new File("src/test/resources/data/" + filename);
        String content = new java.util.Scanner(file).useDelimiter("\\Z").next();
        Exchange exchange = new DefaultExchange((CamelContext) null);
        exchange.getIn().setBody(content);
        new PlrXmlBatchValidator().process(exchange);
    }

}
