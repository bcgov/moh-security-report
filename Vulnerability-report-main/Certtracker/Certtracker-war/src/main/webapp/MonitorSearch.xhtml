<?xml version="1.0" encoding="UTF-8"?>
<!--
        Document: MonitorSearch.jsp
        Created: Tue Jun 28 12:12:36 PDT 2011
        Author: JSF Code Generator-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/template.xhtml">
    <ui:define name="title"><h:outputText value="#{msg['Monitor.desc']}"/> Search</ui:define>
    <ui:define name="body">
        <h2><h:outputText value="#{msg['Monitor.desc']}"/> Search</h2>
        <hr/>
        <h:form id="form1">
            <!--p:panel id="search"-->
            <p:panel header="Search Criteria" collapsed="false" toggleable="true" toggleableHeader="true">
                <!--f:facet name="header"><h:outputText value="Search Criteria"/></f:facet-->
                <f:validateBean disabled="true" >
                    <table cellpadding="2" cellspacing="0">
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.authorityId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{MonitorSearch.params.authorityId.authorityId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.signingAuthoritys}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.applicationId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{MonitorSearch.params.applicationId.applicationId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.applications}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.notificationYn.desc']}"/></td>
                            <td><input type="checkbox" checked="#{MonitorSearch.params.notificationYn=='Y'?'checked':''}" onclick="if (this.checked) {
                                        this.nextSibling.value = 'Y'
                                    } else {
                                        this.nextSibling.value = 'N'
                                    }"/>
                                <h:inputHidden value="#{MonitorSearch.params.notificationYn}"/>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.search.startDt.desc']}"/></td>
                            <td><p:calendar value="#{MonitorSearch.params.startDt}" style="width:200px" pattern="dd-MMM-yyyy" size="11" /></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.search.endDt.desc']}"/></td>
                            <td><p:calendar value="#{MonitorSearch.params.endDt}" style="width:200px" pattern="dd-MMM-yyyy" size="11" /></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.monitorNm.desc']}"/></td>
                            <td><h:inputText value="#{MonitorSearch.params.monitorNm}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.commentsTxt.desc']}"/></td>
                            <td><h:inputText value="#{MonitorSearch.params.commentsTxt}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.notificationLeadDys.desc']}"/></td>
                            <td><h:inputText value="#{MonitorSearch.params.notificationLeadDys}" size="10" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.cacertLocationTxt.desc']}"/></td>
                            <td><h:inputText value="#{MonitorSearch.params.cacertLocationTxt}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.keystoreLocationTxt.desc']}"/></td>
                            <td><h:inputText value="#{MonitorSearch.params.keystoreLocationTxt}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Monitor.monitorType.desc']}"/></td>
                            <td><h:inputText value="#{MonitorSearch.params.monitorType}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr><td colspan="3"><br/></td></tr>
                        <tr>
                            <td colspan="3" style="text-align: right;">
                                <h:graphicImage value="/resources/Spinner.gif" id="waiting" style="display:none;"/>
                                <p:commandButton action="#{MonitorSearch.search}" value="#{msg['button.search']}" update="form1" onclick="document.getElementById('form1:waiting').style.display = 'inline';" oncomplete="document.getElementById('form1:waiting').style.display='none';"/>
                                <h:outputText value=" "/>
                                <p:commandButton action="#{MonitorSearch.clear}" value="#{msg['button.clear']}" update="form1"/>
                            </td>
                        </tr>
                    </table>
                </f:validateBean>
            </p:panel>
            <br/>

            <p:panel rendered="#{MonitorSearch.results!=null}">
                <f:facet name="header"><h:outputText value="Search Results"/></f:facet>
                <div style="text-align:right"><h:commandButton id="newMonitorTop" value="Add #{msg['Monitor.desc']}" action="#{MaintainMonitor.create}"/></div>
                <br/>

                <p:dataTable rowIndexVar="index" value="#{MonitorSearch.results}" var="row" rows="10" id="resultsTable" styleClass="stable" sortBy="#{row.monitorNm}" tableStyle="padding:3px" paginator="true" paginatorPosition="bottom" resizableColumns="true" resizeMode="expand">

                    <!-- MONITOR NAME COLUMN -->
                    <p:column sortBy="#{row.monitorNm}" sortOrder="asc">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.monitorNm.desc']}" 
                                               update="resultsTable" 
                                               action="#{monitorSortingBean.sortByName}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.monitorNm}"/>
                    </p:column>

                    <!-- NOTIFICATION YN COLUMN -->
                    <p:column sortBy="#{row.notificationYn}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.notificationYn.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByNotificationYn}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.notificationYn}"/>
                    </p:column>

                    <!-- START DATE COLUMN -->
                    <p:column sortBy="#{row.startDt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.startDt.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByStartDate}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.startDt}">
                            <f:convertDateTime pattern="dd-MMM-yyyy"/>
                        </h:outputText>
                    </p:column>

                    <!-- END DATE COLUMN -->
                    <p:column sortBy="#{row.endDt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.endDt.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByEndDate}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.endDt}">
                            <f:convertDateTime pattern="dd-MMM-yyyy"/>
                        </h:outputText>
                    </p:column>

                    <!-- COMMENTS TEXT COLUMN -->
                    <p:column sortBy="#{row.commentsTxt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.commentsTxt.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByComments}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.commentsTxt}"/>
                    </p:column>

                    <!-- NOTIFICATION LEAD DAYS COLUMN -->
                    <p:column sortBy="#{row.notificationLeadDys}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.notificationLeadDys.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByNotification}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.notificationLeadDys}"/>
                    </p:column>

                    <!-- CACERT LOCATION TEXT COLUMN -->
                    <p:column sortBy="#{row.cacertLocationTxt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.cacertLocationTxt.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByCacertLocation}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.cacertLocationTxt}"/>
                    </p:column>

                    <!-- KEY STORE LOCATION TEXT COLUMN -->
                    <p:column sortBy="#{row.keystoreLocationTxt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.keystoreLocationTxt.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByKeystoreLocation}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.keystoreLocationTxt}"/>
                    </p:column>

                    <!-- MONITOR TYPE -->
                    <p:column sortBy="#{row.monitorType}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Monitor.monitorType.desc']}"
                                               update="resultsTable"
                                               action="#{monitorSortingBean.sortByType}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.monitorType}"/>
                    </p:column>

                    <!-- SELECT BUTTON COLUMN -->
                    <p:column style="text-align: center;">
                        <f:facet name="header"><h:outputText value="Select"/></f:facet>
                        <h:commandButton id="selectButton" action="#{MaintainMonitor.select}" value="#{msg['button.select']}">
                            <f:setPropertyActionListener id="selectParam" target="#{flash.selectedMonitorKey}" value="#{row.monitorId}"/></h:commandButton>
                    </p:column>

                    <f:facet name="footer"><h:outputText value="No Data Found" rendered="#{empty MonitorSearch.results}" /></f:facet>
                </p:dataTable>

                <p:dataScroller var="resultsTable"/>
                <br/><div style="text-align:right"><h:commandButton id="newMonitorBottom" value="Add #{msg['Monitor.desc']}" action="#{MaintainMonitor.create}"/>
                </div></p:panel>
        </h:form>
    </ui:define></ui:composition>
