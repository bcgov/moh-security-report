<?xml version="1.0" encoding="UTF-8"?>
<!--
        Document: ContactSearch.jsp
        Created: Tue Jun 28 12:12:36 PDT 2011
        Author: JSF Code Generator-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/template.xhtml">
    <ui:define name="title"><h:outputText value="#{msg['Contact.desc']}"/> Search</ui:define>
    <ui:define name="body">
        <h2><h:outputText value="#{msg['Contact.desc']}"/> Search</h2>
        <hr/>
        <h:form id="form1">
            <p:panel header="Search Criteria" collapsed="false" toggleable="true" toggleableHeader="true">
                <f:validateBean disabled="true" >
                    <table cellpadding="2" cellspacing="0">
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Contact.teamId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{ContactSearch.params.teamId.teamId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.teams}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Contact.organizationId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{ContactSearch.params.organizationId.organizationId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.organizations}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Contact.emailTxt.desc']}"/></td>
                            <td><h:inputText value="#{ContactSearch.params.emailTxt}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Contact.firstGivenNm.desc']}"/></td>
                            <td><h:inputText value="#{ContactSearch.params.firstGivenNm}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Contact.phoneTxt.desc']}"/></td>
                            <td><h:inputText value="#{ContactSearch.params.phoneTxt}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Contact.surnameNm.desc']}"/></td>
                            <td><h:inputText value="#{ContactSearch.params.surnameNm}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr><td colspan="3"><br/></td></tr>
                        <tr>
                            <td colspan="3" style="text-align: right;">
                                <h:graphicImage value="/resources/Spinner.gif" id="waiting" style="display:none;"/>
                                <p:commandButton action="#{ContactSearch.search}" value="#{msg['button.search']}" update="form1" onclick="document.getElementById('form1:waiting').style.display = 'inline';" oncomplete="document.getElementById('form1:waiting').style.display='none';"/>
                                <h:outputText value=" "/>
                                <p:commandButton action="#{ContactSearch.clear}" value="#{msg['button.clear']}" update="form1"/>
                            </td>
                        </tr>
                    </table>
                </f:validateBean>
            </p:panel>
            <br/>

            <!-- RESULTS -->
            <p:panel rendered="#{ContactSearch.results!=null}">
                <f:facet name="header"><h:outputText value="Search Results"/></f:facet>
                <div style="text-align:right"><h:commandButton id="newContactTop" value="Add #{msg['Contact.desc']}" action="#{MaintainContact.create}"/></div>
                <br/>

                <!-- RESULTS TABLE -->
                <p:dataTable rowIndexVar="index" value="#{ContactSearch.results}" var="row" rows="10" id="resultsTable" styleClass="stable" sortBy="#{row.firstGivenNm}" paginator="true" paginatorPosition="bottom" tableStyle="padding:3px" resizableColumns="true" resizeMode="expand">

                    <!-- FIRST NAME COLUMN -->
                    <p:column sortBy="#{row.firstGivenNm}" sortOrder="asc">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Contact.firstGivenNm.desc']}"
                                               update="resultsTable"
                                               action="#{contactSortingBean.sortByFirstName}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.firstGivenNm}"/>
                    </p:column>

                    <!-- LAST NAME COLUMN -->
                    <p:column sortBy="#{row.surnameNm}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Contact.surnameNm.desc']}"
                                               update="resultsTable"
                                               action="#{contactSortingBean.sortByLastName}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.surnameNm}"/>
                    </p:column>

                    <!-- EMAIL COLUMN -->
                    <p:column sortBy="#{row.emailTxt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Contact.emailTxt.desc']}"
                                               update="resultsTable"
                                               action="#{contactSortingBean.sortByEmail}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.emailTxt}"/>
                    </p:column>

                    <!-- PHONE NUMBER COLUMN -->
                    <p:column sortBy="#{row.phoneTxt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Contact.phoneTxt.desc']}"
                                               update="resultsTable"
                                               action="#{contactSortingBean.sortByPhone}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.phoneTxt}"/>
                    </p:column>

                    <p:column style="text-align: center;">
                        <f:facet name="header"><h:outputText value="Select"/></f:facet>
                        <h:commandButton id="selectButton" action="#{MaintainContact.select}" value="#{msg['button.select']}">
                            <f:setPropertyActionListener id="selectParam" target="#{flash.selectedContactKey}" value="#{row.contactId}"/></h:commandButton>
                    </p:column>

                    <f:facet name="footer"><h:outputText value="No Data Found" rendered="#{empty ContactSearch.results}" /></f:facet></p:dataTable>
                <p:dataScroller var="resultsTable"/>
                <br/><div style="text-align:right"><h:commandButton id="newContactBottom" value="Add #{msg['Contact.desc']}" action="#{MaintainContact.create}"/>
                </div></p:panel>
        </h:form>
    </ui:define></ui:composition>
