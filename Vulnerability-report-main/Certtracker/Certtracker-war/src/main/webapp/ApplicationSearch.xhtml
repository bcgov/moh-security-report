<?xml version="1.0" encoding="UTF-8"?>
<!--
        Document: ApplicationSearch.jsp
        Created: Tue Jun 28 12:12:36 PDT 2011
        Author: JSF Code Generator-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/template.xhtml">
    <ui:define name="title"><h:outputText value="#{msg['Application.desc']}"/> Search</ui:define>
    <ui:define name="body">
        <h2><h:outputText value="#{msg['Application.desc']}"/> Search</h2>
        <hr/>
        <h:form id="form1">
            <p:panel header="Search Criteria" toggleable="true" toggleableHeader="true"> 
                <f:validateBean disabled="true" >
                    <table cellpadding="2" cellspacing="0">
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Application.teamId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{ApplicationSearch.params.teamId.teamId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.teams}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Application.organizationId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{ApplicationSearch.params.organizationId.organizationId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.organizations}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Application.applicationNm.desc']}"/></td>
                            <td><h:inputText value="#{ApplicationSearch.params.applicationNm}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Application.applicationDsc.desc']}"/></td>
                            <td><h:inputText value="#{ApplicationSearch.params.applicationDsc}" size="100" styleClass="text-input"/></td>
                            <td></td>
                        </tr>
                        <tr><td colspan="3"><br/></td></tr>
                        <tr>
                            <td colspan="3" style="text-align: right;">
                                <h:graphicImage value="/resources/Spinner.gif" id="waiting" style="display:none;"/>
                                <p:commandButton action="#{ApplicationSearch.search}" value="#{msg['button.search']}" update="form1" onclick="document.getElementById('form1:waiting').style.display = 'inline';" oncomplete="document.getElementById('form1:waiting').style.display='none';"/>
                                <h:outputText value=" "/>
                                <p:commandButton action="#{ApplicationSearch.clear}" value="#{msg['button.clear']}" update="form1"/>
                            </td>
                        </tr>
                    </table>
                </f:validateBean>
            </p:panel>
            <br/>

            <!-- RESULTS -->
            <p:panel rendered="#{ApplicationSearch.results!=null}">
                <f:facet name="header"><h:outputText value="Search Results"/></f:facet>
                <div style="text-align:right"><h:commandButton id="newApplicationTop" value="Add #{msg['Application.desc']}" action="#{MaintainApplication.create}"/></div>
                <br/>

                <!-- RESULTS TABLE -->
                <p:dataTable rowIndexVar="index" value="#{ApplicationSearch.results}" var="row" rows="10" id="resultsTable" styleClass="stable" sortBy="#{row.applicationDsc}" paginator="true" paginatorPosition="bottom" tableStyle="padding:3px" resizableColumns="true" resizeMode="expand">

                    <!-- APPLICATION NAME COLUMN -->
                    <p:column sortBy="#{row.applicationNm}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Application.applicationNm.desc']}"
                                               update="resultsTable"
                                               action="#{applicationSortingBean.sortByApplicationName}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.applicationNm}"/>
                    </p:column>

                    <!-- APPLICATION DESCRIPTION COLUMN -->
                    <p:column sortBy="#{row.applicationDsc}" sortOrder="asc">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Application.applicationDsc.desc']}"
                                               update="resultsTable"
                                               action="#{applicationSortingBean.sortByApplicationDescription}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.applicationDsc}"/>
                    </p:column>

                    <p:column style="text-align: center;">
                        <f:facet name="header"><h:outputText value="Select"/></f:facet>
                        <h:commandButton id="selectButton" action="#{MaintainApplication.select}" value="#{msg['button.select']}">
                            <f:setPropertyActionListener id="selectParam" target="#{flash.selectedApplicationKey}" value="#{row.applicationId}"/></h:commandButton>
                    </p:column>

                    <f:facet name="footer"><h:outputText value="No Data Found" rendered="#{empty ApplicationSearch.results}" /></f:facet></p:dataTable>
                <p:dataScroller var="resultsTable"/>
                <br/>
                <div style="text-align:right">
                    <h:commandButton id="newApplicationBottom" value="Add #{msg['Application.desc']}" action="#{MaintainApplication.create}"/>
                </div></p:panel>
        </h:form>
    </ui:define></ui:composition>
