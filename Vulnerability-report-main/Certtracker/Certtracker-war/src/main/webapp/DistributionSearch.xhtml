<?xml version="1.0" encoding="UTF-8"?>
<!--
        Document: DistributionSearch.jsp
        Created: Tue Jun 28 12:12:36 PDT 2011
        Author: JSF Code Generator-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/template.xhtml">
    <ui:define name="title"><h:outputText value="#{msg['Distribution.desc']}"/> Search</ui:define>
    <ui:define name="body">
        <h2><h:outputText value="#{msg['Distribution.desc']}"/> Search</h2>
        <hr/>
        <h:form id="form1">
            <p:panel header="Search Criteria" collapsed="false" toggleable="true" toggleableHeader="true">
                <f:validateBean disabled="true" >
                    <table cellpadding="2" cellspacing="0">
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Distribution.teamId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{DistributionSearch.params.teamId.teamId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.teams}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Distribution.monitorId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{DistributionSearch.params.monitorId.monitorId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.monitors}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Distribution.contactId.desc']}"/></td>
                            <td><p:selectOneMenu editable="false" value="#{DistributionSearch.params.contactId.contactId}" autoWidth="false">
                                    <f:selectItem itemValue="" itemLabel=""/>
                                    <f:selectItems value="#{Droplists.contacts}"/>
                                </p:selectOneMenu></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td class="label"><h:outputText value="#{msg['Distribution.primaryContactYn.desc']}"/></td>
                            <td><input type="checkbox" checked="#{DistributionSearch.params.primaryContactYn=='Y'?'checked':''}" onclick="if (this.checked) {
                                        this.nextSibling.value = 'Y'
                                    } else {
                                        this.nextSibling.value = 'N'
                                    }"/>
                                <h:inputHidden value="#{DistributionSearch.params.primaryContactYn}"/>
                            </td>
                            <td></td>
                        </tr>
                        <tr><td colspan="3"><br/></td></tr>
                        <tr>
                            <td colspan="3" style="text-align: right;">
                                <h:graphicImage value="/resources/Spinner.gif" id="waiting" style="display:none;"/>
                                <p:commandButton action="#{DistributionSearch.search}" value="#{msg['button.search']}" update="form1" onclick="document.getElementById('form1:waiting').style.display = 'inline';" oncomplete="document.getElementById('form1:waiting').style.display='none';"/>
                                <h:outputText value=" "/>
                                <p:commandButton action="#{DistributionSearch.clear}" value="#{msg['button.clear']}" update="form1"/>
                            </td>
                        </tr>
                    </table>
                </f:validateBean>
            </p:panel>
            <br/>

            <!-- RESULTS -->
            <p:panel rendered="#{DistributionSearch.results!=null}">
                <f:facet name="header"><h:outputText value="Search Results"/></f:facet>
                <div style="text-align:right"><h:commandButton id="newDistributionTop" value="Add #{msg['Distribution.desc']}" action="#{MaintainDistribution.create}"/></div>
                <br/>

                <!-- RESULTS TABLE -->
                <p:dataTable rowIndexVar="index" value="#{DistributionSearch.results}" var="row" rows="10" id="resultsTable" styleClass="stable" sortBy="#{row.monitorId.monitorNm}" paginator="true" paginatorPosition="bottom" tableStyle="padding:3px" resizableColumns="true" resizeMode="expand">

                    <!-- MONITOR ID COLUMN -->
                    <p:column sortBy="#{row.monitorId.monitorNm}" sortOrder="asc">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Distribution.monitorId.desc']}"
                                               update="resultsTable"
                                               action="#{distributionSortingBean.sortByMonitor}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.monitorId.monitorNm}"/>
                    </p:column>

                    <!-- CONTACT ID COLUMN -->
                    <p:column sortBy="#{row.contactId.emailTxt}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Distribution.contactId.desc']}"
                                               update="resultsTable"
                                               action="#{distributionSortingBean.sortByContact}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.contactId.emailTxt}"/>
                    </p:column>

                    <!-- PRIMARY CONTACT YN COLUMN -->
                    <p:column sortBy="#{row.primaryContactYn}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Distribution.primaryContactYn.desc']}"
                                               update="resultsTable"
                                               action="#{distributionSortingBean.sortByPrimaryContact}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.primaryContactYn}"/>
                    </p:column>

                    <!-- TEAM ID COLUMN -->
                    <p:column sortBy="#{row.teamId.teamNm}">
                        <f:facet name="header">
                            <div id="whiteLink">
                                <p:commandLink value="#{msg['Distribution.teamId.desc']}"
                                               update="resultsTable"
                                               action="#{distributionSortingBean.sortByTeam}"/>
                            </div>
                        </f:facet>
                        <h:outputText value="#{row.teamId.teamNm}"/>
                    </p:column>

                    <p:column style="text-align: center;">
                        <f:facet name="header"><h:outputText value="Select"/></f:facet>
                        <h:commandButton id="selectButton" action="#{MaintainDistribution.select}" value="#{msg['button.select']}">
                            <f:setPropertyActionListener id="selectParam" target="#{flash.selectedDistributionKey}" value="#{row.distributionId}"/></h:commandButton>
                    </p:column>

                    <f:facet name="footer"><h:outputText value="No Data Found" rendered="#{empty DistributionSearch.results}" /></f:facet></p:dataTable>
                <p:dataScroller var="resultsTable"/>
                <br/><div style="text-align:right"><h:commandButton id="newDistributionBottom" value="Add #{msg['Distribution.desc']}" action="#{MaintainDistribution.create}"/>
                </div></p:panel>
        </h:form>
    </ui:define></ui:composition>
