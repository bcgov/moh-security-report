/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.jsf;

import jakarta.faces.model.SelectItem;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;
import org.apache.commons.beanutils.PropertyUtils;

/** @author greg.perkins */
public class SelectItemHelper {

  public static List buildSelectItemList(List list, String labelProperty, String valueProperty) {
    return buildSelectItemList(list, labelProperty, valueProperty, true);
  }

  public static List buildSelectItemList(
      List list, String labelProperty, String valueProperty, boolean doSort) {
    List outList = new ArrayList();
    for (Iterator it = list.iterator(); it.hasNext(); ) {
      Object item = it.next();
      SelectItem selectItem = new SelectItem();

      try {
        selectItem.setValue(PropertyUtils.getProperty(item, valueProperty));

        // Check if the label is null
        Object labelObject = PropertyUtils.getProperty(item, labelProperty);
        String labelString = "";
        if (labelObject != null) {
          labelString = labelObject.toString();
        } else {
          System.out.println("WARNING: " + item + " has a NULL label.");
        }
        selectItem.setLabel(labelString);

        outList.add(selectItem);
      } catch (Exception e) {
        e.printStackTrace();
      }
    }
    if (doSort) {
      Collections.sort(
          outList,
          new Comparator<SelectItem>() {
            public int compare(SelectItem o1, SelectItem o2) {
              return o1.getLabel().compareTo(o2.getLabel());
            }
          });
    }
    return outList;
  }
}
