package ca.bc.gov.health.midtier.web;

import ca.bc.gov.health.jsf.BaseBean;
import ca.bc.gov.health.midtier.ejb.entity.*;
import ca.bc.gov.health.midtier.ejb.session.*;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.io.Serializable;
import java.util.List;

/**
 * Backing bean to assist in searching for Applications
 *
 * @author JSF Code Generator
 */
@Named("ApplicationSearch")
@ViewScoped
public class ApplicationSearch extends BaseBean implements Serializable {

  @EJB
  /* Session bean to perform searches */
  private ApplicationFacadeLocal paramsFacade;

  /* Search results */
  private List<Application> results;
  /* Template object for query by example */
  private Application params;

  /* Default constructor */
  public ApplicationSearch() {}

  @PostConstruct
  /* Initializes this bean after injection is complete */
  public void init() {
    clear();
    // search();
    results = paramsFacade.findAll();
  }

  /* Clears the state of this bean */
  public String clear() {
    params = new Application();
    params.setTeamId(new Team());
    params.setOrganizationId(new Organization());
    results = null;
    return null;
  }

  /* Perform search */
  public String search() {
    if (!params.getApplicationNm().isEmpty()) {
      params.setApplicationNm(HelperSearch.addPattern(params.getApplicationNm()));
    }
    if (!params.getApplicationDsc().isEmpty()) {
      params.setApplicationDsc(HelperSearch.addPattern(params.getApplicationDsc()));
    }
    results = paramsFacade.search(params);
    if (!params.getApplicationNm().isEmpty()) {
      params.setApplicationNm(HelperSearch.removePattern(params.getApplicationNm()));
    }
    if (!params.getApplicationDsc().isEmpty()) {
      params.setApplicationDsc(HelperSearch.removePattern(params.getApplicationDsc()));
    }
    return null;
  }

  /* Getters and Setters */
  public Application getParams() {
    return params;
  }

  public void setParams(Application params) {
    this.params = params;
  }

  public List<Application> getResults() {
    return results;
  }
}
