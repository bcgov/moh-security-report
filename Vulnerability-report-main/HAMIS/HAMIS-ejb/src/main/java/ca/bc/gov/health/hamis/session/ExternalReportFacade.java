package ca.bc.gov.health.hamis.session;

import ca.bc.gov.health.hamis.dto.ExternalReportDto;
import ca.bc.gov.health.hamis.entity.ExternalReport;
import ca.bc.gov.health.hamis.mapper.HamisMapper;
import ca.bc.gov.health.hamis.service.IExternalReportFacade;
import jakarta.ejb.Stateless;
import java.util.ArrayList;
import java.util.List;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

@Stateless
public class ExternalReportFacade extends AbstractFacade<ExternalReport>
    implements IExternalReportFacade {

  private final HamisMapper mapper = HamisMapper.INSTANCE;

  private static final Logger LOGGER = LogManager.getLogger(ExternalReportFacade.class);

  public ExternalReportFacade() {
    super(ExternalReport.class);
  }

  /**
   * Get the list of External Reports
   *
   * @return list of ExternalReportDto
   */
  @Override
  public List<ExternalReportDto> getExternalReports() {
    LOGGER.debug("getExternalReports called");
    ArrayList<ExternalReportDto> reportsList = new ArrayList<>();

    List<ExternalReport> results = super.findAll();
    for (ExternalReport result : results) {
      reportsList.add(mapper.toDto(result));
    }
    return reportsList;
  }
}
