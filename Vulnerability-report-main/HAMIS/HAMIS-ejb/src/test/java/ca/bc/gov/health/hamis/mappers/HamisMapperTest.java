package ca.bc.gov.health.hamis.mappers;

import static org.junit.Assert.assertEquals;

import ca.bc.gov.health.hamis.dto.ReportingPeriodDto;
import ca.bc.gov.health.hamis.entity.ReportingPeriod;
import ca.bc.gov.health.hamis.entity.ReportingPeriodId;
import ca.bc.gov.health.hamis.mapper.HamisMapper;
import org.junit.Test;
import org.mapstruct.factory.Mappers;

public class HamisMapperTest {

  private HamisMapper mapper = Mappers.getMapper(HamisMapper.class);

  @Test
  public void testReportingPeriodEntityToDTOconversion() {

    ReportingPeriodId rpId = ReportingPeriodId.builder().fiscalYear("2019").period("04").build();

    ReportingPeriod rp = ReportingPeriod.builder().id(rpId).userCreated("Admin").build();

    ReportingPeriodDto dto = mapper.toDto(rp);
    assertEquals(dto.getFiscalYear(), rpId.getFiscalYear());
    assertEquals(dto.getPeriod(), rpId.getPeriod());
  }

  @Test
  public void testReportingPeriodEntityToModelConversion() {

    // TODO
    //        ReportingPeriodId rpId =
    // ReportingPeriodId.builder().fiscalYear("2019").period("04").build();
    //        ReportingPeriod rp = ReportingPeriod.builder().id(rpId).userCreated("Admin").build();

    ReportingPeriodDto rpDto =
        ReportingPeriodDto.builder()
            .fiscalYear("2019/2020")
            .period("13")
            .userCreated("Admin")
            .build();

    ReportingPeriod entity = mapper.toModel(rpDto);
    assertEquals(entity.getId().getFiscalYear(), rpDto.getFiscalYear());
    assertEquals(entity.getId().getPeriod(), rpDto.getPeriod());
  }
}
