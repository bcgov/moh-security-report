package ca.bc.gov.health.hamis.dto;

import java.util.Date;
import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

/** DTO class for standard extract files */
@Builder
@NoArgsConstructor
@AllArgsConstructor
@Data
public class SEFFile {

  private int sefId;
  private int healthAuthority;
  private String fileName;
  private long fileSize;
  private String uploader;
  private Date timestamp;
  private byte[] contents;
  private String status;
  private int progress;
  private List<String> errors;

  public boolean isInProgress() {
    return !isAccepted() && !isError() && !isRejected();
  }

  public boolean isAccepted() {
    return "ACCEPTED: SEF file imported without critical errors.".equals(status);
  }

  public boolean isError() {
    return "SYSTEM ERROR: SEF file encountered system errors.".equals(status);
  }

  public boolean isRejected() {
    return "REJECTED: SEF file rejected due to critical errors.".equals(status);
  }
}
