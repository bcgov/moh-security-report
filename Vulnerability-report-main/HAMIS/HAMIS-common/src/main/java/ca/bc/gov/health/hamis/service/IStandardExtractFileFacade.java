/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.hamis.service;

import ca.bc.gov.health.hamis.dto.SEFFile;
import ca.bc.gov.health.hamis.dto.StandardExtractFileDto;
import jakarta.ejb.Local;
import java.io.IOException;
import java.util.List;

/**
 * Facade class for working with StandardExtractFiles
 *
 * @author greg.perkins
 */
@Local
public interface IStandardExtractFileFacade {

  /**
   * Returns only the summary data required by progress bar UI for the StandardExtractFile records
   * found by the provided parameters
   *
   * @param fiscalYear
   * @param period
   * @param healthOrganizationId
   * @return
   */
  public List<StandardExtractFileDto> getSefSummaryForReportingPeriod(
      String fiscalYear, String period, int healthOrganizationId);

  /**
   * Deletes a Standard Extract File
   *
   * @param sefId
   */
  public void deleteStandardExtractFile(int sefId);

  /**
   * Deletes the validation records for a period
   *
   * @param hoId
   * @param fiscalYear
   * @param period
   */
  public void deleteValidation(int hoId, String fiscalYear, String period);

  /**
   * Parse the upload file, and return any errors if found
   *
   * @param contents byte[] - the file contents to parse
   * @param errors List<String> collection to store errors
   * @return List<String[]> the parsed rows
   * @throws IOException
   */
  public List<String[]> parseFile(byte[] contents, List<String> errors) throws IOException;

  public void asyncProcessImportFile(
      SEFFile upload,
      List<String[]> rows,
      int sesId,
      int cagId,
      String period,
      String fiscalYear,
      String userId,
      long startTime);

  /**
   * Import a SEF File into the database
   *
   * @param upload SEFFile
   * @param sesId
   * @param cagId
   * @param fiscalYear
   * @return List<String>
   */
  public List<String> importStandardExtractFile(
      SEFFile upload, int sesId, int cagId, String period, String fiscalYear, String userId);

  /**
   * Validates the Standard Extract Files for a given reporting period and HA
   *
   * @param hoId
   * @param fiscalYear
   * @param period
   */
  public void validateStandardExtractFiles(int hoId, String fiscalYear, String period);

  /**
   * Export the Standard Extract Files for a given reporting period and HA
   *
   * @param hoId
   * @param fiscalYear
   * @param period
   * @param subType
   */
  public void exportStandardExtractFiles(
      int hoId, String fiscalYear, String period, String subType);
}
