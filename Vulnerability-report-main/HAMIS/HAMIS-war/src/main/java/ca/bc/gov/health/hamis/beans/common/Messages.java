/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.hamis.beans.common;

import jakarta.faces.application.FacesMessage;
import jakarta.faces.context.FacesContext;
import java.text.MessageFormat;

/**
 * Utility class for dealing with Faces Messages
 *
 * @author greg.perkins
 */
public class Messages {

  /**
   * Adds a faces message of severity ERROR, and marks the request as validation failed
   *
   * @param id String - Component ID the message is for
   * @param message - The message
   */
  public static void addErrorMessage(String id, String message, Object... params) {
    String m = MessageFormat.format(message, params);
    FacesContext.getCurrentInstance()
        .addMessage(id, new FacesMessage(FacesMessage.SEVERITY_ERROR, m, m));
    FacesContext.getCurrentInstance().validationFailed();
  }

  /**
   * Adds a faces message of severity INFO
   *
   * @param id String - Component ID the message is for
   * @param message - The message
   */
  public static void addInfoMessage(String id, String message, Object... params) {
    String m = MessageFormat.format(message, params);
    FacesContext.getCurrentInstance()
        .addMessage(id, new FacesMessage(FacesMessage.SEVERITY_INFO, m, m));
  }

  /**
   * Returns the Message Bundle text for a given key
   *
   * @param key String
   * @return String
   */
  public static String getMessageForKey(String key) {
    return FacesContext.getCurrentInstance()
        .getApplication()
        .getResourceBundle(FacesContext.getCurrentInstance(), "msg")
        .getString(key);
  }

  /**
   * Body of the user agreement for Indicator Definitions dialogue
   *
   * @return String
   */
  public static String getAgreementDialogBody() {
    StringBuilder sb = new StringBuilder(Messages.getMessageForKey("reports.agreement.paragraph1"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph2"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph3"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph4"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph5"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph6"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph7"));
    sb.append(Messages.getMessageForKey("reports.agreement.paragraph8"));
    return sb.toString();
  }
}
