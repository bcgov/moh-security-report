package ca.bc.gov.health.emaccs.web;

import ca.bc.gov.health.emaccs.ejb.entity.ActivityStatus;
import ca.bc.gov.health.emaccs.ejb.entity.OtherActivity;
import ca.bc.gov.health.emaccs.ejb.entity.ReportingYear;
import ca.bc.gov.health.emaccs.ejb.session.OtherActivityFacadeLocal;
import ca.bc.gov.health.emaccs.ejb.session.ReportingYearFacadeLocal;
import ca.bc.gov.health.jsf.BaseBean;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.util.List;
import java.util.logging.Logger;

@ViewScoped
@Named("BatchActivityEvaluation")
public class BatchActivityEvaluation extends BaseBean implements java.io.Serializable {

    private static final long serialVersionUID = 1L;
    private static final String CLASS_NAME = BatchActivityEvaluation.class.getName();
    private static final Logger log = Logger.getLogger(CLASS_NAME);

    @EJB
    private OtherActivityFacadeLocal otherActivityFacade;
    @EJB
    private ReportingYearFacadeLocal reportingYearFacade;

    /* Search results*/
    private List<OtherActivity> otherActivityList;

    /* Selected activity for comments */
    private OtherActivity otherActivity;

    /* Search Parameters */
    private OtherActivity params;
    private String lastNameParam;
    private String firstNameParam;
    private String licenceNumberParam;

    /**
     * Initializes this bean after injection is complete
     */
    @PostConstruct
    public void init() {
        clear();
    }

    /**
     * Clears the state of this bean
     */
    public void clear() {
        params = new OtherActivity();
        lastNameParam = null;
        firstNameParam = null;
        licenceNumberParam = null;
        otherActivity = new OtherActivity();
        params.setReportingYearId(new ReportingYear(reportingYearFacade.getCurrentReportingYear().getId()));
        params.setStatusId(new ActivityStatus());
        otherActivityList = null;
    }

    /**
     * Perform search
     */
    public void search() {
        otherActivityList = otherActivityFacade.batchActivitySearch(params, lastNameParam, firstNameParam, licenceNumberParam);
    }

    /* Selects a record for editing */
    public String select() {
        return "EvaluateOtherActivities.xhtml?faces-redirect=true";
    }

    /*  Getters and Setters */
    public OtherActivity getParams() {
        return params;
    }

    public void setParams(OtherActivity params) {
        this.params = params;
    }

    public String getLastNameParam() {
        return lastNameParam;
    }

    public void setLastNameParam(String lastNameParam) {
        this.lastNameParam = lastNameParam;
    }

    public String getFirstNameParam() {
        return firstNameParam;
    }

    public void setFirstNameParam(String firstNameParam) {
        this.firstNameParam = firstNameParam;
    }

    public String getLicenceNumberParam() {
        return licenceNumberParam;
    }

    public void setLicenceNumberParam(String licenceNumberParam) {
        this.licenceNumberParam = licenceNumberParam;
    }

    public List<OtherActivity> getOtherActivityList() {
        return otherActivityList;
    }

    public OtherActivity getOtherActivity() {
        return otherActivity;
    }

    public void setOtherActivity(OtherActivity otherActivity) {
        this.otherActivity = otherActivity;
    }

}
