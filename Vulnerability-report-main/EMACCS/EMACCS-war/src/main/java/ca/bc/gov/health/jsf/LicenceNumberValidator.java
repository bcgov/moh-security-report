/*******************************************************************************
 * Copyright Â© 2015, Province of British Columbia.                             *
 *                                                                             *
 * All rights reserved.                                                        *
 *                                                                             *
 * File:                        LicenceNumberValidator.java                    *
 * Date of Last Commit: $Date::                                              $ *
 * Revision Number:      $Rev::                                              $ *
 * Last Commit by:    $Author::                                              $ *
 *                                                                             *
 *******************************************************************************/

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.jsf;

import jakarta.enterprise.context.RequestScoped;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.component.UIComponent;
import jakarta.faces.context.FacesContext;
import jakarta.faces.validator.FacesValidator;
import jakarta.faces.validator.Validator;
import jakarta.faces.validator.ValidatorException;
import java.io.Serializable;

/**
 *
 * @author ian.scott
 */
@RequestScoped
@FacesValidator("validator.LicenceNumber")
public class LicenceNumberValidator implements Validator,Serializable {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        String licNo = (String) value;
        boolean startsWith1 = licNo.startsWith("1");
        boolean lengthIs6 = licNo.length()==6;
        if(startsWith1&&lengthIs6){
            return;
        }else if (!startsWith1&&!lengthIs6){
            FacesMessage message = new FacesMessage("Your Licence Number must be 6 digits long and start with one.");
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            throw new ValidatorException(message);
        }else if (!lengthIs6){
            FacesMessage message = new FacesMessage("Your Licence Number must be 6 digits long and start with one.");
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            throw new ValidatorException(message);
        } else if(!startsWith1){
            FacesMessage message = new FacesMessage("Your Licence Number must start with one.");
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            throw new ValidatorException(message);
        }
    }
    
}
