<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/WEB-INF/templates/gov30Template.xhtml">

    <ui:define name="title">Authorization Request</ui:define>
    <ui:define name="body">
        
        <h1 style="margin-top: 0px">Authorization Request Form</h1>
        <h:form id="form1">
            <p:panel rendered="false" header="HTTP Headers">
                <h:outputText value="#{AuthorizationRequest.headerText}" escape="false"/>
            </p:panel>
            
            <p:panel id="search" style="margin-bottom: 20px" header="Contact Information">                    
                <div class="ui-g">
                    <div class="ui-g-3">
                        <span class='required'>*</span><h:outputLabel value="Last Name" /><br/>
                        <p:inputText value="#{AuthorizationRequest.lastName}" required="true" requiredMessage="Last Name is required"/>
                    </div>

                    <div class="ui-g-9">
                        <span class='required'>*</span><h:outputLabel value="First Name" /><br/>
                        <p:inputText value="#{AuthorizationRequest.firstName}" required="true" requiredMessage="First Name is required"/>
                    </div>

                    <div class="ui-g-3">
                        <span class='required'>*</span><h:outputLabel value="Date of Birth" /><br/>
                        <p:calendar  value="#{AuthorizationRequest.dateOfBirth}"
                                       required="true"
                                       requiredMessage="Date of Birth is required"
                                       navigator="true" showOn="button"
                                       pattern="#{AuthorizationRequest.dateFormat}"
                                       size="15" yearRange="c-70:c"
                                       converterMessage="Please enter a properly formatted Birth Date: yyyy/mm/dd"
                                       />
                    </div>

                    <div class="ui-g-9">
                        <span class='required'>*</span><h:outputLabel value="Licence #" /><br/>
                        <p:inputText id="licNoField" value="#{AuthorizationRequest.licenceNo}" required="true" requiredMessage="Your 6 digit Licence # which starts with 1 is required" maxlength="6" >
                            <f:validator validatorId="validator.LicenceNumber"/>
                            <f:ajax event="keyup" render="licNoMess"/>
                        </p:inputText>
                        <h:message id="licNoMess" for="licNoField" style="color:red; margin-left: 20px" />
                    </div>

                    <div class="ui-g-3">
                        <span class='required'>*</span><h:outputLabel value="Phone Number" /><br/>
                        <p:inputText value="#{AuthorizationRequest.phoneNumber}" required="true" requiredMessage="Phone Number is required" maxlength="17">
                                <f:validator validatorId="validator.phoneNumberLength"/>
                        </p:inputText>
                    </div>

                    <div class="ui-g-9">
                        <span class='required'>*</span><h:outputLabel value="Email Address" /><br/>
                        <p:inputText value="#{AuthorizationRequest.email}" required="true" requiredMessage="Email Address is required">
                            <f:validator validatorId="validator.emailFormat"/>
                        </p:inputText>
                    </div>

                    <div class="ui-g-12">
                        <p:commandButton   
                            action="#{AuthorizationRequest.submit}"
                            value="Submit"
                            update="form1 global-messages"
                            onclick="window.scrollTo(0,160);"
                            onstart="$(this).attr('disabled','disabled');"
                            oncomplete="$(this).attr('disabled','');"
                            />
                    </div>
                </div>                   
            </p:panel>
        </h:form>

        <p:panel header="Unsuccessful Login Attempt">                     

            <h:outputText value="1. If you have requested access to the system and you have not yet received an email confirming your access with the 
                   subject “EMACCS ACCESS - User ID: with your username”, then access to the system is still pending and could take up to 2 
                   weeks from the date requested." style="display: block;" />            
            <br />
            <h:outputText value="2. If you have received the email confirming your access to the system please ensure that you are using the userid that was
                   in the subject line of your approval email." style="display: block;" />
            <br />
            <h:outputText value="3. If you have received the email confirming your access to the system and your userid is correct, please try clearing your
                    cache (with the browser open, select tools, internet options, delete, ensure cookies is checked, delete). Sometimes there 
                    are issues with Chrome, so please try logging in with Internet Explorer." style="display: block;" />
            <br />
            <h:outputText value="Please Note: Your BCeID password expires every two years from the time it was created or last changed and " />            
            <h:outputLink style="text-decoration:underline" value="https://www.bceid.ca/clp/account_recovery.aspx">may need to be reset.</h:outputLink>
        </p:panel>
      
    </ui:define>
</ui:composition>