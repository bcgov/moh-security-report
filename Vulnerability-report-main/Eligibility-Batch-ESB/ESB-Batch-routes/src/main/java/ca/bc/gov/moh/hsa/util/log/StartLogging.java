/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.moh.hsa.util.log;

import ca.bc.gov.moh.hsa.esb.service.batch.HeaderConstants;
import java.util.Map;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.springframework.stereotype.Component;

/**
 * Processor class to initialize variables for logging
 * @author greg.perkins
 */
@Component
public class StartLogging implements Processor {

    /**
     * Stores values for logging as headers to be used later
     * @param exchange Exchange
     * @throws Exception 
     */
    @Override
    public void process(Exchange exchange) throws Exception {

        Long startTime = System.currentTimeMillis();
        exchange.getIn().setHeader(HeaderConstants.START_TIME, startTime);
    }

    /**
     * Display the headers available.
     * @param exchange Exchange
     */
    private void enumerateHeaders(Exchange exchange) {
        Map<String, Object> headers = exchange.getIn().getHeaders();
        for (Map.Entry<String, Object> entry : headers.entrySet()) {
            String string = entry.getKey();
            Object object = entry.getValue();
            System.out.println(string + ":" + object.toString());
        }
    }

}
