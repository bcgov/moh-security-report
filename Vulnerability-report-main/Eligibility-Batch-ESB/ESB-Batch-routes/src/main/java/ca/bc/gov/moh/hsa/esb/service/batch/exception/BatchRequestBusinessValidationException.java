/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.moh.hsa.esb.service.batch.exception;

/**
 *
 * @author conrad.gustafson
 */
public class BatchRequestBusinessValidationException extends AbstractBatchException {

    public enum ValidationErrorType {

        WRONG_NUMBER_OF_MESSAGES(
                "A Batch Request must contain one Get Demographics (GD) message and one Get Eligibility (GE) message",
                "MSG-0001", 
                "", 
                ""),
        WRONG_TYPES_OF_MESSAGES(
                "A Batch Request must contain one Get Demographics (GD) message and one Get Eligibility (GE) message",
                "MSG-0001",
                "", 
                ""),
        ORG_CERT_MISMATCH(
                "The HIAL security certificate is incorrect.",
                "MSG-0019",
                "MSG-0019",
                ""),
        MODE_CODE_NOT_SUPPORTED(
                "The Batch Response Mode Code was rejected because the code value was not 'I'. Only 'I' (Immediate) will be accepted.",
                "MSG-0009",
                "",
                "");
        
        private final String errorTypeDisplayName;
        private final String errorTypeCode;
        private final String errorTypeText;
        private final String errorTypeOriginalText;
                 
        ValidationErrorType(String displayName, String code, String text, String originalText) {
            
            this.errorTypeDisplayName = displayName;
            this.errorTypeCode = code;
            this.errorTypeText = text;
            this.errorTypeOriginalText = originalText;
        }

        public String getErrorTypeDisplayName() {
            return errorTypeDisplayName;
        }

        public String getErrorTypeCode() {
            return errorTypeCode;
        }

        public String getErrorTypeText() {
            return errorTypeText;
        }

        public String getErrorTypeOriginalText() {
            return errorTypeOriginalText;
        }
    }

    private ValidationErrorType errorType;

    public ValidationErrorType getErrorType() {
        return errorType;
    }

    public BatchRequestBusinessValidationException(ValidationErrorType errorType) {
        
        super(errorType.getErrorTypeDisplayName());
        this.errorType = errorType;
        
        this.displayName = errorType.errorTypeDisplayName;
        this.code = errorType.errorTypeCode;
        this.text = errorType.errorTypeText;
        this.originalText = errorType.errorTypeOriginalText;      
    }

    public String getErrorDescription() {
        if (errorType == ValidationErrorType.MODE_CODE_NOT_SUPPORTED) {
            return "The Batch Response Mode Code rejected because the code value was not 'I'. Only 'I' (Immediate will be accepted.";
        } else if (errorType == ValidationErrorType.WRONG_NUMBER_OF_MESSAGES) {
            return "A Batch Request must contain one Get Demographics (GD) message and one Get Eligibility (GE) message";
        } else if (errorType == ValidationErrorType.WRONG_TYPES_OF_MESSAGES) {
            return "A Batch Request must contain one Get Demographics (GD) message and one Get Eligibility (GE) message";
        } else if (errorType == ValidationErrorType.ORG_CERT_MISMATCH) {

        } else if (errorType == ValidationErrorType.WRONG_NUMBER_OF_MESSAGES) {

        }
        return errorType.toString();
    }

}
