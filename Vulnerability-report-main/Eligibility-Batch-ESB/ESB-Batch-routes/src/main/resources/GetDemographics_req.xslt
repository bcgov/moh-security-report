<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <!--soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="urn:hl7-org:v3">
            <soapenv:Header/>
            <soapenv:Body-->
                <HCIM_IN_GetDemographics xmlns="urn:hl7-org:v3" xmlns:mif="urn:hl7-org:v3/mif" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<!-- unique id for the message -->
                    <id root="2.16.840.1.113883.3.51.1.1.1">
                        <xsl:attribute name="extension">
                            <xsl:value-of select="/QBP_Q21/MSH/MSH.10"/>
                        </xsl:attribute>    
                    </id>
	<!-- message creation time -->
                    <creationTime>
                        <xsl:attribute name="value">
                            <xsl:value-of select="/QBP_Q21/MSH/MSH.7"/>
                        </xsl:attribute>                   
                    </creationTime>
	<!-- message version -->
                    <versionCode code="V3PR1"/>
	<!-- interaction id -->
                    <interactionId root="2.16.840.1.113883.3.51.1.1.2" extension="HCIM_IN_GetDemographics"/>
	<!-- processing code (P = production) -->
                    <processingCode code="P"/>
	<!-- processing mode code (T = current processing) -->
                    <processingModeCode code="T"/>
	<!-- accept ack (TBD) -->
                    <acceptAckCode code="NE"/>
	<!-- receiver of the message -->
                    <receiver typeCode="RCV">
                        <device determinerCode="INSTANCE" classCode="DEV">
			<!-- id/@extension identifies the receiving device/system inside the organization -->
                            <id root="2.16.840.1.113883.3.51.1.1.4" extension="BCHCIM"/>
                            <asAgent classCode="AGNT">
                                <representedOrganization determinerCode="INSTANCE" classCode="ORG">
					<!-- id/@extension identifies the receiving organization -->
                                    <id root="2.16.840.1.113883.3.51.1.1.3" extension="HCIM"/> 
                               </representedOrganization>
                            </asAgent>
                        </device>
                    </receiver>
	<!-- sender of the message -->
                    <sender typeCode="SND">
                        <device determinerCode="INSTANCE" classCode="DEV">
			<!-- id/@extension identifies the sending device/system inside the organization -->
                            <id root="2.16.840.1.113883.3.51.1.1.5">
                                <xsl:attribute name="extension">
                                    <xsl:value-of select="/QBP_Q21/MSH/MSH.3"/>
                                </xsl:attribute>
                            </id>
                            <asAgent classCode="AGNT">
                                <representedOrganization determinerCode="INSTANCE" classCode="ORG">
					<!-- id/@extension identifies the sending organization -->
                                    <id root="2.16.840.1.113883.3.51.1.1.3">
                                        <xsl:attribute name="extension">
                                            <xsl:value-of select="/QBP_Q21/MSH/MSH.4"/>
                                        </xsl:attribute>
                                    </id>
                                </representedOrganization>
                            </asAgent>
                        </device>
                    </sender>
                    <controlActProcess classCode="ACCM" moodCode="EVN">
                        <dataEnterer typeCode="CST">
                            <assignedPerson classCode="ENT">
                                <id root="2.16.840.1.113883.3.51.1.1.7">
                                    <xsl:attribute name="extension">
                                        <xsl:value-of select="/QBP_Q21/MSH/MSH.8"/>
                                    </xsl:attribute>                                       
                                </id>
                            </assignedPerson>
                        </dataEnterer>
                        <queryByParameter>
                            <queryByParameterPayload>
                                <person.id>
                                    <value root="2.16.840.1.113883.3.51.1.1.6" assigningAuthorityName="MOH_CRS">
                                        <xsl:attribute name="extension">
                                            <xsl:value-of select="/QBP_Q21/QPD/QPD.3"/>
                                        </xsl:attribute>
                                    </value>
                                </person.id>
                            </queryByParameterPayload>
                        </queryByParameter>
                    </controlActProcess>
                </HCIM_IN_GetDemographics>
            <!--/soapenv:Body>
        </soapenv:Envelope-->  
    </xsl:template>

</xsl:stylesheet>