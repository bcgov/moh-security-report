/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.moh.hsa.util.audit;

import ca.bc.gov.moh.hsa.util.audit.entity.Transaction;
import java.util.UUID;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

/**
 *
 * @author conrad.gustafson
 */
@Transactional
@Component
public class TransactionIDAssigner implements Processor {

    public static final String TRANSACTION_ID_HEADER_KEY = "HSA_TRANSACTION_ID";
    
    @Override
    public void process(Exchange exchange) throws Exception {
        TransactionIDAssigner.setTransactionIDHeader(exchange);
    }

    public static String setTransactionIDHeader(Exchange exchange) throws Exception {
        String transactionID = UUID.randomUUID().toString();
        exchange.getIn().setHeader(TRANSACTION_ID_HEADER_KEY, transactionID);
        return transactionID;
    }
    
}
