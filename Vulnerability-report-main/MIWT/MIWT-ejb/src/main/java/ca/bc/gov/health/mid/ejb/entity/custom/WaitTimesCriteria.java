package ca.bc.gov.health.mid.ejb.entity.custom;

import jakarta.faces.model.SelectItem;
import java.util.ArrayList;
import java.util.List;

/**
 *
 * @author CGI Information Management Consultants Inc.
 */
public class WaitTimesCriteria {
    private List<WaitTimesFilter> filters;

    public List<DynamicColumn> buildColumnList(){
        List<DynamicColumn> cols = new ArrayList<DynamicColumn>();
        for (WaitTimesFilter filter : filters) {
            if (filter.isIncludeInReport()){
               cols.add(new DynamicColumn(filter.getColumn(), filter.getLabel()));
            }
        }
        return cols;
    }    
    
    public String getCriteriaDisplayTxt(){
        StringBuilder label = new StringBuilder("Wait Time in Days:");
        boolean first = true;
        for (WaitTimesFilter filter : filters) {
            if (filter.getSelectedOptions().length>0){
                if (first){
                    first = false;
                }else{
                    label.append(" | ");
                }
                label.append(" "+filter.getLabel()+" = ");
                for (String value : filter.getSelectedOptions()) {
                    label.append(decode(value,filter.getOptions())+", ");
                }
                label.delete(label.length()-2, label.length());
            }
        }
        return label.toString();
    }
    
    private String decode(Object value, List<SelectItem> options){
        for (SelectItem selectItem : options) {
            if (selectItem.getValue().toString().equals(value.toString())){
                return selectItem.getLabel();
            }
        }
        return "";
    }
    
    public WaitTimesCriteria(){
        filters = new ArrayList<WaitTimesFilter>();
    }
    
    public List<WaitTimesFilter> getFilters() {
        return filters;
    }

    public void setFilters(List<WaitTimesFilter> filters) {
        this.filters = filters;
    }
    
    
}
