package mid.selenium.functional.ha;

import java.util.logging.Level;
import java.util.logging.Logger;
import mid.selenium.pageobjects.HomePageHA;
import mid.selenium.pageobjects.fragment.LeftMenuCodeTables;
import mid.selenium.pageobjects.fragment.LeftMenuHA;
import mid.selenium.pageobjects.fragment.LeftMenuHAMappings;
import mid.selenium.pageobjects.fragment.LeftMenuReports;
import mid.selenium.pageobjects.fragment.LeftMenuSnapshot;
import mid.selenium.pageobjects.fragment.LeftMenuUploadFile;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.remote.CapabilityType;
import org.openqa.selenium.remote.DesiredCapabilities;
import selenium.pageobject.LoginPage;
import selenium.util.ActionBot;
import selenium.util.UserAccounts;
import selenium.util.WebDriverFactory;

/**
 *
 * @author CGI Information Management Consultants Inc.
 */
public class HAHomePageTest {

    private static final Logger logger = Logger.getLogger(HAHomePageTest.class.getName());
    private static DesiredCapabilities desiredCapabilities;
    private static WebDriver driver;
    private static HomePageHA adminHomePage;
    private static LeftMenuHAMappings haMappings;
    private static ActionBot actionBot;

    public HAHomePageTest() {
    }

    @BeforeClass
    public static void setUpClass() throws Exception {
        desiredCapabilities = DesiredCapabilities.internetExplorer();
        desiredCapabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);

        driver = WebDriverFactory.getInstance(WebDriverFactory.DRIVER_TYPE.SERVER, desiredCapabilities);

        actionBot = new ActionBot(driver);

        LoginPage loginPage = new LoginPage(driver, desiredCapabilities.getBrowserName(), UserAccounts.HA_VAC_ISLAND, UserAccounts.getPassword(UserAccounts.HA_VAC_ISLAND));
        
        LeftMenuUploadFile upload = new LeftMenuUploadFile(driver, desiredCapabilities.getBrowserName());
        haMappings = new LeftMenuHAMappings(driver, desiredCapabilities.getBrowserName());
        
        LeftMenuHA leftMenu = new LeftMenuHA(upload, haMappings, driver, desiredCapabilities.getBrowserName());
        adminHomePage = new HomePageHA(loginPage, leftMenu, driver, desiredCapabilities.getBrowserName()).get();


    }

    @AfterClass
    public static void tearDownClass() {
        adminHomePage.signOut();
        driver.quit();
    }


    @Test
    public void testPageLoad() {
        logger.log(Level.INFO, "Running: 'HAHomePageTest: testPageLoad'");
        LeftMenuReports reports = new LeftMenuReports(driver, desiredCapabilities.getBrowserName());
        LeftMenuSnapshot snapshot = new LeftMenuSnapshot(driver, desiredCapabilities.getBrowserName());
        LeftMenuCodeTables codeTables = new LeftMenuCodeTables(driver, desiredCapabilities.getBrowserName());
        
        adminHomePage.assertPageLoaded();
        reports.assertNotLoaded();
        snapshot.assertNotLoaded();
        codeTables.assertNotLoaded();

    }
    
    @Test
    public void testMenuOpen() {
        logger.log(Level.INFO, "Running: 'HAHomePageTest: testMenuOpen'");
        haMappings.openMenu();
        haMappings.assertChildrenMenuOpen();

    }
    
    @Test
    public void testMenuClose() {
        logger.log(Level.INFO, "Running: 'HAHomePageTest: testMenuClose'");
        haMappings.closeMenu();
        haMappings.assertChildrenMenuClose();

    }

}