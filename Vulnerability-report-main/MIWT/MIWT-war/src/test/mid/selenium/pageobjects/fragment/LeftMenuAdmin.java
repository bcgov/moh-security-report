package mid.selenium.pageobjects.fragment;

import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.support.PageFactory;
import org.openqa.selenium.support.ui.LoadableComponent;
import selenium.util.ActionBot;

/**
 *
 * @author CGI Information Management Consultants Inc.
 */
public class LeftMenuAdmin extends LoadableComponent<LeftMenuAdmin> {

    private final WebDriver driver;
    private String handle;
    private final ActionBot actionBot;
    private final String browser;
    
    private final LeftMenuHeader menuHeader;
    private final LeftMenuReports reports;
    private final LeftMenuSnapshot snapshot;
    private final LeftMenuHAMappings haMappings;
    private final LeftMenuCodeTables codeTables;

    public LeftMenuAdmin(LeftMenuHeader menuHeader, LeftMenuReports reports, LeftMenuSnapshot snapshot, LeftMenuHAMappings haMappings, LeftMenuCodeTables codeTables, WebDriver driver, String browser) {
        this.driver = driver;
        this.browser = browser;
        this.menuHeader = menuHeader;
        this.reports = reports;
        this.snapshot = snapshot;
        this.haMappings = haMappings;
        this.codeTables = codeTables;
        actionBot = new ActionBot(driver);

        PageFactory.initElements(driver, this);
    }

    @Override
    protected void load() {
        PageFactory.initElements(driver, this);
    }

    @Override
    protected void isLoaded() throws Error {

        try {            
            assert false;
        } catch (NoSuchElementException e) {
            load();
        }
    }

    public void setHandle(String handle) {
        this.handle = handle;
    }
    
    public void assertPageLoaded() {
        menuHeader.assertLoaded();
        reports.assertLoaded();
        snapshot.assertLoaded();
        haMappings.assertLoaded();
        codeTables.assertLoaded();
    }
    
    public void showHomePage() {
        menuHeader.showHomePage();
    }
   
}
