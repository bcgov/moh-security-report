package ca.bc.gov.health.hscis.service;

import jakarta.annotation.PostConstruct;
import jakarta.ejb.Stateful;
import jakarta.enterprise.context.SessionScoped;
import jakarta.faces.context.FacesContext;
import jakarta.inject.Inject;
import jakarta.persistence.EntityManager;
import jakarta.persistence.PersistenceContext;
import jakarta.security.enterprise.SecurityContext;
import jakarta.servlet.http.HttpSession;
import java.io.Serializable;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@SessionScoped
@Stateful
public class HscisSessionBean implements Serializable {

  private static final long serialVersionUID = 2820762570514354920L;

  @PersistenceContext(unitName = "hscis-ejb_pu")
  private transient EntityManager em;

  @Inject SecurityContext securityContext;

  private static final Logger logger = LoggerFactory.getLogger("HscisSessionBean");

  @PostConstruct
  public void init() {
    logger.error("error msg");
    logger.warn("warn msg");
    logger.info("info msg");
    logger.debug("debug msg");
    logger.debug("trace msg");
  }

  public String getSessionID() {
    return ((HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false))
        .getId();
  }
}
