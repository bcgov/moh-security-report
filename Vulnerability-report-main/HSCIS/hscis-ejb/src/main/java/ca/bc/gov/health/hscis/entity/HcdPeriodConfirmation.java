package ca.bc.gov.health.hscis.entity;

import jakarta.persistence.CascadeType;
import jakarta.persistence.Column;
import jakarta.persistence.EmbeddedId;
import jakarta.persistence.Entity;
import jakarta.persistence.FetchType;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.JoinColumns;
import jakarta.persistence.NamedQueries;
import jakarta.persistence.NamedQuery;
import jakarta.persistence.OneToOne;
import jakarta.persistence.PrePersist;
import jakarta.persistence.PreUpdate;
import jakarta.persistence.Table;
import java.io.Serializable;
import java.time.LocalDate;

/** The persistent class for the HCD_PERIOD_CONFIRMATION database table. */
@Entity
@Table(name = "HCD_PERIOD_CONFIRMATION")
@NamedQueries({
  @NamedQuery(
      name = "HcdPeriodConfirmation.findAll",
      query = "SELECT h FROM HcdPeriodConfirmation h"),
  @NamedQuery(
      name = "HcdPeriodConfirmation.findById",
      query = "SELECT h FROM HcdPeriodConfirmation h WHERE h.hscisid = :id"),
  @NamedQuery(
      name = "HcdPeriodConfirmation.findAllSearch",
      query =
          "SELECT h FROM HcdPeriodConfirmation h "
              + "WHERE CAST(h.id.siteEmployerNumber AS varchar(5)) LIKE :searchValue "
              + "   OR CAST(h.id.corporateEmployerNumber AS varchar(5)) LIKE :searchValue "
              + "   OR UPPER(h.membership.legalName) LIKE :searchValue "
              + "   OR h.id.reportingFrom = :searchDate OR h.id.reportingTo = :searchDate "
              + "   OR FUNCTION('TRUNC', h.createdOn) = :searchDate")
})
public class HcdPeriodConfirmation implements Serializable {

  private static final long serialVersionUID = 1L;
  private Long hscisid;
  private PayrollSummaryPK id;
  private LocalDate createdOn;
  private LocalDate completeDate;
  private String createdBy;
  private String lastModifiedBy;
  private LocalDate lastModifiedOn;
  private HcdMembership membership;

  public HcdPeriodConfirmation() {}

  @Column(name = "HEALTH_ORG_HSCIS_ID")
  public Long getHscisid() {
    return this.hscisid;
  }

  public void setHscisid(Long hscisid) {
    this.hscisid = hscisid;
  }

  @EmbeddedId
  public PayrollSummaryPK getId() {
    return this.id;
  }

  public void setId(PayrollSummaryPK id) {
    this.id = id;
  }

  @Column(name = "COMPLETE_DATE")
  public LocalDate getCompleteDate() {
    return this.completeDate;
  }

  public void setCompleteDate(LocalDate completeDate) {
    this.completeDate = completeDate;
  }

  @Column(name = "CREATED_BY")
  public String getCreatedBy() {
    return this.createdBy;
  }

  public void setCreatedBy(String createdBy) {
    this.createdBy = createdBy;
  }

  @Column(name = "CREATED_ON")
  public LocalDate getCreatedOn() {
    return this.createdOn;
  }

  public void setCreatedOn(LocalDate createdOn) {
    this.createdOn = createdOn;
  }

  @Column(name = "LAST_MODIFIED_BY")
  public String getLastModifiedBy() {
    return this.lastModifiedBy;
  }

  public void setLastModifiedBy(String lastModifiedBy) {
    this.lastModifiedBy = lastModifiedBy;
  }

  @Column(name = "LAST_MODIFIED_ON")
  public LocalDate getLastModifiedOn() {
    return this.lastModifiedOn;
  }

  public void setLastModifiedOn(LocalDate lastModifiedOn) {
    this.lastModifiedOn = lastModifiedOn;
  }

  @OneToOne(cascade = CascadeType.REFRESH, optional = false, fetch = FetchType.LAZY)
  @JoinColumns({
    @JoinColumn(
        name = "CORPORATE_EMPLOYER_NUMBER",
        referencedColumnName = "CORPORATE_EMPLOYER_NUMBER",
        insertable = false,
        updatable = false),
    @JoinColumn(
        name = "SITE_EMPLOYER_NUMBER",
        referencedColumnName = "SITE_EMPLOYER_NUMBER",
        insertable = false,
        updatable = false)
  })
  public HcdMembership getMembership() {
    return membership;
  }

  public void setMembership(HcdMembership membership) {
    this.membership = membership;
  }

  @PrePersist
  protected void onCreate() {
    createdOn = LocalDate.now();
    completeDate = LocalDate.now();
  }

  @PreUpdate
  protected void onUpdate() {
    lastModifiedOn = LocalDate.now();
  }
}
