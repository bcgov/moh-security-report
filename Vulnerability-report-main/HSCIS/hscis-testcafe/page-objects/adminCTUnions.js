import { Selector, t } from 'testcafe';
import { selectorById, selectorByAria } from '../helpers/selector.helper';

export default class adminCTUnions {
    constructor () {
		this.accordionMenu = selectorById("codetablesPagesID");
        this.dataForm = selectorById("unionsForm");
		this.createButton = selectorById("unionsCreateButton");
        this.dataTable = selectorById("unionsTable");
        this.dataTableData = selectorById("unionsTable_data");
		this.dialogHeaderText = 'Update Union';
		this.createDialogHeaderText = 'Create Union';

		this.descriptionInput = selectorById("unionUpdateDescriptionText");
		this.codeInputCreate = selectorById("unionCreateCodeText");
		this.descriptionInputCreate = selectorById("unionCreateDescriptionText");
		this.errorMessage = selectorById("unionsMessages");
	}
	
    codeTablesMenuOpen() {
        return this.accordionMenu.find(".ui-accordion-header.ui-helper-reset.ui-state-default.ui-state-active.ui-corner-top");
    }
	
    codeTablesMenuClosed() {
        return this.accordionMenu.find(".ui-accordion-header.ui-helper-reset.ui-state-default.ui-corner-all");
    }
	
	getDatas() {
        return this.dataTableData.find(".ui-datatable-selectable");
    }
	
	getColumnHead() {
		return selectorById("codetablesPagesID:unionsForm:unionsTable_head").child().child(0);
	}
	
	async changeOrder() {
        await t.
            click(this.getColumnHead());
    }
	
	getDatasTestRow() {
		return Selector('td').withExactText('99').parent('tr');
	}
    
	dataDialog() {
        return Selector("span").withText(this.dialogHeaderText).parent(".ui-confirm-dialog");
    }

    dataDialogYesButton() {
        return this.dataDialog().find(".ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-text-only");
    }
    
    dataDialogNoButton() {
        return this.dataDialog().find(".ui-confirmdialog-no");
    }

	async confirmDataDialog() {
        await t.
            click(this.dataDialogYesButton());
    }
    
    async cancelDataDialog() {
        await t.
            click(this.dataDialogNoButton());
    }

	createDataDialog() {
        return Selector("span").withText(this.createDialogHeaderText).parent(".ui-confirm-dialog");
    }

    createDataDialogYesButton() {
        return this.createDataDialog().find(".ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-text-only");
    }
    
    createDataDialogNoButton() {
        return this.createDataDialog().find(".ui-confirmdialog-no");
    }

	async confirmCreateDataDialog() {
        await t.
            click(this.createDataDialogYesButton());
    }
    
    async cancelCreateDataDialog() {
        await t.
            click(this.createDataDialogNoButton());
    }
}