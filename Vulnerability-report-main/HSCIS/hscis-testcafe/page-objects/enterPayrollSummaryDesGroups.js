import { t } from 'testcafe';
import { selectorById, queryById } from '../helpers/selector.helper';
import { extractDataFromTable } from '../helpers/table.helper';

export default class EnterPayrollSummaryDesGroupsPage {
    constructor () {
        this.designatedGroupsPanel       = selectorById("groupsPanel");
        this.groupTableData              = this.designatedGroupsPanel.find(queryById("groupTable_data"));
        this.createButton                = this.designatedGroupsPanel.find(queryById("createdesgroup"));
    }
    
    async clickCreateButton() {
        await t.
            click(this.createButton);
    }
    
    designatedGroups() {
        return this.groupTableData.find("tr");
    }
    
    async designatedGroupsData() {
        return extractDataFromTable(this.groupTableData);
    }
    
    dataIndexOfDesignatedGroup(data, designatedGroupDescription) {
        for (let rowNumber = 0; rowNumber < data.length; rowNumber++) {
            let row = data[rowNumber];
            if (row.length === 2 &&
                row[0] == designatedGroupDescription) {
                return rowNumber;
            }
        }
        return -1;
    }
    
    dataContainsDesignatedGroup(data, designatedGroupDescription) {
        return this.dataIndexOfDesignatedGroup(data, designatedGroupDescription) !== -1;
    }
}