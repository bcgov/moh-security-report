import { t } from 'testcafe';
import { selectorById, queryById } from '../helpers/selector.helper';
import { extractDataFromTable } from '../helpers/table.helper';

export default class EnterPayrollSummaryEmployeePage {
    constructor () {
        this.employeesPanel              = selectorById("employeesPanel");
        this.employeeTableData           = this.employeesPanel.find(queryById("employeeTable_data"));
        this.createButton                = this.employeesPanel.find(queryById("createemployee"));
    }
    
    async clickCreateButton() {
        await t.
            click(this.createButton);
    }
    
    employees() {
        return this.employeeTableData.find("tr");
    }
    
    async employeesData() {
        return extractDataFromTable(this.employeeTableData);
    }
    
    dataIndexOfEmployee(data, employeeNumber) {
        for (let rowNumber = 0; rowNumber < data.length; rowNumber++) {
            let row = data[rowNumber];
            if (row.length === 5 &&
                row[0] == employeeNumber) {
                return rowNumber;
            }
        }
        return -1;
    }
    
    employeeDesignatedGroup(data, employeeNumber) {
        for (let rowNumber = 0; rowNumber < data.length; rowNumber++) {
            let row = data[rowNumber];
            if (row.length === 5 &&
                row[0] == employeeNumber) {
                return row[1];
            }
        }
        return '';
    }

    dataContainsEmployee(data, employeeNumber) {
        return this.dataIndexOfEmployee(data, employeeNumber) !== -1;
    }
}