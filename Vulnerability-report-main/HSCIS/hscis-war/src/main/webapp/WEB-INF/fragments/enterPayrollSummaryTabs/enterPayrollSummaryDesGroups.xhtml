<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
  <p:panel id="groupsPanel" rendered="#{bean.pageMode == 'EDIT' || bean.pageMode == 'READONLY'}" styleClass="desgroup-panel">
    <p:dataTable id="groupTable" value="#{bean.summary.groupSummaries}"
                 var="group" sortBy="#{group.lastModified}"
                 rowKey="#{group.id}" selection="#{bean.selectedGroup}"
                 selectionMode="single" rows="10" paginator="true" styleClass="datatable-header-paginator-top"
                 paginatorAlwaysVisible="false" paginatorPosition="top"
                 paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {NextPageLink}"
                 currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords}">
      <p:ajax event="rowSelect" listener="#{bean.editDesGroup}"
              update="editDesGroupDialogForm desGroupDialogHeader" />
      <f:facet name="header">
        DESIGNATED GROUPS
      </f:facet>
      <p:column headerText="DESIGNATED GROUP"
                sortBy="#{group.designatedGroup.description}" width="750">
        <h:outputText value="#{group.designatedGroup.designatedGroupCode} - #{group.designatedGroup.description}" />
      </p:column>
      <p:column headerText="LAST MODIFIED"
                sortBy="#{group.lastModified}" sortOrder="desc">
        <h:outputText value="#{group.lastModified}">
          <f:convertDateTime type="localDateTime" pattern="yyyy-MM-dd HH:mm" />
        </h:outputText>
      </p:column>
    </p:dataTable>
    <div class="margin-bottom-10">
      <p:commandButton id="createdesgroup" value="Create"
                       immediate="true"
                       update="editDesGroupDialogForm desGroupDialogHeader"
                       actionListener="#{bean.openDesGroup}"
                       disabled="#{bean.pageMode != 'EDIT'}"
                       title="Create a Designated Group">
        <p:resetInput target="editDesGroupDialogForm" />
      </p:commandButton>
    </div>
  </p:panel>
  <p:confirmDialog global="true">
    <p:commandButton value="Yes" type="button"
                     styleClass="ui-confirmdialog-yes" />
    <p:commandButton value="No" type="button"
                     styleClass="ui-confirmdialog-no" />
  </p:confirmDialog>
</ui:composition>