<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
  <p:dialog id="employeeDialog" widgetVar="createEmployeeDialog" modal="true" width="654px" height="600px" position="center" resizable="false">
    <f:facet name="header">
      <h:outputText id="employeeDialogHeader" value="#{bean.employeePopupTitle}" />
    </f:facet>
    <h:form id="editEmployeeDialogForm">
      <p:messages id="employeeMessages" escape="false" />
      <p:panel id="employeeSearch">
        <div class="display-flex">
          <div class="ui-g-6 no-margin-left no-padding-left padding-right-10">
            <div class="padding-right-6-5">
              <p:outputLabel class="ui-g-label ${bean.empSearched || bean.popupEmpMode == 'EDIT' || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" 
                             for="@next" value="Employee Number" />
              <div class="ui-g-field no-margin-bottom">
                <p:inputText id="empNm" disabled="${bean.empSearched || bean.popupEmpMode == 'EDIT' || bean.popupEmpMode == 'READONLY'}"
                             value="${bean.selectedEmployee.employeeNumber}" maxlength="10" required="${!bean.empSearched}" />
              </div>
            </div>
          </div>
          <div class="ui-g-6 no-margin-left no-padding-right padding-left-10">
            <div class="padding-left-6-5 padding-right-6-5">
              <div class="empty-label" />
              <div class="ui-g-field no-margin-bottom">
                <p:commandButton id="employeeFind" value="Find" action="${bean.findEmployeeCurrentPeriod}" update="@form" disabled="${bean.empSearched}" />
              </div>
            </div>
          </div>
        </div>
      </p:panel>
      <div class="display-flex padding-left-10 padding-right-10 border-left-right margin-bottom-10">
        <div class="ui-g-6 no-margin-left no-padding-left padding-right-10">
          <div class="padding-left-6-5 padding-right-6-5">
            <p:outputLabel class="ui-g-label ${!bean.empSearched || bean.popupEmpMode == 'EDIT' || bean.popupEmpMode == 'READONLY' || (bean.popupEmpMode == 'CREATE' and bean.selectedEmployee.employeeSinHash != null) ? 'readonly' : ''}" 
                           for="@next" value="Employee SIN" />
            <div class="ui-g-field">
              <p:inputText id="empSin" disabled="${!bean.empSearched || bean.popupEmpMode == 'EDIT' || bean.popupEmpMode == 'READONLY' || (bean.popupEmpMode == 'CREATE' and bean.selectedEmployee.employeeSinHash != null)}"
                           value="${bean.selectedEmployee.employeeSinHash != null ? 'EMPLOYEE SIN FOUND' : bean.selectedEmployee.employeeSinHash}" required="${bean.empSearched}" maxlength="9">
                <p:keyFilter mask="num" preventPaste="false" />
                <f:validateLength minimum="9" />
              </p:inputText>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Designated Group Code" />
            <div class="ui-g-field">
              <p:selectOneMenu id="groupcode" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.designatedGroup.designatedGroupCode}"
                               required="${bean.empSearched}" binding="#{designatedGroupCode}">
                <f:selectItem itemDisabled="true" itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="grp" value="#{bean.designatedGroups}"
                               itemLabel="#{grp.designatedGroupCode} - #{grp.description}" itemValue="#{grp.designatedGroupCode}" />
                <p:ajax event="change" listener="#{bean.filterClassCodesByDesGroup}" update="classcode" />
                <p:ajax event="change" listener="#{bean.filterJobTitleByClassCode}" update="jobtitle" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Union Code" />
            <div class="ui-g-field">
              <p:selectOneMenu id="unioncode" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.union.unionCode}"
                               required="${bean.empSearched}">
                <f:selectItem itemDisabled="true" itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="unco" value="#{bean.unionCodes}"
                               itemLabel="#{unco.unionCode} - #{unco.description}" itemValue="#{unco.unionCode}" />
                <f:validator validatorId="UnionCodeValidator" />
                <f:attribute name="designatedGroupCode" value="#{designatedGroupCode.value}" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Date of Birth" />
            <div class="ui-g-field">
              <p:datePicker id="dateofbirth" pattern="yyyy MM dd" placeholder="YYYY MM DD" mask="true" showIcon="true" 
                            disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                            value="${bean.selectedEmployee.dateBirth}" required="${bean.empSearched}" autocomplete="off">
                <f:convertDateTime type="localDate" pattern="yyyy MM dd" />
                <p:ajax event="change" listener="#{bean.dateOfBirthValidWarnChangeListener}" />
                <f:validator validatorId="DateOfBirthValidator" />
              </p:datePicker>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Gender" />
            <div class="ui-g-field">
              <p:selectOneMenu id="gender" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.gender.genderCode}"
                               required="${bean.empSearched}">
                <f:selectItem itemDisabled="true" itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="gdr" value="#{bean.genders}"
                               itemLabel="#{gdr.genderCode} - #{gdr.description}" itemValue="#{gdr.genderCode}" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Class Code" />
            <div class="ui-g-field">
              <p:selectOneMenu id="classcode" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.classification.classificationCode}"
                               required="${bean.empSearched}">
                <f:selectItem itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="clscode" value="#{bean.classCodes}"
                               itemLabel="#{clscode.classificationCode} - #{clscode.description}" itemValue="#{clscode.classificationCode}" />
                <p:ajax event="change" listener="#{bean.filterJobTitleByClassCode}" update="jobtitle" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Termination Date" />
            <div class="ui-g-field">
              <p:datePicker id="terminationdate" pattern="yyyy MM dd" placeholder="YYYY MM DD" mask="true" showIcon="true" 
                            disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                            value="${bean.selectedEmployee.terminationDate}" binding="#{terminationDate}" autocomplete="off">
                <f:convertDateTime type="localDate" pattern="yyyy MM dd" />
              </p:datePicker>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Termination Code" />
            <div class="ui-g-field">
              <p:selectOneMenu id="termcode" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.terminationCode}">
                <f:selectItem itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="tercode" value="#{bean.terminationCodes}"
                               itemLabel="#{tercode.terminationCode} - #{tercode.description}" itemValue="#{tercode.terminationCode}" />
                <f:validator validatorId="TerminationValidator" />
                <f:attribute name="terminationDateComponent" value="#{terminationDate}" />
                <f:attribute name="terminationDate" value="#{terminationDate.value}" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Layered-Over Position" />
            <div class="ui-g-field">
              <p:inputNumber id="layeredoverposition" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                             value="${bean.selectedEmployee.layeredoverPositionsClasscd}"
                             minValue="0" maxValue="99999" decimalPlaces="0" modifyValueOnWheel="false" />
            </div>
          </div>
        </div>
        <div class="ui-g-6 no-margin-left no-padding-right padding-left-10">
          <div class="padding-left-6-5 padding-right-6-5">
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Increment" />
            <div class="ui-g-field">
              <p:selectOneMenu id="increment" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.incrementValue}"
                               required="${bean.empSearched}">
                <f:selectItem itemDisabled="true" itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="incr" value="#{bean.increments}"
                               itemLabel="#{incr}" itemValue="#{incr}" />
                <f:validator validatorId="IncrementValidator" />
                <f:attribute name="designatedGroupCode" value="#{designatedGroupCode.value}" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Wage Rate" />
            <div class="ui-g-field">
              <p:inputNumber id="wgRate" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                             placeholder="$0.00" symbol="$" decimalSeparator="." thousandSeparator=","
                             value="${bean.selectedEmployee.wageRate}" required="${bean.empSearched}"
                             minValue="0.00" maxValue="999.99" decimalPlaces="2" modifyValueOnWheel="false">
                <p:ajax event="change" listener="#{bean.wageRateValidWarnChangeListener}" />
                <f:validator validatorId="WageRateValidator" />
                <f:attribute name="designatedGroupCode" value="#{designatedGroupCode.value}" />
              </p:inputNumber>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Regular Paid Hours" />
            <div class="ui-g-field">
              <p:inputNumber id="regpaidhours" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                             value="${bean.selectedEmployee.regularPaidHours}" required="${bean.empSearched}"
                             minValue="-99999.99" maxValue="99999.99" decimalPlaces="2" modifyValueOnWheel="false" />
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Job Status" />
            <div class="ui-g-field">
              <p:selectOneMenu id="jbstatus" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.jobStatus.jobStatusCode}"
                               required="${bean.empSearched}" binding="#{jobStatus}">
                <f:selectItem itemDisabled="true" itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems var="jbStatus" value="#{bean.jobStatus}"
                               itemLabel="#{jbStatus.jobStatusCode} - #{jbStatus.description}" itemValue="#{jbStatus.jobStatusCode}" />
              </p:selectOneMenu>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Vacation Hours (YTD)" />
            <div class="ui-g-field">
              <p:inputNumber id="vachours" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                             value="${bean.selectedEmployee.vacationHrsUsedInTheYear}" required="${bean.empSearched}"
                             minValue="-99999.99" maxValue="99999.99" decimalPlaces="2" modifyValueOnWheel="false" />
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Original Date of Hire" />
            <div class="ui-g-field">
              <p:datePicker id="dateofhire" pattern="yyyy MM dd" placeholder="YYYY MM DD" mask="true" showIcon="true" 
                            disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                            value="${bean.selectedEmployee.originalDateHire}" autocomplete="off">
                <f:convertDateTime type="localDate" pattern="yyyy MM dd" />
                <f:validator validatorId="OriginalDateOfHireValidator" />
                <f:attribute name="jobStatus" value="#{jobStatus.value}" />
              </p:datePicker>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Job Title" />
            <div class="ui-g-field">
              <p:inputText id="jobtitle" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY' || bean.jobTitleDisabled}"
                           value="${bean.selectedEmployee.jobTitle}" placeholder="${bean.jobTitleDisabled ? 'Select Class Code' : ''}"
                           required="${bean.empSearched}" maxlength="50">
                <f:validator validatorId="JobTitleValidator" />
                <f:attribute name="jobTitleDisabled" value="#{bean.jobTitleDisabled}" />
              </p:inputText>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Seniority Start Date" />
            <div class="ui-g-field">
              <p:datePicker id="senstartdate" pattern="yyyy MM dd" placeholder="YYYY MM DD" mask="true" showIcon="true" 
                            disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                            value="${bean.selectedEmployee.seniorityStartDate}" required="${bean.empSearched}" autocomplete="off">
                <f:convertDateTime type="localDate" pattern="yyyy MM dd" />
              </p:datePicker>
            </div>
            <div class="clearfix" />
            <p:outputLabel class="ui-g-label #{!bean.empSearched || bean.popupEmpMode == 'READONLY' ? 'readonly' : ''}" for="@next" value="Integrated Position" />
            <div class="ui-g-field">
              <p:selectOneMenu id="intpos" disabled="${!bean.empSearched || bean.popupEmpMode == 'READONLY'}"
                               style="width: 100%;" value="${bean.selectedEmployee.integratedPosition}">
                <f:selectItem itemLabel="Select" itemValue="#{null}" noSelectionOption="true" />
                <f:selectItem itemLabel="I" itemValue="I" noSelectionOption="true" />
                <f:validator validatorId="ClearWarningsValidator" />
              </p:selectOneMenu>
            </div>
          </div>
        </div>
        <div class="clearfix" />
        <div class="padding-left-6-5 margin-bottom-10">
          <p:commandButton id="createemployee" value="Create" disabled="${!bean.empSearched}"
                           action="#{bean.createEmployee}" rendered="#{bean.popupEmpMode == 'CREATE'}"
                           update="employeeMessages entryPayrollTableForm:employeeTable editEmployeeDialogForm entryPayrollTableForm:editButtons"
                           oncomplete="PF('createEmployeeDialog').content.scrollTop('0'); PF('tblEmployee').filter()">
          </p:commandButton>
          <p:commandButton id="createemployeenext" value="Create &amp; Go To Next" disabled="${!bean.empSearched}"
                           action="#{bean.createEmployeeNext}" rendered="#{bean.popupEmpMode == 'CREATE'}"
                           update="employeeMessages entryPayrollTableForm:employeeTable editEmployeeDialogForm entryPayrollTableForm:editButtons"
                           oncomplete="PF('createEmployeeDialog').content.scrollTop('0'); PF('tblEmployee').filter()">
          </p:commandButton>
          <p:commandButton id="updateemployee" value="Update"
                           action="#{bean.updateEmployee}" rendered="#{bean.popupEmpMode == 'EDIT'}"
                           update="employeeMessages entryPayrollTableForm:employeeTable editEmployeeDialogForm"
                           oncomplete="PF('createEmployeeDialog').content.scrollTop('0'); PF('tblEmployee').filter()">
          </p:commandButton>
          <p:commandButton id="updatenextemployee" value="Update &amp; Go to next"
                           action="#{bean.updateNextEmployee}" rendered="#{bean.popupEmpMode == 'EDIT'}"
                           update="employeeMessages entryPayrollTableForm:employeeTable editEmployeeDialogForm"
                           oncomplete="PF('createEmployeeDialog').content.scrollTop('0'); PF('tblEmployee').filter()">
          </p:commandButton>
          <p:commandButton id="deleteemployee" value="Delete" styleClass="danger"
                           onclick="PF('cdEmployee').show()" rendered="#{bean.popupEmpMode == 'EDIT'}"
                           update="employeeDelConfirmForm:confirmtext"
                           immediate="true">
          </p:commandButton>
          <p:commandButton id="cancelemployee" value="Cancel" 
                           immediate="true" styleClass="secondary-button"
                           type="button" title="Cancel Employee Creation"
                           onclick="PF('createEmployeeDialog').hide();">
          </p:commandButton>
        </div>
      </div>
    </h:form>
  </p:dialog>
  <h:form id="employeeDelConfirmForm">
    <p:confirmDialog id="deleteConfirm" global="false" widgetVar="cdEmployee" header="Delete Employee" appendTo="@(body)" width="600px">
      <f:facet name="message">
        <p:outputPanel>
          <h:outputText id="confirmtext" value="#{bean.deleteConfirmationMessage('Employee')}" escape="false" /> 
        </p:outputPanel>
      </f:facet>
      <p:commandButton value="Delete" id="employeeDelConfirmFormDelete"
                       action="#{bean.deleteEmployee}" onclick="PF('cdEmployee').hide();" oncomplete="clearEmployeeFilter();"
                       update="editEmployeeDialogForm:employeeMessages entryPayrollTableForm"
                       styleClass="danger" />
      <p:commandButton value="Cancel" type="button" id="employeeDelConfirmFormCancel"
                       onclick="PF('cdEmployee').hide();"
                       styleClass="ui-confirmdialog-no" />
    </p:confirmDialog>
  </h:form>
</ui:composition>