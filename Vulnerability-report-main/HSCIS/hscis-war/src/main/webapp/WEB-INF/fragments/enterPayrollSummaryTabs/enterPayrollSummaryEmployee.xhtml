<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
  <h:outputScript name="js/enterpayrollsummaryemployee.js" />
  <p:panel id="employeesPanel" rendered="#{bean.pageMode == 'EDIT' || bean.pageMode == 'READONLY'}" styleClass="employee-panel">
    <p:dataTable id="employeeTable" widgetVar="tblEmployee" value="#{bean.summary.employeeSummaries}"
                 var="employee" sortBy="#{employee.lastModified}"
                 selection="#{bean.selectedEmployee}"
                 selectionMode="single" rowKey="#{employee.id}" rows="10"
                 paginator="true" paginatorAlwaysVisible="false" styleClass="datatable-header-paginator-top"
                 paginatorPosition="top"
                 paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {NextPageLink}"
                 currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords}">
      <p:ajax event="rowSelect" listener="#{bean.editEmployee}"
              update="editEmployeeDialogForm employeeDialogHeader"
              oncomplete="PF('createEmployeeDialog').content.scrollTop('0')" />
      <f:facet name="header">
        EMPLOYEES
        <div class="clearfix" />
        <div class="ui-inputgroup employee-filter-input-wrapper">
          <p:inputText id="employeeFilter" styleClass="employee-filter-input"
                       onkeyup="filterEmployeeNumber();"
                       placeholder="Employee Number" />
          <span class="ui-inputgroup-addon filter-input" onclick="focusEmployeeFilter();">
            <em class="pi pi-search" />
          </span>
        </div>
      </f:facet>
      <p:column headerText="EMPLOYEE NUMBER" width="190" id="employeeNumber" filterBy="#{employee.employeeNumber}" filterStyleClass="hide"
                filterMatchMode="contains" sortBy="#{employee.employeeNumber}">
        <h:outputText value="#{employee.employeeNumber}" />
      </p:column>
      <p:column headerText="DESIGNATED GROUP"
                sortBy="#{employee.designatedGroup.designatedGroupCode}">
        <h:outputText value="#{bean.truncateString(employee.designatedGroup.designatedGroupCode += ' - ' += employee.designatedGroup.description, 43)}"
                      title="#{employee.designatedGroup.designatedGroupCode} - #{employee.designatedGroup.description}" />
      </p:column>
      <p:column headerText="CLASSIFICATION CODE"
                sortBy="#{employee.classification.classificationCode}">
        <h:outputText value="#{bean.truncateString(employee.classification.classificationCode += ' - ' += employee.classification.description, 43)}"
                      title="#{employee.classification.classificationCode} - #{employee.classification.description}" />
      </p:column>
      <p:column headerText="REG PAID HRS" width="140"
                sortBy="#{employee.regularPaidHours}">
        <h:outputText value="#{employee.regularPaidHours}" />
      </p:column>
      <p:column headerText="LAST MODIFIED" width="155"
                sortBy="#{employee.lastModified}" sortOrder="desc">
        <h:outputText value="#{employee.lastModified}">
          <f:convertDateTime type="localDateTime" pattern="yyyy-MM-dd HH:mm" />
        </h:outputText>
      </p:column>
    </p:dataTable>
    <div class="margin-bottom-10">
      <p:commandButton id="createemployee" value="Create"
                       immediate="true"
                       update="editEmployeeDialogForm employeeDialogHeader"
                       actionListener="#{bean.openEmployee}"
                       disabled="#{bean.pageMode != 'EDIT'}"
                       title="Create an Employee"
                       oncomplete="PF('createEmployeeDialog').content.scrollTop('0')" />
    </div>
  </p:panel>
  <p:confirmDialog global="true">
    <p:commandButton value="Yes" type="button"
                     styleClass="ui-confirmdialog-yes" />
    <p:commandButton value="No" type="button"
                     styleClass="ui-confirmdialog-no" />
  </p:confirmDialog>
</ui:composition>