<ui:composition template="/WEB-INF/templates/gov30Template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
  <ui:define name="title">
    HNFile Confirmation
  </ui:define> 
  <ui:define name="content">
    <ui:include src="/WEB-INF/fragments/navTabs/adminTabs.xhtml" />
    <h:form id="hnfileConfirmationForm">
      <p:messages id="messages" closable="true">
        <p:autoUpdate />
      </p:messages>
      <div class="search-form ui-g-field">
        <p:outputLabel class="ui-g-label" for="@next" value="Search" />
        <div class="search-bar">
          <p:inputText id="inputSearchString" value="#{HNFileConfirmationView.searchValue}" styleClass="input-field" />
          <p:commandButton value="Search" id="searchButtonGo"
                           styleClass="search search-button" 
                           action="#{HNFileConfirmationView.searchHNFileConfirmationsList}"
                           update="@form"
                           onclick="PF('tblHnfileConfirmation').paginator.setPage(0);" />
        </div>
      </div>
      <p:dataTable id="hnfileConfirmationTable" widgetVar="tblHnfileConfirmation"
                   value="#{HNFileConfirmationView.confirmations}"
                   sortBy="#{rows.payfilId}"
                   selectionMode="single"
                   selection="#{HNFileConfirmationView.selectedUpload}"
                   var="rows" rowKey="#{rows.payfilId}"
                   rows="10" paginator="true" paginatorAlwaysVisible="false"
                   paginatorPosition="top"
                   paginatorTemplate="{CurrentPageReport} {PreviousPageLink} {NextPageLink}"
                   currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords}">
        <p:ajax event="rowSelect" listener="#{HNFileConfirmationView.onRowSelect}" update="@form:uploadSelectedView" oncomplete="PF('cdViewUpload').show()" />
        <p:column headerText="PAY FILE ID" width="120" sortBy="#{rows.payfilId}" sortOrder="desc">
          <h:outputText value="#{rows.payfilId}" />
        </p:column>
        <p:column headerText="CORP #" width="90" sortBy="#{rows.corporateEmployerNumber}">
          <h:outputText value="#{rows.corporateEmployerNumber}" />
        </p:column>
        <p:column headerText="LEGAL NAME" sortBy="#{rows.legalName}">
          <h:outputText value="#{HNFileConfirmationView.truncateString(rows.legalName, 26)}" title="#{rows.legalName}" />
        </p:column>
        <p:column headerText="SUBMIT DATE" width="140" sortBy="#{rows.dateCreated}">
          <h:outputText value="#{HNFileConfirmationView.convertDateToDisplay(rows.dateCreated)}" />
        </p:column>
        <p:column headerText="REPORTING FROM" width="175" sortBy="#{rows.reportingFromDate}">
          <h:outputText value="#{HNFileConfirmationView.convertDateToDisplay(rows.reportingFromDate)}" />
        </p:column>
        <p:column headerText="REPORTING TO" width="150" sortBy="#{rows.reportingToDate}">
          <h:outputText value="#{HNFileConfirmationView.convertDateToDisplay(rows.reportingToDate)}" />
        </p:column>
        <p:column headerText="TEMP2LOAD" width="130" sortBy="#{rows.loadedTemp}">
          <h:outputText value="#{rows.loadedTemp}" />
        </p:column>
        <p:column headerText="LOAD2PAYROLL" width="155" sortBy="#{rows.copyLoadToPayroll}">
          <h:outputText value="#{rows.copyLoadToPayroll}" />
        </p:column>
      </p:dataTable>
      <p:confirmDialog id="uploadSelectedView" global="false" widgetVar="cdViewUpload" header="View Upload Details" appendTo="@(body)" width="650px">
        <f:facet name="message">
          <p:panelGrid columns="2" styleClass="ui-noborder">
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Pay File ID" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.payfilId}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Corp Employer #" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.corporateEmployerNumber}" />
            </p:outputPanel>
          </p:panelGrid>
          <p:panelGrid columns="1" styleClass="ui-noborder" style="width: 574px">
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Legal Name" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.legalName}" style="pointer-events: all" title="#{HNFileConfirmationView.legalName}" />
            </p:outputPanel>
          </p:panelGrid>
          <p:panelGrid columns="2" styleClass="ui-noborder">
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Submit Date" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.dateCreated}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="File Name" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.fileName}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Extract Date" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.extractDate}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Reporting From" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.reportingFromDate}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Reporting To" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.reportingToDate}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Temp to Load" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.copyTempToLoad}" />
            </p:outputPanel>
            <p:outputPanel>
              <p:outputLabel class="ui-g-label readonly" for="@next" value="Load to Payroll" />
              <p:inputText disabled="true" value="#{HNFileConfirmationView.copyLoadToPayroll}" />
            </p:outputPanel>
            <p:outputPanel />
            <p:outputPanel>
              <p:commandButton value="Delete"
                               oncomplete="PF('cdDeleteUpload').show()"
                               styleClass="danger" />
              <p:commandButton value="Cancel" type="button"
                               onclick="PF('cdViewUpload').hide();"
                               styleClass="ui-confirmdialog-no"
                               immediate="true" />
            </p:outputPanel>
          </p:panelGrid>
        </f:facet>
      </p:confirmDialog>
      <p:confirmDialog id="deleteConfirmation" global="false" widgetVar="cdDeleteUpload" header="Confirm Delete" appendTo="@(body)" width="650px">
        <f:facet name="message">
          <p:outputPanel>
            <h:outputText id="confirmtext" value="Are you sure you want to delete?" escape="false" /> 
          </p:outputPanel>
        </f:facet>
        <p:commandButton value="Delete"
                         oncomplete="PF('cdViewUpload').hide(); PF('cdDeleteUpload').hide()"
                         action="#{HNFileConfirmationView.deleteConfirmationRow()}"
                         update="@widgetVar(tblHnfileConfirmation)"
                         styleClass="danger" />
        <p:commandButton value="Cancel" type="button"
                         onclick="PF('cdDeleteUpload').hide();"
                         styleClass="ui-confirmdialog-no"
                         immediate="true" />
      </p:confirmDialog>
    </h:form>
  </ui:define>
</ui:composition>

