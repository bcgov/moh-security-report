package ca.bc.gov.health.hscis.converters;

import ca.bc.gov.health.hscis.entity.HcdMembership;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import jakarta.faces.component.UIComponent;
import jakarta.faces.context.FacesContext;
import jakarta.faces.convert.Converter;
import jakarta.faces.convert.FacesConverter;
import jakarta.inject.Inject;

/**
 * The Class MembershipConverter.
 *
 * @author CGI Information Management Consultants Inc.
 */
@FacesConverter(value = "membershipConverter", managed = true)
public class MembershipConverter implements Converter {

  @Inject private HscisAdminService adminService;

  /**
   * @see jakarta.faces.convert.Converter#getAsObject(jakarta.faces.context.FacesContext,
   *     jakarta.faces.component.UIComponent, java.lang.String)
   * @param context
   * @param component
   * @param value
   * @return converted object
   */
  @Override
  public Object getAsObject(FacesContext context, UIComponent component, String value) {

    Object retValue = "";

    if (value != null && !value.isBlank()) {
      retValue = adminService.findMembershipByHscisId(Long.parseLong(value));
    }
    return retValue;
  }

  /**
   * @see jakarta.faces.convert.Converter#getAsString(jakarta.faces.context.FacesContext,
   *     jakarta.faces.component.UIComponent, java.lang.Object)
   * @param context
   * @param component
   * @param value
   * @return converted string
   */
  @Override
  public String getAsString(FacesContext context, UIComponent component, Object value) {

    String retValue = "";

    if (value instanceof HcdMembership) {
      retValue = ((HcdMembership) value).getHscisId().toString();
    }
    return retValue;
  }
}
