package ca.bc.gov.health.hscis.view.admin;

import ca.bc.gov.health.hscis.entity.HcdAnnouncements;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("AnnouncementsView")
public class AnnouncementsView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(AnnouncementsView.class);

  @EJB private HscisAdminService adminService;

  private HcdAnnouncements announcement;

  public void publishAnnouncement() {
    FacesMessage message = adminService.publishAnnouncement(announcement);
    addMessage(message);
  }

  @PostConstruct
  public void init() {
    announcement = adminService.findAnnouncement();
  }

  public HcdAnnouncements getAnnouncement() {
    return announcement;
  }

  public void setAnnouncement(HcdAnnouncements announcement) {
    this.announcement = announcement;
  }
}
