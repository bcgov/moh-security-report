package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdMembershipType;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.ApplicationBean;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Inject;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("MembershipTypeView")
public class MembershipTypeView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static final Logger logger = LoggerFactory.getLogger(MembershipTypeView.class);

  @EJB private HscisAdminService adminService;
  @Inject private ApplicationBean applicationBean;

  private List<HcdMembershipType> membershipTypes;

  private HcdMembershipType selectedMembershipType;
  private HcdMembershipType newMembershipType;

  @PostConstruct
  public void init() {
    refreshMembershipTypesList();
  }

  public void refreshMembershipTypesList() {
    applicationBean.initMembershipTypes();
    membershipTypes = applicationBean.getMembershipTypes();
  }

  public void createEmptyMembershipTypeRow() {
    newMembershipType = new HcdMembershipType();
  }

  /** @Update the viewed row */
  public void updateMembershipTypeRow() {
    FacesMessage message = adminService.updateMembershipTypeRow(selectedMembershipType);
    addMessage(message);
    refreshMembershipTypesList();
  }

  /** @Create the new Membership Type */
  public void createMembershipTypeRow() {
    FacesMessage message = adminService.createMembershipTypeRow(newMembershipType);
    addMessage(message);
    refreshMembershipTypesList();
  }

  public List<HcdMembershipType> getMembershipTypes() {
    return membershipTypes;
  }

  public void setMembershipTypes(List<HcdMembershipType> membershipTypes) {
    this.membershipTypes = membershipTypes;
  }

  public HcdMembershipType getSelectedMembershipType() {
    return selectedMembershipType;
  }

  public void setSelectedMembershipType(HcdMembershipType selectedMembershipType) {
    this.selectedMembershipType = selectedMembershipType;
  }

  public HcdMembershipType getNewMembershipType() {
    return newMembershipType;
  }

  public void setNewMembershipType(HcdMembershipType newMembershipType) {
    this.newMembershipType = newMembershipType;
  }
}
