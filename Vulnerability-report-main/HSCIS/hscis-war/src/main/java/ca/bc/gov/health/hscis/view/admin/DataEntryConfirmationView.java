package ca.bc.gov.health.hscis.view.admin;

import ca.bc.gov.health.hscis.entity.HcdPeriodConfirmation;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("DataEntryConfirmationView")
public class DataEntryConfirmationView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(DataEntryConfirmationView.class);

  @EJB private HscisAdminService adminService;

  private List<HcdPeriodConfirmation> selectedUploads;
  private List<HcdPeriodConfirmation> confirmations;
  private String searchValue;
  private HcdPeriodConfirmation selectedUpload;

  private Long hscisid;
  private Long corporateEmployerNumber;
  private Long siteEmployerNumber;
  private String reportingFrom;
  private String reportingTo;
  private String completeDate;
  private String createdBy;
  private String createdOn;
  private String lastModifiedBy;
  private String lastModifiedOn;
  private String legalName;

  @PostConstruct
  public void init() {
    searchValue = "";
    confirmations = adminService.refreshDataEntryConfirmationsList();
  }

  public void listUploadsConfirmationsRefresh() {
    confirmations = adminService.refreshDataEntryConfirmationsList();
  }

  public void searchDataEntryConfirmation() {
    confirmations = adminService.searchDataEntryConfirmationsList(searchValue);
  }

  public void onRowSelect() {

    if ((selectedUpload.getCreatedOn() == null)) {
      createdOn = "";
    } else {
      createdOn = convertDateToDisplay(selectedUpload.getCreatedOn().toString());
    }
    corporateEmployerNumber = selectedUpload.getId().getCorporateEmployerNumber();
    siteEmployerNumber = selectedUpload.getId().getSiteEmployerNumber();
    if (selectedUpload.getMembership() != null) {
      legalName = selectedUpload.getMembership().getLegalName();
    }
    reportingTo = convertDateToDisplay(selectedUpload.getId().getReportingTo().toString());
    reportingFrom = convertDateToDisplay(selectedUpload.getId().getReportingFrom().toString());
  }

  public void deleteConfirmationRow() {
    FacesMessage message = adminService.deleteDataEntryConfirmation(selectedUpload);
    addMessage(message);
    searchDataEntryConfirmation();
  }

  /** @return the selectedUploads */
  public List<HcdPeriodConfirmation> getSelectedUploads() {
    return selectedUploads;
  }

  /** @param selectedUploads the selectedUploads to set */
  public void setSelectedUploads(List<HcdPeriodConfirmation> selectedUploads) {
    this.selectedUploads = selectedUploads;
  }

  /** @return the confirmations */
  public List<HcdPeriodConfirmation> getConfirmations() {
    return confirmations;
  }

  /** @param confirmations the confirmations to set */
  public void setConfirmations(List<HcdPeriodConfirmation> confirmations) {
    this.confirmations = confirmations;
  }

  /** @return the searchValue */
  public String getSearchValue() {
    return searchValue;
  }

  /** @param searchValue the searchValue to set */
  public void setSearchValue(String searchValue) {
    this.searchValue = searchValue;
  }

  /** @return the selectedUpload */
  public HcdPeriodConfirmation getSelectedUpload() {
    return selectedUpload;
  }

  /** @param selectedUpload the selectedUpload to set */
  public void setSelectedUpload(HcdPeriodConfirmation selectedUpload) {
    this.selectedUpload = selectedUpload;
  }

  /** @return the hscisid */
  public Long getHscisid() {
    return hscisid;
  }

  /** @param hscisid the hscisid to set */
  public void setHscisid(Long hscisid) {
    this.hscisid = hscisid;
  }

  /** @return the corporateEmployerNumber */
  public Long getCorporateEmployerNumber() {
    return corporateEmployerNumber;
  }

  /** @param corporateEmployerNumber the corporateEmployerNumber to set */
  public void setCorporateEmployerNumber(Long corporateEmployerNumber) {
    this.corporateEmployerNumber = corporateEmployerNumber;
  }

  /** @return the siteEmployerNumber */
  public Long getSiteEmployerNumber() {
    return siteEmployerNumber;
  }

  /** @param siteEmployerNumber the siteEmployerNumber to set */
  public void setSiteEmployerNumber(Long siteEmployerNumber) {
    this.siteEmployerNumber = siteEmployerNumber;
  }

  /** @return the reportingFrom */
  public String getReportingFrom() {
    return reportingFrom;
  }

  /** @param reportingFrom the reportingFrom to set */
  public void setReportingFrom(String reportingFrom) {
    this.reportingFrom = reportingFrom;
  }

  /** @return the reportingTo */
  public String getReportingTo() {
    return reportingTo;
  }

  /** @param reportingTo the reportingTo to set */
  public void setReportingTo(String reportingTo) {
    this.reportingTo = reportingTo;
  }

  /** @return the completeDate */
  public String getCompleteDate() {
    return completeDate;
  }

  /** @param completeDate the completeDate to set */
  public void setCompleteDate(String completeDate) {
    this.completeDate = completeDate;
  }

  /** @return the createdBy */
  public String getCreatedBy() {
    return createdBy;
  }

  /** @param createdBy the createdBy to set */
  public void setCreatedBy(String createdBy) {
    this.createdBy = createdBy;
  }

  /** @return the createdOn */
  public String getCreatedOn() {
    return createdOn;
  }

  /** @param createdOn the createdOn to set */
  public void setCreatedOn(String createdOn) {
    this.createdOn = createdOn;
  }

  /** @return the lastModifiedBy */
  public String getLastModifiedBy() {
    return lastModifiedBy;
  }

  /** @param lastModifiedBy the lastModifiedBy to set */
  public void setLastModifiedBy(String lastModifiedBy) {
    this.lastModifiedBy = lastModifiedBy;
  }

  /** @return the lastModifiedOn */
  public String getLastModifiedOn() {
    return lastModifiedOn;
  }

  /** @param lastModifiedOn the lastModifiedOn to set */
  public void setLastModifiedOn(String lastModifiedOn) {
    this.lastModifiedOn = lastModifiedOn;
  }

  /** @return the legalName */
  public String getLegalName() {
    return legalName;
  }

  /** @param legalName the legalName to set */
  public void setLegalName(String legalName) {
    this.legalName = legalName;
  }
}
