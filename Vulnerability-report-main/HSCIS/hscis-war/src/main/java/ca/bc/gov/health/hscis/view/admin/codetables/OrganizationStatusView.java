package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdOrganizationStatus;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.ApplicationBean;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Inject;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("OrganizationStatusView")
public class OrganizationStatusView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(OrganizationStatusView.class);

  @EJB private HscisAdminService adminService;
  @Inject private ApplicationBean applicationBean;

  private List<HcdOrganizationStatus> organizationStatus;
  private HcdOrganizationStatus selectedOrganizationStatus;
  private HcdOrganizationStatus newOrganizationStatus;

  @PostConstruct
  public void init() {
    refreshOrganizationStatusList();
  }

  public void refreshOrganizationStatusList() {
    applicationBean.initOrganizationStatusCodes();
    organizationStatus = applicationBean.getOrganizationStatusCodes();
  }

  public void createEmptyOrganizationStatusRow() {
    newOrganizationStatus = new HcdOrganizationStatus();
  }

  /** @Update the viewed row */
  public void updateOrganizationStatusRow() {
    FacesMessage message = adminService.updateOrganizationStatusRow(selectedOrganizationStatus);
    addMessage(message);
    refreshOrganizationStatusList();
  }

  /** @Create the new Organization Status */
  public void createOrganizationStatusRow() {
    FacesMessage message = adminService.createOrganizationStatusRow(newOrganizationStatus);
    addMessage(message);
    refreshOrganizationStatusList();
  }

  public List<HcdOrganizationStatus> getOrganizationStatus() {
    return organizationStatus;
  }

  public void setOrganizationStatus(List<HcdOrganizationStatus> organizationStatus) {
    this.organizationStatus = organizationStatus;
  }

  public HcdOrganizationStatus getSelectedOrganizationStatus() {
    return selectedOrganizationStatus;
  }

  public void setSelectedOrganizationStatus(HcdOrganizationStatus selectedOrganizationStatus) {
    this.selectedOrganizationStatus = selectedOrganizationStatus;
  }

  public HcdOrganizationStatus getNewOrganizationStatus() {
    return newOrganizationStatus;
  }

  public void setNewOrganizationStatus(HcdOrganizationStatus newOrganizationStatus) {
    this.newOrganizationStatus = newOrganizationStatus;
  }
}
