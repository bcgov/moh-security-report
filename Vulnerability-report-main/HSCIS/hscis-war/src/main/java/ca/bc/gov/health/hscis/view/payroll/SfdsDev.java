package ca.bc.gov.health.hscis.view.payroll;

import ca.bc.gov.health.hscis.dto.SubmissionReport;
import ca.bc.gov.health.hscis.exception.HscisException;
import ca.bc.gov.health.hscis.service.HscisFileSubmissionService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.ejb.EJB;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.io.Serializable;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Named("SfdsDev")
@ViewScoped
public class SfdsDev extends BaseView implements Serializable {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(HscisFileSubmissionService.class);

  @EJB private HscisFileSubmissionService sfdsService;

  public void testSftp() {
    try {
      String testMailbox = "ala";
      @SuppressWarnings("unused")
      List<SubmissionReport> fileList = sfdsService.listValidationReports(testMailbox);
      addInfoMessage("Connected and disconnected successfuly.");
    } catch (HscisException ex) {
      addMessage(ex, false);
      logger.error(ex.getMessage());
    }
  }
}
