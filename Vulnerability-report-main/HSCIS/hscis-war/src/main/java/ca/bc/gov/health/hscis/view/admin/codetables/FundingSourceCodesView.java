package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdFundingSources;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.ApplicationBean;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Inject;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("FundingSourceCodesView")
public class FundingSourceCodesView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(OrganizationStatusView.class);

  @EJB private HscisAdminService adminService;
  @Inject private ApplicationBean applicationBean;

  private List<HcdFundingSources> fundingSourceCodes;
  private HcdFundingSources selectedFundingSourceCode;
  private HcdFundingSources newFundingSourceCode;

  @PostConstruct
  public void init() {
    refreshFundingSourceCodesList();
  }

  public void refreshFundingSourceCodesList() {
    applicationBean.initFundingSourceCodes();
    fundingSourceCodes = applicationBean.getFundingSourceCodes();
  }

  public void createEmptyFundingSourceCodeRow() {
    newFundingSourceCode = new HcdFundingSources();
  }

  /** @Update the viewed row */
  public void updateFundingSourceCodeRow() {
    FacesMessage message = adminService.updateFundingSourceCodeRow(selectedFundingSourceCode);
    addMessage(message);
    refreshFundingSourceCodesList();
  }

  /** @Create the new Funding Source Code */
  public void createFundingSourceCodeRow() {
    FacesMessage message = adminService.createFundingSourceCodeRow(newFundingSourceCode);
    addMessage(message);
    refreshFundingSourceCodesList();
  }

  public List<HcdFundingSources> getFundingSourceCodes() {
    return fundingSourceCodes;
  }

  public void setFundingSourceCodes(List<HcdFundingSources> fundingSourceCodes) {
    this.fundingSourceCodes = fundingSourceCodes;
  }

  public HcdFundingSources getSelectedFundingSourceCode() {
    return selectedFundingSourceCode;
  }

  public void setSelectedFundingSourceCode(HcdFundingSources selectedFundingSourceCode) {
    this.selectedFundingSourceCode = selectedFundingSourceCode;
  }

  public HcdFundingSources getNewFundingSourceCode() {
    return newFundingSourceCode;
  }

  public void setNewFundingSourceCode(HcdFundingSources newFundingSourceCode) {
    this.newFundingSourceCode = newFundingSourceCode;
  }
}
