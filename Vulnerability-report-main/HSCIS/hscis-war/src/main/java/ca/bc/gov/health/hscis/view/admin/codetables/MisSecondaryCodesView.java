package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdMisSecStatAccnts;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("MisSecondaryCodesView")
public class MisSecondaryCodesView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static final Logger logger = LoggerFactory.getLogger(MisSecondaryCodesView.class);

  @EJB private HscisAdminService adminService;

  private List<HcdMisSecStatAccnts> misSecondaryCodes;
  private String searchValue;
  private HcdMisSecStatAccnts selectedMisSecondaryCode;
  private HcdMisSecStatAccnts newMisSecondaryCode;

  @PostConstruct
  public void init() {
    searchValue = "";
    refreshMisSecondaryCodes();
  }

  public void refreshMisSecondaryCodes() {
    misSecondaryCodes = adminService.refreshMisSecondaryCodesList();
  }

  public void searchMisSecondaryCodes() {
    misSecondaryCodes = adminService.searchMisSecondaryCodesList(searchValue);
  }

  public void createEmptyMisSecondaryCodeRow() {
    newMisSecondaryCode = new HcdMisSecStatAccnts();
  }

  /** @Update the viewed row */
  public void updateMisSecondaryCodeRow() {
    FacesMessage message = adminService.updateMisSecondaryCodeRow(selectedMisSecondaryCode);
    addMessage(message);
    searchMisSecondaryCodes();
  }

  /** @Create the new MIS Secondary Code */
  public void createMisSecondaryCodeRow() {
    FacesMessage message = adminService.createMisSecondaryCodeRow(newMisSecondaryCode);
    addMessage(message);
    refreshMisSecondaryCodes();
  }

  /** @return the searchValue */
  public String getSearchValue() {
    return searchValue;
  }

  /** @param searchValue the searchValue to set */
  public void setSearchValue(String searchValue) {
    this.searchValue = searchValue;
  }

  public HcdMisSecStatAccnts getSelectedMisSecondaryCode() {
    return selectedMisSecondaryCode;
  }

  public void setSelectedMisSecondaryCode(HcdMisSecStatAccnts selectedMisSecondaryCode) {
    this.selectedMisSecondaryCode = selectedMisSecondaryCode;
  }

  public HcdMisSecStatAccnts getNewMisSecondaryCode() {
    return newMisSecondaryCode;
  }

  public void setNewMisSecondaryCode(HcdMisSecStatAccnts newMisSecondaryCode) {
    this.newMisSecondaryCode = newMisSecondaryCode;
  }

  public List<HcdMisSecStatAccnts> getMisSecondaryCodes() {
    return misSecondaryCodes;
  }

  public void setMisSecondaryCodes(List<HcdMisSecStatAccnts> misSecondaryCodes) {
    this.misSecondaryCodes = misSecondaryCodes;
  }
}
