package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdJobStatus;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("JobStatusView")
public class JobStatusView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(JobStatusView.class);

  @EJB private HscisAdminService adminService;

  private List<HcdJobStatus> jobStatuses;
  private HcdJobStatus selectedJobStatus;
  private HcdJobStatus newJobStatus;

  @PostConstruct
  public void init() {
    refreshJobStatusList();
  }

  public void refreshJobStatusList() {
    jobStatuses = adminService.refreshJobStatusList();
  }

  public void createEmptyJobStatusRow() {
    newJobStatus = new HcdJobStatus();
  }

  /** @Update the viewed row */
  public void updateJobStatusRow() {
    FacesMessage message = adminService.updateJobStatusRow(selectedJobStatus);
    addMessage(message);
    refreshJobStatusList();
  }

  /** @Create the new Job Status */
  public void createJobStatusRow() {
    FacesMessage message = adminService.createJobStatusRow(newJobStatus);
    addMessage(message);
    refreshJobStatusList();
  }

  public List<HcdJobStatus> getJobStatuses() {
    return jobStatuses;
  }

  public void setJobStatuses(List<HcdJobStatus> jobStatuses) {
    this.jobStatuses = jobStatuses;
  }

  public HcdJobStatus getSelectedJobStatus() {
    return selectedJobStatus;
  }

  public void setSelectedJobStatus(HcdJobStatus selectedJobStatus) {
    this.selectedJobStatus = selectedJobStatus;
  }

  public HcdJobStatus getNewJobStatus() {
    return newJobStatus;
  }

  public void setNewJobStatus(HcdJobStatus newJobStatus) {
    this.newJobStatus = newJobStatus;
  }
}
