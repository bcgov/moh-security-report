package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdTerminationCode;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("TerminationCodesView")
public class TerminationCodesView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static Logger logger = LoggerFactory.getLogger(OrganizationStatusView.class);

  @EJB private HscisAdminService adminService;

  private List<HcdTerminationCode> terminationCodes;
  private HcdTerminationCode selectedTerminationCode;
  private HcdTerminationCode newTerminationCode;

  @PostConstruct
  public void init() {
    refreshTerminationCodesList();
  }

  public void refreshTerminationCodesList() {
    terminationCodes = adminService.refreshTerminationCodesList();
  }

  public void createEmptyTerminationCodeRow() {
    newTerminationCode = new HcdTerminationCode();
  }

  /** @Update the viewed row */
  public void updateTerminationCodeRow() {
    FacesMessage message = adminService.updateTerminationCodeRow(selectedTerminationCode);
    addMessage(message);
    refreshTerminationCodesList();
  }

  /** @Create the new Termination Code */
  public void createTerminationCodeRow() {
    FacesMessage message = adminService.createTerminationCodeRow(newTerminationCode);
    addMessage(message);
    refreshTerminationCodesList();
  }

  public List<HcdTerminationCode> getTerminationCodes() {
    return terminationCodes;
  }

  public void setTerminationCodes(List<HcdTerminationCode> terminationCodes) {
    this.terminationCodes = terminationCodes;
  }

  public HcdTerminationCode getSelectedTerminationCode() {
    return selectedTerminationCode;
  }

  public void setSelectedTerminationCode(HcdTerminationCode selectedTerminationCode) {
    this.selectedTerminationCode = selectedTerminationCode;
  }

  public HcdTerminationCode getNewTerminationCode() {
    return newTerminationCode;
  }

  public void setNewTerminationCode(HcdTerminationCode newTerminationCode) {
    this.newTerminationCode = newTerminationCode;
  }
}
