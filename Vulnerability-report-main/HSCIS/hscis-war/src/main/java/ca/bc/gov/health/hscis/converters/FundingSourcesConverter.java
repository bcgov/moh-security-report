package ca.bc.gov.health.hscis.converters;

import ca.bc.gov.health.hscis.entity.HcdFundingSources;
import ca.bc.gov.health.hscis.service.HscisFundingSourcesService;
import jakarta.faces.component.UIComponent;
import jakarta.faces.context.FacesContext;
import jakarta.faces.convert.Converter;
import jakarta.faces.convert.FacesConverter;
import jakarta.inject.Inject;

/**
 * The Class FundingSourcesConverter.
 *
 * @author CGI Information Management Consultants Inc.
 */
@FacesConverter(value = "fundingSourcesConverter", managed = true)
public class FundingSourcesConverter implements Converter {

  @Inject private HscisFundingSourcesService fundingSourcesService;

  /**
   * @see jakarta.faces.convert.Converter#getAsObject(jakarta.faces.context.FacesContext,
   *     jakarta.faces.component.UIComponent, java.lang.String)
   * @param context
   * @param component
   * @param value
   * @return converted object
   */
  @Override
  public Object getAsObject(FacesContext context, UIComponent component, String value) {

    Object retValue = "";

    if (value != null && !value.isBlank()) {
      retValue = fundingSourcesService.findFundingSourceById(value);
    }
    return retValue;
  }

  /**
   * @see jakarta.faces.convert.Converter#getAsString(jakarta.faces.context.FacesContext,
   *     jakarta.faces.component.UIComponent, java.lang.Object)
   * @param context
   * @param component
   * @param value
   * @return converted string
   */
  @Override
  public String getAsString(FacesContext context, UIComponent component, Object value) {

    String retValue = "";

    if (value instanceof HcdFundingSources) {
      retValue = ((HcdFundingSources) value).getFundingSourceCode();
    }
    return retValue;
  }
}
