package ca.bc.gov.health.hscis.view.admin.codetables;

import ca.bc.gov.health.hscis.entity.HcdMisFuncCentAccnts;
import ca.bc.gov.health.hscis.service.HscisAdminService;
import ca.bc.gov.health.hscis.view.BaseView;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.EJB;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.view.ViewScoped;
import jakarta.inject.Named;
import java.util.List;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ViewScoped
@Named("MisFunctionalCodesView")
public class MisFunctionalCodesView extends BaseView {

  private static final long serialVersionUID = 1L;

  private static final Logger logger = LoggerFactory.getLogger(MisFunctionalCodesView.class);

  @EJB private HscisAdminService adminService;

  private List<HcdMisFuncCentAccnts> misFunctionalCodes;
  private String searchValue;
  private HcdMisFuncCentAccnts selectedMisFunctionalCode;
  private HcdMisFuncCentAccnts newMisFunctionalCode;

  @PostConstruct
  public void init() {
    refreshMisFunctionalCodes();
  }

  public void refreshMisFunctionalCodes() {
    misFunctionalCodes = adminService.refreshMisFunctionalCodesList();
  }

  public void searchMisFunctionalCodes() {
    misFunctionalCodes = adminService.searchMisFunctionalCodesList(searchValue);
  }

  public void createEmptyMisFunctionalCodeRow() {
    newMisFunctionalCode = new HcdMisFuncCentAccnts();
  }

  /** @Update the viewed row */
  public void updateMisFunctionalCodeRow() {
    FacesMessage message = adminService.updateMisFunctionalCodeRow(selectedMisFunctionalCode);
    addMessage(message);
    refreshMisFunctionalCodes();
  }

  /** @Create the new MIS Functional Code */
  public void createMisFunctionalCodeRow() {
    FacesMessage message = adminService.createMisFunctionalCodeRow(newMisFunctionalCode);
    addMessage(message);
    refreshMisFunctionalCodes();
  }

  /** @return the searchValue */
  public String getSearchValue() {
    return searchValue;
  }

  /** @param searchValue the searchValue to set */
  public void setSearchValue(String searchValue) {
    this.searchValue = searchValue;
  }

  public HcdMisFuncCentAccnts getSelectedMisFunctionalCode() {
    return selectedMisFunctionalCode;
  }

  public void setSelectedMisFunctionalCode(HcdMisFuncCentAccnts selectedMisFunctionalCode) {
    this.selectedMisFunctionalCode = selectedMisFunctionalCode;
  }

  public HcdMisFuncCentAccnts getNewMisFunctionalCode() {
    return newMisFunctionalCode;
  }

  public void setNewMisFunctionalCode(HcdMisFuncCentAccnts newMisFunctionalCode) {
    this.newMisFunctionalCode = newMisFunctionalCode;
  }

  public List<HcdMisFuncCentAccnts> getMisFunctionalCodes() {
    return misFunctionalCodes;
  }

  public void setMisFunctionalCodes(List<HcdMisFuncCentAccnts> misFunctionalCodes) {
    this.misFunctionalCodes = misFunctionalCodes;
  }
}
