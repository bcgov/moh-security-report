/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.pcbl.session;

import ca.bc.gov.health.pcbl.entity.PharmDataUpdate;
import jakarta.ejb.Stateless;
import jakarta.persistence.EntityManager;
import jakarta.persistence.PersistenceContext;

/**
 *
 * @author ian.scott
 */
@Stateless
public class PharmDataUpdateFacade implements PharmDataUpdateFacadeLocal{
      @PersistenceContext(unitName="PCBL-ejbPU")
    private EntityManager em;

      @Override
    public void create(PharmDataUpdate update) {
         em.persist(update);
    }

      @Override
    public void edit(PharmDataUpdate update) {
         em.merge(update);
    }

      @Override
    public void remove(PharmDataUpdate update) {
         em.remove(update);
    }

    //public HealthIdeasUpdate find(Object id) {
    //     return em.find(ca.bc.gov.health.pcbl.entity.HealthIdeasUpdate.class, id);
   // }

      @Override
    public PharmDataUpdate getMostRecentRecord() {
       return (PharmDataUpdate) em.createQuery("select object(o) from PharmDataUpdate as o where o.id=(select max(sub.id) from PharmDataUpdate  as sub)").getSingleResult();
        //return qq;
         // List<PharmDataUpdate> qq = em.createQuery("select object(o) from PharmDataUpdate as o").getResultList();
         // PharmDataUpdate qq32 = qq.get(0);
         // return qq32;
    }
}
