/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.pcbl.entity;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.Table;
import jakarta.persistence.Temporal;
import jakarta.persistence.TemporalType;
import java.io.Serializable;
import java.math.BigDecimal;
import java.util.Date;

/**
 *
 * @author greg.perkins
 */
@Entity
@Table(name = "PCBL_BEN_DTL")
public class BenDtl implements Serializable {

    private static final int RDP_NOT_A_PRICE = 9999;
    @Id
    @Column(name = "ID")
    private Long id;
    @Column(name = "DIN_PIN")
    private String dinPin;
    @Column(name = "EFF_DATE")
    @Temporal(jakarta.persistence.TemporalType.DATE)
    private Date effDate;
    @Column(name = "END_DATE")
    @Temporal(jakarta.persistence.TemporalType.DATE)
    private Date endDate;
    @Column(name = "PCARE_PLAN_CD")
    private String pcarePlanCd;
    @Column(name = "PCARE_PLAN")
    private String pcarePlan;
    @Column(name = "LCA_EXEMPT")
    private String lcaExempt;
    @Column(name = "MAX_DAYS_SPLY")
    private String maxDaysSply;
    @Column(name = "DTL_PLAN_SPEC_AUTHY_ELIG_FLG")
    private String dtlPlanSpecAuthyEligFlg;
    @Column(name = "MAX_PRICE")
    private Double maxPrice;
    @Column(name = "LCA_PRICE")
    private Double lcaPrice;
    @Column(name = "RDP_PRICE")
    private Double rdpPrice;
    @Column(name = "RDP_UNITS")
    private String rdpUnits;
    @Column(name = "PAY_LCA_FLG")
    private String payLcaFlg;
    @Column(name = "AMT_PCARE_PAYS_PER_UNIT")
    private Double amtPcarePaysPerUnit;
    @Column(name = "AMT_PCARE_PAYS_UNIT")
    private String amtPcarePaysUnit;
    @Column(name = "AHFS_1_CD")
    private String ahfs1Cd;
    @Column(name = "AHFS_1")
    private String ahfs1;
    @Column(name = "AHFS_2_CD")
    private String ahfs2Cd;
    @Column(name = "AHFS_2_CD_FMTD")
    private String ahfs2CdFmtd;
    @Column(name = "AHFS_2")
    private String ahfs2;
    @Column(name = "AHFS_3_CD")
    private String ahfs3Cd;
    @Column(name = "AHFS_3_CD_FMTD")
    private String ahfs3CdFmtd;
    @Column(name = "AHFS_3")
    private String ahfs3;
    @Column(name = "ATC_1_CD")
    private String atc1Cd;
    @Column(name = "ATC_1")
    private String atc1;
    @Column(name = "ATC_2_CD")
    private String atc2Cd;
    @Column(name = "ATC_2")
    private String atc2;
    @Column(name = "ATC_3_CD")
    private String atc3Cd;
    @Column(name = "ATC_3")
    private String atc3;
    @Column(name = "ATC_4_CD")
    private String atc4Cd;
    @Column(name = "ATC_4")
    private String atc4;
    @Column(name = "ATC_5_CD")
    private String atc5Cd;
    @Column(name = "ATC_5")
    private String atc5;
    @Column(name = "DRUG_BRAND_NM")
    private String drugBrandNm;
    @Column(name = "GEN_DRUG")
    private String genDrug;
    @Column(name = "GEN_DSG_FORM")
    private String genDsgForm;
    @Column(name = "GEN_DRUG_STRGTH")
    private String genDrugStrgth;
    @Temporal(TemporalType.DATE)
    @Column(name = "FORMULARY_LST_DATE")
    private Date formularyLstDate;
    @Column(name = "DRUG_MFR_NM")
    private String drugMfrNm;
    @Column(name = "DRUG_MFR_CD")
    private String drugMfrCd;
    @Column(name = "LTD_USE_FLG")
    private String ltdUseFlg;
    @Column(name = "DSG_FORM")
    private String dsgForm;
    @Column(name = "GEN_DRUG_INDEX")
    private String genDrugIndex;
    @Column(name = "PAY_RDP_FLG")
    private String payRdpFlg;
    @Column(name = "MAX_DAILY_QTY")
    private BigDecimal maxDailyQty;
    @Column(name = "MAX_PRD_QTY")
    private BigDecimal maxPrdQty;
    @Column(name = "MAX_PRD_QTY_DAYS")
    private Long maxPrdQtyDays;
    @Column(name = "MAX_ANNUAL_QTY")
    private BigDecimal maxAnnualQty;
    @Column(name = "BGTS_CAT_MAX_ANNUAL_QTY")
    private BigDecimal bgtsCatMaxAnnualQty;
    @JoinColumn(name = "BGTS_CAT_FK", referencedColumnName = "BGTS_CAT")
    @ManyToOne
    private BgtsCat bgtsCatFk;


    public BenDtl() {
    }

    public BigDecimal getMaxDailyQty() {
        return maxDailyQty;
    }

    public void setMaxDailyQty(BigDecimal maxDailyQty) {
        this.maxDailyQty = maxDailyQty;
    }

    public BigDecimal getMaxPrdQty() {
        return maxPrdQty;
    }

    public void setMaxPrdQty(BigDecimal maxPrdQty) {
        this.maxPrdQty = maxPrdQty;
    }

    public Long getMaxPrdQtyDays() {
        return maxPrdQtyDays;
    }

    public void setMaxPrdQtyDays(Long maxPrdQtyDays) {
        this.maxPrdQtyDays = maxPrdQtyDays;
    }

    public BigDecimal getMaxAnnualQty() {
        return maxAnnualQty;
    }

    public void setMaxAnnualQty(BigDecimal maxAnnualQty) {
        this.maxAnnualQty = maxAnnualQty;
    }

    public BgtsCat getBgtsCatFk() {
        return bgtsCatFk;
    }

    public void setBgtsCatFk(BgtsCat bgtsCatFk) {
        this.bgtsCatFk = bgtsCatFk;
    }

    public BigDecimal getBgtsCatMaxAnnualQty() {
        return bgtsCatMaxAnnualQty;
    }

    public void setBgtsCatMaxAnnualQty(BigDecimal bgtsCatMaxAnnualQty) {
        this.bgtsCatMaxAnnualQty = bgtsCatMaxAnnualQty;
    }

    public String getAhfs1() {
        return ahfs1;
    }

    public void setAhfs1(String ahfs1) {
        this.ahfs1 = ahfs1;
    }

    public String getAhfs1Cd() {
        return ahfs1Cd;
    }

    public void setAhfs1Cd(String ahfs1Cd) {
        this.ahfs1Cd = ahfs1Cd;
    }

    public String getAhfs2() {
        return ahfs2;
    }

    public void setAhfs2(String ahfs2) {
        this.ahfs2 = ahfs2;
    }

    public String getAhfs2Cd() {
        return ahfs2Cd;
    }

    public void setAhfs2Cd(String ahfs2Cd) {
        this.ahfs2Cd = ahfs2Cd;
    }

    public String getAhfs2CdFmtd() {
        return ahfs2CdFmtd;
    }

    public void setAhfs2CdFmtd(String ahfs2CdFmtd) {
        this.ahfs2CdFmtd = ahfs2CdFmtd;
    }

    public String getAhfs3() {
        return ahfs3;
    }

    public void setAhfs3(String ahfs3) {
        this.ahfs3 = ahfs3;
    }

    public String getAhfs3Cd() {
        return ahfs3Cd;
    }

    public void setAhfs3Cd(String ahfs3Cd) {
        this.ahfs3Cd = ahfs3Cd;
    }

    public String getAhfs3CdFmtd() {
        return ahfs3CdFmtd;
    }

    public void setAhfs3CdFmtd(String ahfs3CdFmtd) {
        this.ahfs3CdFmtd = ahfs3CdFmtd;
    }

    public Double getAmtPcarePaysPerUnit() {
        return amtPcarePaysPerUnit;
    }

    public void setAmtPcarePaysPerUnit(Double amtPcarePaysPerUnit) {
        this.amtPcarePaysPerUnit = amtPcarePaysPerUnit;
    }

    public String getAmtPcarePaysUnit() {
        return amtPcarePaysUnit;
    }

    public void setAmtPcarePaysUnit(String amtPcarePaysUnit) {
        this.amtPcarePaysUnit = amtPcarePaysUnit;
    }

    public String getAtc1() {
        return atc1;
    }

    public void setAtc1(String atc1) {
        this.atc1 = atc1;
    }

    public String getAtc1Cd() {
        return atc1Cd;
    }

    public void setAtc1Cd(String atc1Cd) {
        this.atc1Cd = atc1Cd;
    }

    public String getAtc2() {
        return atc2;
    }

    public void setAtc2(String atc2) {
        this.atc2 = atc2;
    }

    public String getAtc2Cd() {
        return atc2Cd;
    }

    public void setAtc2Cd(String atc2Cd) {
        this.atc2Cd = atc2Cd;
    }

    public String getAtc3() {
        return atc3;
    }

    public void setAtc3(String atc3) {
        this.atc3 = atc3;
    }

    public String getAtc3Cd() {
        return atc3Cd;
    }

    public void setAtc3Cd(String atc3Cd) {
        this.atc3Cd = atc3Cd;
    }

    public String getAtc4() {
        return atc4;
    }

    public void setAtc4(String atc4) {
        this.atc4 = atc4;
    }

    public String getAtc4Cd() {
        return atc4Cd;
    }

    public void setAtc4Cd(String atc4Cd) {
        this.atc4Cd = atc4Cd;
    }

    public String getAtc5() {
        return atc5;
    }

    public void setAtc5(String atc5) {
        this.atc5 = atc5;
    }

    public String getAtc5Cd() {
        return atc5Cd;
    }

    public void setAtc5Cd(String atc5Cd) {
        this.atc5Cd = atc5Cd;
    }

    public String getDinPin() {
        return dinPin;
    }

    public void setDinPin(String dinPin) {
        this.dinPin = dinPin;
    }

    public String getDrugBrandNm() {
        return drugBrandNm;
    }

    public void setDrugBrandNm(String drugBrandNm) {
        this.drugBrandNm = drugBrandNm;
    }

    public String getDrugMfrCd() {
        return drugMfrCd;
    }

    public void setDrugMfrCd(String drugMfrCd) {
        this.drugMfrCd = drugMfrCd;
    }

    public String getDrugMfrNm() {
        return drugMfrNm;
    }

    public void setDrugMfrNm(String drugMfrNm) {
        this.drugMfrNm = drugMfrNm;
    }

    public String getDsgForm() {
        return dsgForm;
    }

    public void setDsgForm(String dsgForm) {
        this.dsgForm = dsgForm;
    }

    public String getDtlPlanSpecAuthyEligFlg() {
        return dtlPlanSpecAuthyEligFlg;
    }

    public void setDtlPlanSpecAuthyEligFlg(String dtPlanSpecAuthyEligFlg) {
        this.dtlPlanSpecAuthyEligFlg = dtPlanSpecAuthyEligFlg;
    }

    public Date getEffDate() {
        return effDate;
    }

    public void setEffDate(Date effDate) {
        this.effDate = effDate;
    }

    public Date getEndDate() {
        return endDate;
    }

    public void setEndDate(Date endDate) {
        this.endDate = endDate;
    }

    public Date getFormularyLstDate() {
        return formularyLstDate;
    }

    public void setFormularyLstDate(Date formularyLstDate) {
        this.formularyLstDate = formularyLstDate;
    }

    public String getGenDrug() {
        return genDrug;
    }

    public void setGenDrug(String genDrug) {
        this.genDrug = genDrug;
    }

    public String getGenDsgForm() {
        return genDsgForm;
    }

    public void setGenDsgForm(String genDsgForm) {
        this.genDsgForm = genDsgForm;
    }

    public String getGenDrugIndex() {
        return genDrugIndex;
    }

    public void setGenDrugIndex(String genDrugIndex) {
        this.genDrugIndex = genDrugIndex;
    }

    public String getGenDrugStrgth() {
        return genDrugStrgth;
    }

    public void setGenDrugStrgth(String genDrugStrgth) {
        this.genDrugStrgth = genDrugStrgth;
    }

    public String getLcaExempt() {
        return lcaExempt;
    }

    public void setLcaExempt(String lcaExempt) {
        this.lcaExempt = lcaExempt;
    }

    public Double getLcaPrice() {
        return lcaPrice;
    }

    public void setLcaPrice(Double lcaPrice) {
        this.lcaPrice = lcaPrice;
    }

    public String getLtdUseFlg() {
        return ltdUseFlg;
    }

    public void setLtdUseFlg(String ltdUseFlg) {
        this.ltdUseFlg = ltdUseFlg;
    }

    public String getMaxDaysSply() {
        return maxDaysSply;
    }

    public void setMaxDaysSply(String maxDaysSply) {
        this.maxDaysSply = maxDaysSply;
    }

    public Double getMaxPrice() {
        return maxPrice;
    }

    public void setMaxPrice(Double maxPrice) {
        this.maxPrice = maxPrice;
    }

    public String getPayLcaFlg() {
        return payLcaFlg;
    }

    public void setPayLcaFlg(String payLcaFlg) {
        this.payLcaFlg = payLcaFlg;
    }

    public String getPcarePlan() {
        return pcarePlan;
    }

    public void setPcarePlan(String pcarePlan) {
        this.pcarePlan = pcarePlan;
    }

    public String getPcarePlanCd() {
        return pcarePlanCd;
    }

    public void setPcarePlanCd(String pcarePlanCd) {
        this.pcarePlanCd = pcarePlanCd;
    }

    public Double getRdpPrice() {
        return rdpPrice;
    }

    public void setRdpPrice(Double rdpPrice) {
        this.rdpPrice = rdpPrice;
    }

    public String getRdpUnits() {
        return rdpUnits;
    }

    public void setRdpUnits(String rdpUnits) {
        this.rdpUnits = rdpUnits;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }



    public String getSpecialAuthorityUrl() {
        return "https://www2.gov.bc.ca/gov/content/health/practitioner-professional-resources/pharmacare/programs/special-authority";

    }

    public String getDisplayUnit() {
        return amtPcarePaysUnit;
    }

    public String getPayRdpFlg() {
        return payRdpFlg;
    }

    public void setPayRdpFlg(String payRdpFlg) {
        this.payRdpFlg = payRdpFlg;
    }

    public double getDisplayPrice() {
        return amtPcarePaysPerUnit == null ? 0 : amtPcarePaysPerUnit;
//        if ("Yes".equals(payLcaFlg)){
//            return lcaPrice;
//        }else if (rdpPrice!=null && rdpPrice>0){
//            return rdpPrice;
//        }else if (maxPrice>0){
//            return maxPrice;
//        }else{
//            return 0;
//        }
    }

    public boolean getShowSALink() {
        return "Yes".equals(getLtdUseFlg());
    }
/**
 * This function check if one of the fields that sets a Quantity limit is not set to NULL or to 0. if Yes, the function return TRUE
 * @return 
 */
    public boolean getHasQL() {
        
        //I don't like having 5 return statements in the same method... 
        //But I think the world can handle it
        
        BigDecimal zero = new BigDecimal(0);

        if (maxDailyQty != null && !zero.equals(maxDailyQty)){
            return true;
        }
        
        if(maxPrdQty != null && !zero.equals(maxPrdQty)){
            return true;
        }
        
        if(maxPrdQtyDays != null && maxPrdQtyDays != 0){
            return true;
        }
        
        if(maxAnnualQty != null && !zero.equals(maxAnnualQty)){
            return true;
        }
        
        return bgtsCatMaxAnnualQty != null && !zero.equals(bgtsCatMaxAnnualQty);
    }

    public String getSaDetailsText() {
        if ("Yes".equals(getLtdUseFlg())) {
            return "Yes";
        } else {
            return "No";
        }
    }

    public String getRdpDisplayText() {
        return payRdpFlg;
//        if (rdpUnits!=null && !"".equals(rdpUnits) &&
//            rdpPrice!=null && rdpPrice < RDP_NOT_A_PRICE){
//            return "Yes";
//        }else{
//            return "No";
//        }
    }
}
