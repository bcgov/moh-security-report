/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.pharmacare.web.selenium.pageobjects;

import ca.bc.gov.health.pharmacare.web.selenium.pageobjects.fragment.LeftMenu;

import org.openqa.selenium.By;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.support.PageFactory;
import org.openqa.selenium.support.ui.LoadableComponent;
import selenium.util.ActionBot;

/**
 *
 * @author adebiyi.kuseju
 */
public class BenefitsLookupHomePage extends LoadableComponent<BenefitsLookupHomePage> {

    public static final String SEARCH_BUTTON_XPATH = "//input[@value='Search the PharmaCare Formulary' and @type='submit']";
    
    private final WebDriver driver;
    private String[] handles;
    private final ActionBot actionBot;
    private final String browser;
    
    
    private final LeftMenu leftMenu;

    public BenefitsLookupHomePage(LeftMenu leftMenu, WebDriver driver, String browser) {

        this.driver = driver;
        this.browser = browser;
        actionBot = new ActionBot(driver);

        this.leftMenu = leftMenu;

        PageFactory.initElements(driver, this);

    }

    @Override
    protected void load() {
        driver.get("http://localhost:8080/pharmacare/BenefitsLookup");
    }

    @Override
    protected void isLoaded() throws Error {

        try {
            driver.findElement(By.xpath(SEARCH_BUTTON_XPATH));
            assert true;
        } catch (NoSuchElementException e) {
            load();

        }
    }
    
    public void navigateToSearchPage() {
        actionBot.click(driver.findElement(By.xpath(SEARCH_BUTTON_XPATH)));
    }

}
