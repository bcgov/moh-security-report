<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/gov30Template.xhtml">
    <ui:define name="title">#{msg.Create_Project}</ui:define>       
    <ui:define name="body">    
        <style>
            .label {
                width: 145px
            }
            .top-position {
                vertical-align: top
            }
            .SelectedItem .ui-state-highlight{
                background: #394559 !important;
                color: white !important;
            }
        </style>
        <h2><h:outputText value="#{msg.Create_New_Project}"/></h2>
        <hr/>

        <h:form id="createProjectForm">
            <p:messages id="messages" closable="true">
                <p:autoUpdate />
            </p:messages>
            <p:panel id="contentInner">
                <div class="ui-g">
                    <span class='required'>*</span><p:outputLabel value=" #{msg['Required_Fields']}"/>
                </div>
                <f:facet name="header">#{msg.Create_Project}</f:facet>

                <div>
                    <div class="ui-g">
                        <div class="ui-g-2">                    
                            <p:outputLabel id="Pharmacy_PO_Providers1" for="projectTypeId" value="#{msg.pharmacy_po_provider_line1}" escape="false"/><br/>
                            <p:outputLabel id="Pharmacy_PO_Providers2" for="projectTypeId" indicateRequired="false" value="#{msg.pharmacy_po_provider_line2}:" escape="false"/>
                        </div>
                        <div class="ui-g-3">
                            <h:selectOneMenu id="projectTypeId"
                                             label="#{msg['Project.project_type']}"
                                             required="true"
                                             requiredMessage="#{msg['Project.project_type']}: Value is required"
                                             value="#{createProject.project.projectTypeId.id}" 
                                             valueChangeListener="#{createProject.changeProjectType}">
                                <f:selectItem itemLabel="" itemValue ="-1"/>
                                <f:selectItems value ="#{Droplists.codesProjectTypes}"/>
                                <f:validator id="projectTypeValidId" for="projectTypeId" validatorId="validator.projectTypeId"/>
                                <f:ajax event="change" execute="@this" render=":createProjectForm:projectType projectTypePCarePlan"/>                  
                            </h:selectOneMenu>
                        </div>
                    </div>
                    <div class="ui-g">

                        <div class="ui-g-2">
                            <p:outputLabel for="projectName" value="#{msg.project_name}:"/>
                        </div>
                        <div class="ui-g-6">
                            <p:inputText value="#{createProject.project.name}" size="60" required="true"
                                         id="projectName" label="#{msg.project_name}" maxlength="75">
                                <f:validateLength maximum="75"/>
                            </p:inputText>                                
                        </div>
                    </div>
                    <div class="ui-g">

                        <div class="ui-g-2">
                            <p:outputLabel for="projectDate" value="#{msg.project_date}:"/><br/>
                            <p:outputLabel for="projectDate" indicateRequired="false" value="#{msg.project_month_year_line2}"/>
                        </div>
                        <div class="ui-g-1">
                            <p:calendar value="#{createProject.projectDate}" 
                                        requiredMessage="#{msg.project_date}: Value is required"
                                        id="projectDate" style="width:200px" required="true"
                                        pattern="MMM-yyyy" size="12" mode="popup" navigator="true"/>  
                        </div>
                    </div>
                    <div class="ui-g">
                        <div class="ui-g-2">
                            <p:outputLabel for="pharmaCarePlans" value="#{msg.pharmacare_plans}: " />
                        </div>
                        <div class="ui-g-1">
                            <p:outputPanel id="projectTypePCarePlan">
                                <p:outputPanel rendered="#{createProject.project.projectTypeId.name==null}">
                                    <p:selectManyMenu id="pharmaCarePlansBlank" label="#{msg.pharmacare_plans}" 
                                                      value="#{Droplists.codesPcarePlans}"  
                                                      style="width: 60px" styleClass="SelectedItem">
                                        <f:selectItems value ="#{Droplists.codesPcarePlans}" var="pharmacare_plans_blank" />
                                    </p:selectManyMenu>
                                </p:outputPanel>
                                <p:outputPanel rendered="#{(createProject.project.projectTypeId.name=='Pharmacy Project')or(createProject.project.projectTypeId.name=='PO Provider Project')}">           
                                    <p:selectManyMenu id="pharmaCarePlans" label="#{msg.pharmacare_plans}" 
                                                      value="#{createProject.selectedPharmacarePlans}" 
                                                      style="width: 60px" styleClass="SelectedItem">
                                        <f:selectItems value ="#{Droplists.codesPcarePlansPharm}" var="pharma_care_plans" />
                                    </p:selectManyMenu>
                                </p:outputPanel>
                                <p:outputPanel rendered="#{createProject.project.projectTypeId.name=='Plan M Project'}">
                                    <p:selectManyMenu id="pharmaCarePlanM" label="#{msg.pharmacare_plans}" 
                                                      value="#{createProject.selectedPharmacarePlanM}" 
                                                      style="width: 60px" styleClass="SelectedItem">
                                        <f:selectItems value ="#{Droplists.codesPcarePlanM}" var="pharma_care_planM" />
                                    </p:selectManyMenu>
                                </p:outputPanel>
                            </p:outputPanel>
                        </div>
                    </div>                    
                    <div class="ui-g">

                        <div class="ui-g-2">
                            <p:outputLabel for="claimStartDate" value="#{msg.claim_start_date}:"/>
                        </div>
                        <div class="ui-g-2">
                            <p:calendar value="#{createProject.project.projectFromDate}" 
                                        requiredMessage="#{msg.claim_start_date}: Value is required"
                                        id="claimStartDate" style="width:200px" required="true"
                                        pattern="MMM-dd-yyyy" size="12" mode="popup" navigator="true"/>                                
                        </div>   
                        <div class="col-xs-2"></div>
                        <div class="ui-g-2">                       
                            <p:outputLabel for="claimEndDate" value="#{msg.claim_end_date}:"/>
                        </div>
                        <div class="ui-g-2">
                            <p:calendar value="#{createProject.project.projectToDate}" 
                                        requiredMessage="#{msg.claim_end_date}: Value is required"
                                        id="claimEndDate" style="width:200px" required="true"
                                        pattern="MMM-dd-yyyy" size="12" mode="popup" navigator="true"/> 
                        </div>
                    </div>
                    <div class="ui-g">

                        <div class="ui-g-2">
                            <p:outputLabel for="maxNumberLetters" value="#{msg.max_number_letters_line1}" escape="false"/><br/>
                            <p:outputLabel for="maxNumberLetters" indicateRequired="false" value="#{msg.max_number_letters_line2}: " escape="false"/>              
                        </div>
                        <div class="ui-g-1">
                            <p:inputText value="#{createProject.maxPatients}" size="10" required="true"
                                         id="maxNumberLetters" label="#{msg.max_number_letters}" maxlength="4">
                                <f:validateLength maximum="4"/>
                            </p:inputText>                                
                        </div>
                    </div>
                </div>

                <p:outputPanel id="projectType">
                    <p:outputPanel rendered="#{createProject.project.projectTypeId.name=='Pharmacy Project'}">
                        <ui:include src="/WEB-INF/fragments/createPharmacy-fragment.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{createProject.project.projectTypeId.name=='PO Provider Project'}">
                        <ui:include src="/WEB-INF/fragments/createPO-fragment.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{createProject.project.projectTypeId.name=='Plan M Project'}">
                        <ui:include src="/WEB-INF/fragments/createPlanM-fragment.xhtml"/>
                    </p:outputPanel>
                </p:outputPanel>

                <br/>
                <div id="commandButtons" align="center">
                    <p:commandButton id="createProjectBtn" widgetVar="crtbtn" actionListener="#{createProject.add}" value="#{msg.Create_Project}"
                                     onclick="PF('crtbtn').disable()" 
                                     oncomplete="PF('crtbtn').enable()" 
                                     update="createProjectForm"/>
                    <p:graphicImage height="1" alt="" value="/resources/template-images/spacer.gif" width="10"/>
                    <p:commandButton id="clearBtn" actionListener="#{createProject.clear}" value="#{msg['button.clear']}" 
                                     update="createProjectForm" process="@this" />
                </div>
                <br/>

            </p:panel>

        </h:form>
    </ui:define>
</ui:composition>
