<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/gov30Template.xhtml">
    <ui:define name="title">#{msg.Create_Letter_Run}</ui:define>       
    <ui:define name="body">
        <h2><h:outputText value="#{msg.Create_Letter_Run}"/></h2>
        <hr/>
        <h:form id="createLetterRunForm">
            <p:messages id="messages" closable="true">
                <p:autoUpdate />
            </p:messages>
            <p:panel id="contentInner">
                <div class="ui-g">
                    <span class='required'>*</span><p:outputLabel value=" #{msg['Required_Fields']}"/>
                </div>
                <f:facet name="header">#{msg.Create_Letter_Run}</f:facet>

                <div>
                    <div class="ui-g">
                        <div class="ui-g-2">                        
                            <p:outputLabel id="letterRun" for="letterRunTypeId" value="#{msg['Project.letter_run_type']}:" escape="false"/>
                        </div>
                        <div class="ui-g-4">
                            <h:selectOneMenu id="letterRunTypeId"
                                             label="#{msg['Project.letter_run_type']}" 
                                             required="true" 
                                             requiredMessage="#{msg['Project.letter_run_type']}: Value is required"
                                             value="#{createLetterRun.project.projectTypeId.id}" 
                                             valueChangeListener="#{createLetterRun.changeProjectType}">
                                <f:selectItem itemLabel="" itemValue ="-1"/>
                                <f:selectItems value ="#{Droplists.codesSVAProjectTypes}"/>
                                <f:validator id="letterRunTypeValidId" for="letterRunTypeId" validatorId="validator.letterRunTypeId"/>
                                <p:ajax event="change" id="createLetterRunTypes" process="@this" update="letterRunType, maxPatients, contentInner"/>
                            </h:selectOneMenu>
                        </div>
                    </div>
                    <div class="ui-g">
                        <div class="ui-g-2">
                            <p:outputLabel for="letterRunName" value="#{msg.letter_run_name}:"/>
                        </div>
                        <div class="ui-g-6">
                            <p:inputText value="#{createLetterRun.project.name}" size="60" required="true"
                                         id="letterRunName" label="#{msg.letter_run_name}" maxlength="75">
                                <f:validateLength maximum="75"/>
                            </p:inputText>                                
                        </div>
                    </div>
                    <div class="ui-g">
                        <div class="ui-g-2">
                            <p:outputLabel for="letterRunDate" value="#{msg.letter_run_date}:"/><br/>
                            <p:outputLabel for="letterRunDate" indicateRequired="false" value="#{msg.project_month_year_line2}"/>
                        </div>
                        <div class="ui-g-1">
                            <p:calendar value="#{createLetterRun.letterRunDate}"
                                        id="letterRunDate"
                                        requiredMessage="#{msg.letter_run_date}: Value is required"
                                        required="true"
                                        navigator="true"
                                        pattern="MMM-yyyy"
                                        size="12"
                                        maxlength="12" />
                        </div>
                    </div>
                    <div class="ui-g">
                        <div class="ui-g-2">
                            <p:outputLabel for="claimStartDate" value="#{msg.claim_start_date}:"/>
                        </div>
                        <div class="ui-g-2">
                            <p:calendar value="#{createLetterRun.project.projectFromDate}" 
                                        requiredMessage="#{msg.claim_start_date}: Value is required"
                                        required="true"
                                        id="claimStartDate" 
                                        mode="popup"
                                        navigator="true"
                                        pattern="MMM-dd-yyyy" 
                                        maxlength="12" />                                
                        </div>
                        <div class="col-xs-2"></div>
                        <div class="ui-g-2">
                            <p:outputLabel for="claimEndDate" value="#{msg.claim_end_date}:"/>
                        </div>
                        <div class="ui-g-2">
                            <p:calendar value="#{createLetterRun.project.projectToDate}" 
                                        requiredMessage="#{msg.claim_end_date}: Value is required"
                                        required="true"
                                        id="claimEndDate" 
                                        mode="popup"
                                        navigator="true"
                                        pattern="MMM-dd-yyyy" 
                                        maxlength="12" /> 
                        </div>
                    </div>
                    <div class="ui-g">
                        <div class="ui-g-2">
                            <p:outputLabel for="maxPatients" value="#{msg.max_number_letters_line1}" escape="false"/><br/>
                            <p:outputLabel for="maxPatients" indicateRequired="false" value="#{msg.max_number_letters_line2}: " escape="false"/>               
                        </div>
                        <div class="ui-g-1">
                            <p:inputText value="#{createLetterRun.maxPatients}"
                                         id="maxPatients"
                                         label="#{msg.max_number_letters}" 
                                         size="10" 
                                         required="true"
                                         maxlength="4">
                                <f:validateLength maximum="4"/>
                            </p:inputText>
                        </div>
                    </div>
                </div>

                <p:outputPanel id="letterRunType">
                    <p:outputPanel id="random_frag_id" rendered="#{createLetterRun.project.projectTypeId.name=='Random Monthly Audit'}">
                        <ui:include src="/WEB-INF/fragments/createRandom-fragment.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel id="select_frag_id" rendered="#{createLetterRun.project.projectTypeId.name=='Select Service Audit'}">
                        <ui:include src="/WEB-INF/fragments/createSelectServ-fragment.xhtml"/>
                    </p:outputPanel>
                    <p:outputPanel id="select_quest_frag_id" rendered="#{createLetterRun.project.projectTypeId.name=='Select Service Questions Audit'}">
                        <ui:include src="/WEB-INF/fragments/createSelectServQuest-fragment.xhtml"/>
                    </p:outputPanel>
                </p:outputPanel>

                <br/><br/>
                <div id="commandButtons" align="center">
                    <p:commandButton id="createProjectBtn" 
                                     actionListener="#{createLetterRun.addLetterRun()}" 
                                     value="#{msg.Create_Letter_Run}"
                                     update="@form">
                        <p:resetInput target="createLetterRunForm, contentInner, maxPatients, practCodeSelectPrj, practCodeRandomPrj, practCodeSelectQuestPrj" />
                    </p:commandButton>
                    <p:graphicImage height="1" alt="" value="/resources/template-images/spacer.gif" width="10"/>
                    <p:commandButton id="clearBtn"
                                     actionListener="#{createLetterRun.clear()}"
                                     value="#{msg['button.clear']}" 
                                     update="createLetterRunForm, contentInner" 
                                     process="@this"/>
                </div>
                <br/>

            </p:panel>

        </h:form>
    </ui:define>
</ui:composition>
