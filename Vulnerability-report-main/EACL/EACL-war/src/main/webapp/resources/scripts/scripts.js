function confirmExit() {
    return confirm("Please confirm you want to sign out. \nThis will also end all other active Keycloak or SiteMinder sessions you have open.");
}

/* Keep the top level nav dropdown highlighted when one of the subnav options is still being hovered over */
$(document).ready(function() {
    $('li.dropdown').mouseenter(function() {
        $(this).toggleClass('active-dropdown');
    });

    $('li.dropdown').mouseleave(function() {
        $(this).toggleClass('active-dropdown');
    });
});

// Session Management
const TIMEOUT = 1200000; // 1 minute less than timeout in web.xml
const ACTIVITY_CHECK_INTERVAL = 60000; // 1 min
const MAX_TIME_REMAINING_BEFORE_GROWL = 120000; // 2 min - growl will be shown when this much time is remaining in the session

$(document).ready(function() {
    $.active = false;
    $.growl = false;
    $.elapsed = 0;
    $('body').bind('click keypress', function() { $.active = true; });
    checkActivity();
    setInterval(checkActivity, ACTIVITY_CHECK_INTERVAL); // function, interval
});

function checkActivity() {
    if ($.active) {
        $.elapsed = 0;
        $.active = false;
        $.growl = false;
        PF('timeoutWarning').removeAll();
        extendSession(); // p:remoteCommand in gov30Template.xhtml
    }
    if ($.elapsed < TIMEOUT) {
        $.elapsed += ACTIVITY_CHECK_INTERVAL;

        if ($.elapsed > (TIMEOUT - MAX_TIME_REMAINING_BEFORE_GROWL) && $.growl === false) {
            PF('timeoutWarning').show([{
                "summary":"Your session is about to expire",
                "detail":"Please continue using the application to extend your session",
                "severity":"warn"}]);
            $.growl = true;
        }
    } else {
        endSession();  
    }
}