<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <title><ui:insert name="title"/></title>
        <link rel="shortcut icon" type="image/x-icon" href="template-images/favicon.ico"/>
    </h:head>
    <h:body styleClass="home">

        <h:outputScript library="scripts" name="scripts.js"/>

        <h:outputStylesheet name="css/header.css" />
        <h:outputStylesheet name="css/navigation.css" />
        <h:outputStylesheet name="css/templatemain.css" />
        <h:outputStylesheet name="css/gov30primefaces.css" />
        <h:outputStylesheet name="css/style.css" />

        <header id="navbar" class="navbar navbar-static-top navbar-default">
            <h:form id="header">
                <div id="navbar-toolbar">
                    <div class="container">
                        <div class="col-sm-12 navbar-logo" style="width: 800px; padding: 15px 0px 20px;">
                            <a href="https://www2.gov.bc.ca/gov/content/home" target="_blank" class="bcgov logo" title="Government of British Columbia Home">
                                <h:graphicImage name="template-images/gov3_bc_logo.png" alt="BC Government Logo"/>
                            </a>

                            <h:commandLink id="pharmacareApp"
                                           action="welcome?faces-redirect=true"
                                           rendered="#{ApplicationSelectionBean.app == 'pacl'}">
                                <h1 class="sitetitle">#{msg['application.name.short.first']} #{msg['application.name.short.second']}</h1>
                            </h:commandLink>
                            <h:commandLink id="mspApp"
                                           action="WelcomeEACL?faces-redirect=true"
                                           rendered="#{ApplicationSelectionBean.app == 'sva'}">
                                <h1 class="sitetitle">#{msg['application_sva.name.short.first']} #{msg['application_sva.name.short.second']} #{msg['application.name.short.second']}</h1>
                            </h:commandLink>
                            <h:commandLink id="eaclApp"
                                           disabled="true"
                                           rendered="#{ApplicationSelectionBean.app == '' and not HealthIdeasLogin.userHasLoggedIn}">
                                <h1 class="sitetitle">#{msg['application_eacl']}</h1>
                            </h:commandLink>
                            <h:commandLink id="eaclAppSel"
                                           disabled="true"
                                           rendered="#{ApplicationSelectionBean.app == '' and HealthIdeasLogin.userHasLoggedIn}">
                                <h1 class="sitetitle">#{msg['application_selection']}</h1>
                            </h:commandLink>
                        </div>
                        <div class="col-sm-pull-20 navbar-links-container ">
                            <div class="pull-right">
                                <h:commandLink id="homePACL"
                                               styleClass="serviceLink"
                                               action="#{ApplicationSelectionBean.changeApp('pacl')}"
                                               value="#{msg.PACL_Home}"
                                               rendered="#{HealthIdeasLogin.userHasLoggedIn and (request.isUserInRole('PharmaCare_Auditor') or request.isUserInRole('SYSADMIN') or request.isUserInRole('Super_Auditor') or request.isUserInRole('Super_Sysadmin'))}"/>
                                <h:commandLink id="homeEACL"
                                               styleClass="serviceLink"
                                               action="#{ApplicationSelectionBean.changeApp('sva')}"
                                               value="#{msg.EACL_Home}"
                                               rendered="#{HealthIdeasLogin.userHasLoggedIn and (request.isUserInRole('EACL_Auditor') or request.isUserInRole('EACL_Sysadmin') or request.isUserInRole('Super_Auditor') or request.isUserInRole('Super_Sysadmin'))}"/>
                                <h:commandLink id="notifications"
                                               styleClass="serviceLink"
                                               action="notifications?faces-redirect=true"
                                               value="#{msg.notifications}"
                                               rendered="#{ApplicationSelectionBean.app eq 'sva'}"/>
                                <h:commandLink id="logoutLink"
                                               styleClass="logout"
                                               action="#{Logout.logout()}"
                                               value="#{msg.logOut}"
                                               onclick="return confirmExit()"/>

                                <p:growl id="timeoutWarningGrowl" for="timeoutMessages" widgetVar="timeoutWarning" showDetail="true" sticky="true"/>
                                <p:remoteCommand name="extendSession" global="false" actionListener="#{SessionTimeout.extendSession}"/>
                                <p:remoteCommand name="endSession" global="false" actionListener="#{SessionTimeout.endSession}"/>
                            </div>
                        </div>
                    </div>
                </div>
            </h:form>
            <div class="container nav-container">
                <ui:fragment id="paclTopNavId" rendered="#{(ApplicationSelectionBean.app eq 'pacl') and (request.isUserInRole('Super_Auditor') or request.isUserInRole('Super_Sysadmin'))}">
                    <ui:include src="paclTopNav.xhtml"/>
                </ui:fragment>
                <ui:fragment id="svaTopNavId" rendered="#{(ApplicationSelectionBean.app eq 'sva') and (request.isUserInRole('Super_Auditor') or request.isUserInRole('Super_Sysadmin'))}">
                    <ui:include src="svaTopNav.xhtml"/>
                </ui:fragment>
                <ui:fragment id="topNavId" rendered="#{HealthIdeasLogin.userHasLoggedIn and (request.isUserInRole('PharmaCare_Auditor') or request.isUserInRole('SYSADMIN') or request.isUserInRole('EACL_Auditor') or request.isUserInRole('EACL_Sysadmin'))}">
                    <ui:include src="topNav.xhtml"/>
                </ui:fragment>
            </div>
        </header>

        <div class="container content" style="min-height: 65.9%">
            <p:ajaxStatus onstart="PF('statusDialog').show()" oncomplete="PF('statusDialog').hide()" onerror="PF('statusDialog').hide()"/>
            <p:dialog styleClass="spinner-box" widgetVar="statusDialog" modal="true"
                      draggable="false" closable="false" resizable="false" showHeader="false"
                      style="padding: 0px">
                <p:outputPanel style="width: 268px; height: 184px;">
                    <h:graphicImage name="template-images/loading.gif" style="position: absolute; top: 70px; left: 65px"/>
                </p:outputPanel>
            </p:dialog>
            <div id="richmessages">
                <p:messages/>
            </div>
            <ui:insert name="body">Content</ui:insert>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="ui-g" style="float: right;">User Role: #{MenuBean.userRole} &emsp; Application Version: ${project.version}</div>  
            </div>
        </footer>
    </h:body>

</html>
