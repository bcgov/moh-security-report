/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ca.bc.gov.health.pacl.ejb.session;

import ca.bc.gov.health.pacl.ejb.entity.CodesLetterTemplateType;
import ca.bc.gov.health.pacl.ejb.entity.LetterTemplate;
import jakarta.ejb.Stateless;
import jakarta.persistence.EntityManager;
import jakarta.persistence.PersistenceContext;
import java.util.List;

/**
 *
 * @author Dan.Stepanov
 */
@Stateless
public class LetterTemplateFacade extends AbstractFacade<LetterTemplate> implements LetterTemplateFacadeLocal {

    /**
     * New instance for EntityManager class.
     */
    @PersistenceContext(unitName = "PACLPU")
    private EntityManager em;

    /**
     * Gets the local instance of the {@link EntityManager} class.
     * @return entity Manager
     */
    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    /**
     * Default constructor.
     */
    public LetterTemplateFacade() {
        super(LetterTemplate.class);
    }

    /**
     * Retrieve the Letter Template Type record by letter template type id.
     */
    @Override
    public LetterTemplate findByLetterTemplateTypeId(CodesLetterTemplateType letterTemplateType) {       
        List<LetterTemplate> result =  em.createNamedQuery("LetterTemplate.findByTemplateTypeId").setParameter("letterTemplateTypeId", letterTemplateType).getResultList();

        return result != null && !result.isEmpty() ? result.get(0) : null;
    }
}
