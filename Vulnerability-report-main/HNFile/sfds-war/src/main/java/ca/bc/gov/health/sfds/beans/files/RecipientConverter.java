package ca.bc.gov.health.sfds.beans.files;

import ca.bc.gov.health.sfds.dto.RecipientDto;
import com.google.gson.GsonBuilder;
import jakarta.faces.component.UIComponent;
import jakarta.faces.context.FacesContext;
import jakarta.faces.convert.Converter;
import jakarta.faces.convert.FacesConverter;
import org.apache.commons.text.StringEscapeUtils;

@FacesConverter(value = "recipientConverter")
public class RecipientConverter implements Converter<RecipientDto> {

	@Override
	public RecipientDto getAsObject(FacesContext context, UIComponent component, String value) {
		String newValue = StringEscapeUtils.unescapeHtml4(value);
		return new GsonBuilder().create().fromJson(newValue, RecipientDto.class);
	}

	@Override
	public String getAsString(FacesContext context, UIComponent component, RecipientDto value) {
		return value.toString();
	}

}
