package ca.bc.gov.health.sfds.files.renamers;

import ca.bc.gov.health.sfds.files.FileRenamer;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

/**
 *
 * Implements HCC use-specific file renamer strategy.
 *
 * @author vladimir.dovgalyuk
 *
 */
public class HCCRenamer implements FileRenamer {

    @Override
    public String renameFile(String filename, String source, String... params) {
        GregorianCalendar tDate = new GregorianCalendar();
        tDate.setTime(new Date());

        StringBuilder result = new StringBuilder(source);
        result.append(".")
                .append(tDate.get(Calendar.YEAR))
                .append(String.format("%02d", tDate.get(Calendar.MONTH)))
                .append(tDate.get(Calendar.DAY_OF_MONTH))
                .append("_")
                .append(String.format("%02d", tDate.get(Calendar.HOUR_OF_DAY)))
                .append(String.format("%02d", tDate.get(Calendar.MINUTE)))
                .append(String.format("%02d", tDate.get(Calendar.SECOND)))
                .append(filename.substring(filename.lastIndexOf('.')));

        return result.toString();
    }

}
