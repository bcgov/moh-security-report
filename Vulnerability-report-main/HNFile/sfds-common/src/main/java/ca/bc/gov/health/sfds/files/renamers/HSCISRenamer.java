package ca.bc.gov.health.sfds.files.renamers;

import ca.bc.gov.health.sfds.files.FileRenamer;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * HSCIS Implementation of FileRenamer
 *
 * @author vladimir.dovgalyuk
 */
public class HSCISRenamer implements FileRenamer {

    /**
     * Renames files sent to HSCIS
     *
     * @param filename Original file name
     * @param source Sender account ID
     * @param params Array of two strings: [0] last digit of the selected year [1] selected quarter
     */
    @Override
    public String renameFile(String filename, String source, String... params) {
        SimpleDateFormat df = new SimpleDateFormat("yyyyMMdd_hhmmss");
        String date = df.format(new Date());

        StringBuilder renamedFile = new StringBuilder();
        renamedFile.append("HS");
        renamedFile.append(source);
        if (params.length > 0) {
            renamedFile.append(params[0]);
        }
        if (params.length > 1) {
            renamedFile.append(params[1]);
        }
        renamedFile.append(".");
        renamedFile.append(date);
        renamedFile.append(filename.substring(filename.lastIndexOf('.')));

        return renamedFile.toString();
    }

}
