package ca.bc.gov.health.sfds.service;

import ca.bc.gov.health.sfds.dto.BulletinDto;
import jakarta.ejb.Local;
import java.util.List;
import java.util.Set;

/**
 *
 * @author vladimir.dovgalyuk
 */
@Local
public interface IBulletinsFacade {

    /**
     * Retrieves all actual bulletins, i.e. non-expired parcels with parent context BULLETIN
     *
     * @param bulletinConextId Context ID for Bulletins
     * @return List of available bulletins regardless of user's "uses"
     */
    public List<BulletinDto> getAllNotExpiredBulletins(Long bulletinConextId);

    /**
     * Retrieves all bulletins for the list of uses
     *
     * @param bulletinConextId Context ID for Bulletins
     * @param uses List of available bulletins regardless of user's "uses"
     * @return List of BulletinDto
     */
    public List<BulletinDto> getAllBulletinsForUses(Long bulletinConextId, List<String> uses);

    /**
     * Retrieves all actual bulletins, i.e. non-expired parcels with parent context BULLETIN, for the list of uses
     *
     * @param bulletinConextId ID for Bulletins
     * @param uses List of available bulletins
     * @return List of BulletinDto
     */
    public List<BulletinDto> getNotExpiredBulletinsForUses(Long bulletinConextId, List<String> uses);

    /**
     * Creates a brand new bulletin
     *
     * @param bulletin Bulletin DTO
     * @param content Parcel data BLOB as UTF-8 encoded string
     * @param user Authenticated user
     * @return true if creation was successful, false otherwise
     */
    public boolean createBulletin(BulletinDto bulletin, String content, String user);

    /**
     * Creates a brand new bulletin
     *
     * @param bulletin Bulletin DTO
     * @param content Parcel data BLOB
     * @param user Authenticated user
     * @return true if creation was successful, false otherwise
     */
    public boolean createBulletin(BulletinDto bulletin, byte[] content, String user);

    /**
     * Updates the existing bulletin
     *
     * @param bulletin Bulletin DTO
     * @param content Parcel data BLOB
     * @param changedFields Set of changed fields
     * @param user Authenticated user
     * @return true if update was successful, false otherwise
     */
    public boolean updateBulletin(BulletinDto bulletin, String content, Set<String> changedFields, String user);

    /**
     * Deletes existing bulletin
     *
     * @param bulletin
     */
    public void deletBulletin(BulletinDto bulletin);
}
